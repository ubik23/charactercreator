function shadeColor(e,t){var r=parseInt(e.slice(1),16),n=Math.round(2.55*t),i=(r>>16)+n,o=(r>>8&255)+n,a=(255&r)+n;return"#"+(16777216+65536*(i<255?i<1?0:i:255)+256*(o<255?o<1?0:o:255)+(a<255?a<1?0:a:255)).toString(16).slice(1)}function ColorLuminance(e,t){(e=String(e).replace(/[^0-9a-f]/gi,"")).length<6&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),t=t||0;var r,n,i="#";for(n=0;n<3;n++)r=parseInt(e.substr(2*n,2),16),i+=("00"+(r=Math.round(Math.min(Math.max(0,r+r*t),255)).toString(16))).substr(r.length);return i}function colorizeByClass(e,t){for(var r=document.querySelectorAll("."+e),n=r.length,i=n;i--;)r[n-(i+1)].style.fill=t}function colorSkin(e){colorizeByClass("upperlip",shadeColor(e,-10)),colorizeByClass("lowerlip",shadeColor(e,10))}function colorize(e,t){var r=window.forms,o=e,a=[],s=shadeColor(t,10),l=shadeColor(t,20),c=shadeColor(t,30),u=shadeColor(t,-10),h=shadeColor(t,-20),d=shadeColor(t,-30),f="alpha";for(var p in r){var g=Object.keys(r[p]);for(var m in g)if(g[m].toLowerCase()===o){var v=o.replace(/^[a-z]/,function(e){return e.toUpperCase()});if("body"===o||"body_head"===o||"ears"===o||"nose"===o||"age"===o||"mouth"===o.slice(0,4)){a=skinLayers;var y="skinColor";f="skin"}else if("facialhair"===o||"hair"===o){a=window.hairLayers;y="hairColor"}else{if(a=[],"irisColor"===(y=o+"Color")||"browsColor"===y||"lashes"===y)for(i in r[0].Emotion){""!=(_=r[0].Emotion[i])&&a.push(o+"_"+_)}else for(i in r[p][v]){var _;""!=(_=r[p][v][i])&&a.push(o+"_"+_)}}origList=a,a=getAffectedListFromOrig(origList,multiLayer);var b=t.toString(),x=new Array;for(n in x[y]=b,hash.add(x),modCharacter(y,b),a){fullId="#"+a[n];for(var w=document.querySelectorAll(fullId+" ."+f),C=document.querySelectorAll(fullId+" ."+f+"--light"),k=document.querySelectorAll(fullId+" ."+f+"--lighter"),S=document.querySelectorAll(fullId+" ."+f+"--lightest"),F=document.querySelectorAll(fullId+" ."+f+"--dark"),E=document.querySelectorAll(fullId+" ."+f+"--darker"),A=document.querySelectorAll(fullId+" ."+f+"--darkest"),L=w.length,B=C.length,q=k.length,T=S.length,j=F.length,M=E.length,D=A.length;L--;)colorPaths(w[L],t,h);for(;B--;)colorPaths(C[B],s,u);for(;q--;)colorPaths(k[q],l,t);for(;T--;)colorPaths(S[T],c,s);for(;j--;)colorPaths(F[j],u,h);for(;M--;)colorPaths(E[M],h,d);for(;D--;)colorPaths(A[D],d,d)}}}}function colorPaths(e,t,r){"none"!=e.style.fill&&""!=e.style.fill&&(e.style.fill=t),"none"!=e.style.stroke&&""!=e.style.stroke&&(e.style.stroke=r)}function processPaths(e,t){for(p in e)if("function"==typeof e[p].attr){var r=e[p].attr("id");if(void 0===r)break;if("#mouth"===fullId.slice(0,6)&&"upperlip"!=r&&"lowerlip"!=r&&"lowerlip-shadow"!=r&&"upperlip-shadow"!=r)continue;var n=viewport.select("#"+r).attr("style");if(void 0===n)break;for(var i,o,a,s=n.split(";"),l=s.length,c={style:{}};l--;)" "!=(i=s[l].split(":"))&&1!==i.length&&(o=i[0].trim(),a=i[1].trim(),o.length>0&&a.length>0&&(c.style[o]=a));var u=t.toString(),h=replacementStyle(c,u);viewport.selectAll("#"+r).attr({style:h}),newStroke=shadeColor(u,-25),void 0===c.style["stroke-width"]&&(u=shadeColor(u,-25))}}function getAffectedListFromOrig(e,t){var r;for(a in affectedList=[],e){for(lyr in r=!1,t)if(e[a]==t[lyr][0])for(var n=1;n<=t[lyr][1];n++)idOf=e[a]+"_"+n+"_of_"+t[lyr][1],affectedList.push(idOf),r=!0;r||affectedList.push(e[a])}return affectedList}function replacementStyle(e,t){var r=e.style,i="";for(n in Object.keys(r)){var o=Object.keys(r)[n];if("fill"===o)if("none"!=r[o])if(void 0===e.style["stroke-width"])var a=ColorLuminance(t,-.12);else a=t;else a=r[o];else if("stroke"===o)if("none"!=r[o]){if(void 0!=e.style["stroke-width"])a=ColorLuminance(t,-.2)}else a=r[o];else a=r[o];var s=o+": "+a+"; ";i=i.concat(s)}return i}function applyColor(e,t,r){var i;if(fullId="#"+e,ga("send","event","menu","color",fullId+"_#"+t),null!=r){var o=r.selectAll("path");if("body_athletic_2_of_2"===e){var a=r.selectAll("ellipse");newArray=[],newArray.push.apply(newArray,o),newArray.push.apply(newArray,a),o=newArray}for(p in o)if("function"==typeof o[p].attr){var s="",l=o[p].attr("id"),c=o[p].attr("class");if(void 0!=c)for(var u=c.split(" "),h=u.length;h--;)currentClass=u[h],"alpha--dark"===currentClass||"skin--dark"===currentClass||"hair--dark"===currentClass?s="dark":"alpha--darker"===currentClass||"skin--darker"===currentClass||"hair--darker"===currentClass?s="darker":"alpha--darkest"===currentClass||"skin--darkest"===currentClass||"hair--darkest"===currentClass?s="darkest":"alpha--light"===currentClass||"skin--light"===currentClass||"hair--light"===currentClass?s="light":"alpha--lighter"===currentClass||"skin--lighter"===currentClass||"hair--lighter"===currentClass?s="lighter":"alpha--lightest"===currentClass||"skin--lightest"===currentClass||"hair--lightest"===currentClass?s="lightest":"alpha"!==currentClass&&"skin"!==currentClass&&"hair"!==currentClass||(s="base");else u=c;if(void 0==(i=void 0===l?o[p].node.style.cssText:r.select("#"+l).attr("style")))continue;for(var d,f,g,m=i.split(";"),v=m.length,y={style:{}};v--;)f=(d=m[v].split(":"))[0].replace(/\s+/g,""),d[1]&&(g=d[1].replace(/\s+/g,"")),f.length>0&&g.length>0&&(y.style[f]=g);newStyle=y.style;var _="";for(n in Object.keys(newStyle)){var b=Object.keys(newStyle)[n];if("fill"===b)if("none"!=newStyle[b]){if("dark"===s)var x=shadeColor("#"+t,-10);else if("darker"===s)x=shadeColor("#"+t,-20);else if("darkest"===s)x=shadeColor("#"+t,-30);else if("light"===s)x=shadeColor("#"+t,10);else if("lighter"===s)x=shadeColor("#"+t,20);else if("lightest"===s)x=shadeColor("#"+t,30);else if("base"===s)x="#"+t;else if(""===s)x=newStyle[b]}else x=newStyle[b];else if("stroke"===b)if("none"!=newStyle[b]){if(void 0!=y.style["stroke-width"]&&"dark"===s)x=shadeColor("#"+t,-30);else if(void 0!=y.style["stroke-width"]&&"darker"===s)x=shadeColor("#"+t,-30);else if(void 0!=y.style["stroke-width"]&&"darkest"===s)x=shadeColor("#"+t,-30);else if(void 0!=y.style["stroke-width"]&&"light"===s)x="#"+t;else if(void 0!=y.style["stroke-width"]&&"lighter"===s)x=shadeColor("#"+t,10);else if(void 0!=y.style["stroke-width"]&&"lightest"===s)x=shadeColor("#"+t,20);else if(void 0!=y.style["stroke-width"]&&"base"===s)x=shadeColor("#"+t,-20);else if(void 0!=y.style["stroke-width"]&&""===s)x=newStyle[b]}else x=newStyle[b];else x=newStyle[b];var w=b+": "+x+"; ";_=_.concat(w)}r.selectAll("path")[p].attr({style:_})}}}function download(){var e="my_character.svg",t='\x3c!-- ?xml version="1.0" encoding="UTF-8" standalone="no"? --\x3e\n<svg xmlns="http://www.w3.org/2000/svg" id="character" width="560" height="560">\n',r=document.getElementById("svg1").childNodes;currentUser&&""!==currentUser.cc.personnageActuel&&(e=currentUser.cc.personnageActuel+".svg"),Array.prototype.slice.call(r).forEach(function(e){if(void 0!=e.style&&0!=e.style.opacity){var r=e.innerHTML;"<desc>Created with Snap</desc><defs></defs>"===r.slice(-43)&&(r=r.slice(0,-43)),t+=r}}),t+="</svg>";var n=document.createElement("a");if(n.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(t)),n.setAttribute("download",e),document.createEvent){var i=document.createEvent("MouseEvents");i.initEvent("click",!0,!0),n.dispatchEvent(i)}else n.click()}function createForm(e,t){document.querySelector("#content_1").innerHTML="";e=e||window.sex,t=t||window.forms;var r=["Head","Accessories","Torso","Body","Legs","Feet"],n='<h2 class="sidebar__title">Categories</h2>';for(var i in n+='<ul class="section__list">',t){var o=document.querySelector("#content_1"),a="";n+='<section class="accordeon__section-label"><span class="accordeon__section-title">'+r[i]+'</span><div class="accordeon__svg-container section-btn--hide"><svg width="25" height="25"><use xlink:href="#accordeon_btn"/></svg></div></section><div class="accordeon__content section--hide">';t.length;for(var s in t[i]){n+='    <a class="section__link"><li class="sbl__option" tabindex="0">'+s+"</li></a>";var l=s.toLowerCase();a+='    <div class="Row options__container options__'+l+'"><span class="svg__section__title">'+l+'</span><div class="thumbnails__container">';hash.get(l),t[i][s].map(function(e,t){var r="#"+l+"_"+e,n=getSectionsFromIdMultiLayer(window.multiLayer,r);if("emotion"===l){n=[];var i=GetEmotionGetLayers(e);for(emo in i){var o="#"+i[emo]+"_"+e;n.push(o)}}var s="";for(t in n){var c=document.querySelector(n[t]);if(null!=c)s+=c.cloneNode(!0).innerHTML}var u=getViewBox(l,e);a+='    <div class="option__container option__'+l+"_"+e+'" tabindex="0"><svg viewBox="'+u+'" class="svg__option '+l+"_"+e+'">'+s+'</svg><span class="option__label">'+e+"</span></div>"}).join("\n");var c=hash.get(s);if(void 0!==c);else;htagc=s.toLowerCase()+"Color";var u=hash.get(htagc);if(void 0!==u);else;a+="    </div>",a+="</div>",0}n+="</div>";var h=document.createElement("div");h.innerHTML=a,o.appendChild(h)}n+="</ul>";var d=document.querySelector("#sidebar-left"),f=document.createElement("div");f.innerHTML=n,d.innerHTML="",d.appendChild(f);var p=document.querySelectorAll(".sbl__option"),g=document.querySelectorAll(".option__container"),m=document.querySelectorAll(".accordeon__section-label");addEventListenerList(p,"mouseover",showThumbOptions),addEventListenerList(p,"focus",showThumbOptions),addEventListenerList(p,"click",openThumbs),addEventListenerList(g,"click",changeOption),addEventListenerList(m,"click",toggleSection)}function getSectionsFromIdMultiLayer(e,t){var r=[];for(lyr in e){if(t.slice(1)===e[lyr][0])for(var n=1;n<=e[lyr][1];n++)newLayer=t+"_"+n+"_of_"+e[lyr][1],r.push(newLayer);0===r.length&&(r=[t])}return r}function openThumbs(){var e=document.querySelector(".section--selected");null!=e&&e.classList.remove("section--selected"),showThumbOptions(this),this.classList.add("section--selected");var t=document.querySelector(".widget"),r=t.previousSibling,n=document.querySelector("#sidebar-left"),i=document.querySelector(".sidebar-right");void 0===r.classList&&void 0!=r.previousSibling.classList&&(r=r.previousSibling),(r=r.querySelector(".accordeon__svg-container")).classList.contains("section-btn--hide")&&r.classList.toggle("section-btn--hide"),t.classList.contains("section--hide")&&t.classList.toggle("section--hide"),n.classList.contains("cherry")&&(n.classList.remove("cherry"),i.classList.add("visible")),i.classList.add("visible")}function showSidebarLeft(){document.querySelector("#sidebar-left").classList.add("visible")}function hideSidebarLeft(){document.querySelector("#sidebar-left").classList.remove("visible")}function clearSidebarLeft(){document.querySelector("#sidebar-left").innerHTML=""}function showSidebarRight(){document.querySelector("#sidebar").classList.add("visible")}function hideSidebarRight(){document.querySelector("#sidebar").classList.remove("visible")}function clearSidebarRight(){var e=document.querySelector("#content"),t=document.querySelector("#sidebar");e.removeChild(t),e.appendChild(rightSidebarClone)}function addEventListenerList(e,t,r){for(var n=e.length,i=n;i--;)e[n-i-1].addEventListener(t,r,!1)}function closeSections(e){for(var t=document.querySelectorAll(".accordeon__section-label"),r=document.querySelectorAll(".accordeon__svg-container"),n=t.length;n--;){var i=t[n];if(i!==e&&i.parentNode.parentNode.parentNode.classList.contains("sidebar-left")){var o=r[n],a=i.nextSibling;void 0===a.classList&&void 0!=a.nextSibling.classList&&(a=a.nextSibling),a.classList.contains("section--hide")||a.classList.toggle("section--hide"),o.classList.contains("section-btn--hide")||o.classList.toggle("section-btn--hide")}}}function toggleSection(){var e=this;this.parentNode.parentNode.parentNode.classList.contains("sidebar-left")&&closeSections(e);var t=document.querySelector(".alert");null!=t&&t.classList.remove("alert"),e.classList.contains("alert")&&e.classList.remove("alert");var r=e.nextSibling;void 0===r.classList&&void 0!=r.nextSibling.classList&&(r=r.nextSibling);var n=r.clientHeight,i=e.querySelector(".accordeon__svg-container");r.classList.contains("accordeon__content")&&(r.classList.contains("section--hide")||(r.style.maxHeight=n),r.classList.toggle("section--hide"),i.classList.toggle("section-btn--hide"))}function showThumbOptions(e){e=e.target||e;var t=document.querySelector(".options__"+e.innerHTML.toLowerCase()),r=document.querySelectorAll(".options__container");if(null===document.querySelector(".section--selected")){for(var n=0,i=r.length;n<i;n++)r[n].classList.remove("selected--option");t.classList.add("selected--option"),getColor(e.innerHTML.toLowerCase())}}function changeOption(){var e=this.parentNode.parentNode.firstChild.innerHTML,t=this.lastChild.innerHTML,r=document.querySelector(".colorpicker-wrapper").previousSibling;void 0===r.classList&&void 0!=r.previousSibling.classList&&(r=r.previousSibling),show(t,e),r.classList.add("alert")}function getColor(e){clearPicker();var t=e,r=document.getElementById("slide"),n=document.getElementById("picker"),i=document.querySelector(".section-id");document.querySelector(".colorpicker-wrapper");i.innerHTML=t,ColorPicker(r,n,function(e,r,n){colorize(t,e)})}function emptyPicker(){document.querySelector(".colorpicker-wrapper").innerHTML=""}function clearPicker(){document.querySelector(".colorpicker-wrapper").innerHTML='<div class="colorpicker-controls"><span class="section-id"></span></div><div class="colorpicker-align"><div id="picker" style="background-color:rgb(255,0,0);"></div><div id="slide"></div></div>'}function getViewBox(e,t){var r=e+"_"+t,n=window.sex;if("m"===n)var i={body_athletic:"65 130 430 430",coat_snowboard:"160 124 230 230",coat_fall_long:"130 124 290 290",coat_trench:"130 124 290 290",ears_plugged:"254 122 20 20",ears_unplugged:"254 121 20 20",glasses_fpv:"250 97 64 64",hat_helmet_vietnam:"243 86 80 80",hat_jester:"208 54 140 140",hat_motorcycle:"243 86 80 80",hat_tuque:"243 85 80 80",hair_mohawk:"243 45 80 80",holster_revolver_hip:"220 240 130 130",horns_large:"235 58 90 90",jewelry_chain:"241 140 80 80",mask_horse:"233 80 100 100",mask_robin:"261 108 40 40",pet_canine:"82 403 150 150",pet_chicken:"45 403 150 150",pet_doge:"341 349 200 200",pet_feline:"381 439 128 128",pet_fox:"42 393 150 150",pet_gerbil:"125 475 64 64",pet_parrot:"203 116 80 80",pet_raven:"50 439 128 128",pet_rat:"300 439 128 128",pet_siamese_cat:"42 393 150 150",pet_vulture:"281 349 180 180",scar_horizontal_neck:"265 139 32 32",scar_horizontal_nose:"264 115 32 32",scar_vertical_heart:"249 164 64 64",scar_vertical_left:"264 110 32 32",scar_vertical_right:"264 110 32 32",scarf_drape:"185 140 190 190",tatoo_aum_chest:"248 165 64 64",tatoo_aum_left:"298 157 64 64",tatoo_aum_right:"198 154 64 64",tatoo_chaos_chest:"248 169 64 64",tatoo_chaos_left:"298 164 64 64",tatoo_chaos_right:"198 164 64 64",underwear_boxers:"224 258 120 120"},o={age:"261 109 40 40",belt:"185 135 190 190",body_head:"249 95 64 64",cloak:"0 0 560 560",coat:"95 134 360 360",earpiece:"280 125 25 25",ears:"254 120 20 20",earings:"256 87 50 50",emotion:"259 113 42 42",eyepatch:"261 109 40 40",facialhair:"261 124 40 40",freckles:"261 109 40 40",glasses:"261 109 40 40",gloves:"206 308 40 40",hat:"241 70 80 80",hair:"243 80 80 80",headband:"241 90 80 80",holster:"215 150 130 130",horns:"256 87 50 50",iris:"270.25 124.85 4 4",jacket:"170 130 220 220",mask:"243 93 80 80",nose:"265 115 32 32",pants:"130 244 290 290",pipe:"252 132 32 32",pupils:"270.25 124.85 40 40",scarf:"185 120 190 190",shirt:"190 140 190 190",shoes:"210 442 120 120",shoulderpads:"207 120 150 150",socks:"210 442 120 120",suit:"65 130 430 430",tie:"241 140 80 80",underwear:"228 238 120 120",veil:"207 97 150 150",vest:"185 135 190 190",watch:"331 302 25 25",warpaint:"261 109 40 40",wings:"110 -30 350 350"};else if("f"===n)i={body_athletic:"65 130 430 430",coat_winter_tubecollar:"125 120 280 280",dress_bobafett:"160 165 230 230",dress_corset:"175 180 200 200",dress_japanese_pleat:"105 140 340 340",dress_parisian_fall:"105 160 340 340",dress_german_expression:"75 160 400 400",dress_short:"175 180 200 200",dress_suit:"175 140 200 200",dress_waitress:"160 140 230 230",earings_gold_ring_left:"289 141 20 20",glasses_fpv:"252 109 64 64",hat_helmet_vietnam:"243 98 80 80",hat_motorcycle:"243 98 80 80",hat_tiara:"262 98 40 40",hat_tuque:"243 97 80 80",hair_afro:"243 80 80 80",hair_mohawk:"243 57 80 80",holster_revolver_hip:"213 245 130 130",holster_revolver_thigh:"213 285 130 130",mask_horse:"233 92 100 100",mask_robin:"261 120 40 40",pet_canine:"82 403 150 150",pet_chicken:"45 403 150 150",pet_doge:"341 349 200 200",pet_feline:"381 439 128 128",pet_fox:"42 393 150 150",pet_gerbil:"125 475 64 64",pet_parrot:"275 126 80 80",pet_raven:"50 439 128 128",pet_rat:"300 439 128 128",pet_siamese_cat:"42 393 150 150",pet_vulture:"281 349 180 180",scar_horizontal_neck:"265 139 32 32",scar_horizontal_nose:"264 115 32 32",scar_vertical_heart:"249 164 64 64",scar_vertical_left:"264 110 32 32",scar_vertical_right:"264 110 32 32",scarf_drape:"185 140 190 190",tatoo_archeopteryx_left:"282 173 64 64",tatoo_aum_chest:"248 165 64 64",tatoo_aum_left:"298 157 64 64",tatoo_aum_right:"198 154 64 64",tatoo_chaos_chest:"248 175 48 48",tatoo_chaos_left:"298 170 48 48",tatoo_chaos_right:"210 164 48 48",tatoo_tribal_face:"258 105 50 50",top_tank:"215 165 120 120",underwear_boxers:"224 258 120 120"},o={age:"261 121 40 40",belt:"175 185 190 190",body_head:"249 107 64 64",bra:"220 160 100 100",bracelet:"316 252 48 48",coat:"125 79 280 280",collar:"255 160 48 48",dress:"160 150 230 230",earpiece:"280 137 25 25",earings:"257 141 20 20",ears:"254 130 20 20",emotion:"261 125 42 42",eyepatch:"261 121 40 40",facialhair:"261 124 40 40",glasses:"263 121 40 40",gloves:"206 308 40 40",hat:"241 82 80 80",hair:"243 92 80 80",headband:"241 102 80 80",holster:"215 150 130 130",horns:"257 99 50 50",iris:"273.75 137.5 4 4",jacket:"170 130 220 220",leggings:"136 305 260 260",makeup:"267.5 123 30 30",mask:"243 105 80 80",nails:"200 327 25 25",necklace:"255 160 48 48",nose:"265 127 32 32",pants:"130 244 290 290",pipe:"255 144 32 32",pupils:"270.25 124.85 40 40",scarf:"185 120 190 190",shirt:"190 140 190 190",shoes:"225 442 120 120",shorts:"215 245 120 120",shoulderpads:"207 100 150 150",socks:"225 442 120 120",suit:"80 130 400 400",tie:"241 140 80 80",top:"225 160 100 100",underwear:"232 258 90 90",veil:"207 97 150 150",vest:"185 135 190 190",wings:"110 -30 350 350"};return i[r]?i[r]:o[e]?o[e]:"0 0 560 560"}function onAllLoaded(){document.getElementById("male_silhouette"),document.getElementById("female_silhouette"),document.querySelector(".sidebar-right");var e,t=document.querySelector(".sidebar-left"),r=hash.get("sex");e=r||window.sex,downloadBtn=document.querySelector("#downloadButton"),downloadBtn.addEventListener("click",download,!1),downloadBtn.classList.add("enabled"),createForm(e,forms),t.classList.add("visible"),revealCharacter()}function onEachLoaded(e,t){var r=!1,n=t;if(toBeShown.indexOf(n.split("/")[2].split(".")[0])>-1)var i=1;else i=0;if("body"===(o=n.split("/")[2].split("_")[0])||"ears"===o||"nose"===o||"sockets"===o||"age"===o||"mouth"===o)var o="skin";if("facialhair"===o||"brows"===o)o="hair";if(void 0!=c.choices[o+"Color"]){var a=c.choices[o+"Color"];r=!0}!0===r&&applyColor(n.split("/")[2].split(".")[0],a.slice(1),e.select("*")),e.select("*").attr({opacity:i})}function choicesToLayers(e,t){for(var r=[],n=fromEmotionGetLayers(e.choices.emotion),i=[],o=n.length,a=n.length;a--;)r.push(n[o-a-1]);for(var s in e.choices)i.push(s+"_"+e.choices[s]);for(var l in i)for(lyr in t)if(i[l]==t[lyr][0])for(var c=1;c<=t[lyr][1];c++)idOf=i[l]+"_"+c+"_of_"+t[lyr][1],r.push(idOf);else!1===isInArray(i[l],r)&&r.push(i[l]);return"f"===e.sex&&r.push("body_hand","bra_bow","nails_short"),r}function fromEmotionGetLayers(e){for(var t,r=[],n="",i=["brows","eyes","iris","pupils","mouth","lashes"],o=i.length,a=o;a--;){if("pupils"===i[t=o-a-1]){var s=hash.get("pupils");void 0===s&&(s="human"),i[t]+="_"+s}n=i[t]+"_"+e,r.push(n)}return r}function isInArray(e,t){return t.indexOf(e)>-1}function clearCharacter(){var e=document.querySelector("#svg1"),t=e.querySelector("#male_silhouette"),r=e.querySelector("#female_silhouette");e.innerHTML=t+r}function personnageActuelToHash(e){var t,r,n,i,o,a=e.cc.personnageActuel,s={};if(a&&""!==a){for(t=e.cc.personnages[a],r=Object.keys(t),itemsListLength=r.length,itemsListCounter=itemsListLength;itemsListCounter--;)i=r[n=itemsListLength-itemsListCounter-1],o=t[r[n]],s[i]=o,hash.add(s);clearCharacter(),interpretHash()}}function trans(e){document.querySelector("#svg1").classList.add("character--hide"),console.log("hideForms"),hash.add({sex:e}),hash.add({emotion:"neutral"}),currentUser&&currentUser.cc&&currentUser.cc.personnages&&currentUser.personnageActuel&&(currentUser.cc.personnages[personnageActuel].sex=e),window.sex=e,buildCharacter(resetForms)}function buildCharacter(e){var t=document.querySelector("#svg1");setTimeout(function(){clearForms(),clearCharacter(),interpretHash(),setTimeout(function(){t.classList.remove("character--hide"),console.log("buildCharacter"),e()},500)},500)}function hideForms(){hideSidebarLeft(),hideSidebarRight()}function clearForms(){clearSidebarLeft(),clearSidebarRight()}function resetForms(){hideForms(),createForm(),showSidebarLeft()}function Character(e){this.choices=e||{emotion:"neutral",body:"athletic",lips:"default",skinColor:this.skinTone,hairColor:"#ffe680",irisColor:"#2ad4ff",underwear:"plain",underwearColor:"#f2f2f2"},this.choices.emotion=this.choices.emotion||"neutral",this.choices.body=this.choices.body||"athletic",this.choices.lips=this.choices.lips||"default",this.skinTone&&(this.choices.skinColor=this.skinTone),this.choices.hairColor=this.choices.hairColor||"#ffe680",this.choices.irisColor=this.choices.irisColor||"#2ad4ff",this.choices.underwear=this.choices.underwear||"plain",this.choices.underwearColor=this.choices.underwearColor||"#f2f2f2",(e=this.choices).body_head||(e.body_head="default"),e.ears||(e.ears="default"),e.nose||(e.nose="default")}function modCharacter(e,t){e in c.choices&&delete c.choices[e],""!=t&&(c.choices[e]=t),currentUser&&currentUser.cc&&currentUser.cc.personnages&&currentUser.cc.personnageActuel&&(currentUser.cc.personnages[currentUser.cc.personnageActuel][e]=t)}function createCharacter(){document.getElementById(sex+"Button").checked=!0;var e=[form1,form2,form3];for(var t in e)for(var r in e[t]){var n=r.toLowerCase(),i=hash.get(n);if(void 0!==i){var o="#"+n+"_"+i;for(lyr in multiLayer)if(o.slice(1)==multiLayer[lyr][0])for(var a=1;a<=multiLayer[lyr][1];a++)idOf=o+"_"+a+"_of_"+multiLayer[lyr][1],viewport.selectAll(idOf).attr({opacity:1});else viewport.selectAll(o).attr({opacity:1})}}}function GetEmotionGetLayers(t){var r=[];for(e in faceElements=["brows","eyes","iris","pupils","mouth","lashes"],faceElements){if("pupils"===faceElements[e]){var n=hash.get("pupils");void 0===n&&(n="human"),faceElements[e]+="_"+n}var i=faceElements[e];r.push(i)}return r}function getOptions(e){var t=window.forms;e=capitalizeFirstLetter(e);for(i in t)if(options=t[i][e],void 0!=options)return options}function capitalizeFirstLetter(e){return e.charAt(0).toUpperCase()+e.slice(1)}function show(e,t){if("string"==typeof t)var r=[t];else r=[t.split(" ")[1]];var n=e,i=getOptions(r[0]),o=new Array,a="#"+r[0]+"_"+n;if(hideCompetition(r[0]),hash.add(o),currentUser&&triggerSaveBtn(),"pupils"===r[0]&&(r[0]+="_"+n,void 0==(n=hash.get("emotion"))&&(n="neutral")),"emotion"===r[0]){modCharacter(r[0],n),ga("send","event","menu","select",a),r=[];var s=GetEmotionGetLayers(n);for(emo in s){var l=s[emo];r.push(l)}}displaySections(r,i,n,multiLayer)}function displaySections(e,t,r,n){for(section in e)t.forEach(function(t,i){var o="#"+e[section]+"_"+t;if(t===r){for(lyr in n)sectionShow(n,o);if("brows"===e[section]||"eyes"===e[section]||"iris"===e[section]||"mouth"===e[section]||"pupils_human"===e[section]||"lashes"===e[section])modCharacter(e[section],r);else{var a=new Array;a[e[section]]=r,hash.add(a),modCharacter(e[section],r),ga("send","event","menu","select",o)}}else for(lyr in n)sectionHide(n,o)})}function sectionShow(e,t){if(t.slice(1)==e[lyr][0])for(var r=1;r<=e[lyr][1];r++)idOf=t+"_"+r+"_of_"+e[lyr][1],viewport.selectAll(idOf).attr({opacity:1});else viewport.selectAll(t).attr({opacity:1})}function sectionHide(e,t){if(t.slice(1)==e[lyr][0])for(var r=1;r<=e[lyr][1];r++)idOf=t+"_"+r+"_of_"+e[lyr][1],viewport.selectAll(idOf).attr({opacity:0});else viewport.selectAll(t).attr({opacity:0})}function resetCharacterTemplate(){for(var e=document.querySelector("#svg1").querySelectorAll("*"),t=e.length;t--;)0!==e[t].style.opacity&&(e[t].style.opactiy="0")}!function(e,t,r){var n,i,o=e.SVGAngle||t.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")?"SVG":"VML",a=15,s="http://www.w3.org/2000/svg",l=['<div class="picker-wrapper">','<div class="picker"></div>','<div class="picker-indicator"></div>',"</div>",'<div class="slide-wrapper">','<div class="slide"></div>','<div class="slide-indicator"></div>',"</div>"].join("");function c(t){if(e.event&&e.event.contentOverflow!==r)return{x:e.event.offsetX,y:e.event.offsetY};if(t.offsetX!==r&&t.offsetY!==r)return{x:t.offsetX,y:t.offsetY};var n=t.target.parentNode.parentNode;return{x:t.layerX-n.offsetLeft,y:t.layerY-n.offsetTop}}function u(e,r,n){for(var i in e=t.createElementNS(s,e),r)e.setAttribute(i,r[i]);"[object Array]"!=Object.prototype.toString.call(n)&&(n=[n]);for(var o=0,a=n[0]&&n.length||0;o<a;o++)e.appendChild(n[o]);return e}function h(e){var t,r,n,i,o,a=e.h%360/60;i=(o=e.v*e.s)*(1-Math.abs(a%2-1)),t=r=n=e.v-o,t+=[o,i,0,0,i,o][a=~~a],r+=[i,o,o,i,0,0][a],n+=[0,0,i,o,o,i][a];var s=Math.floor(255*t),l=Math.floor(255*r),c=Math.floor(255*n);return{r:s,g:l,b:c,hex:"#"+(16777216|c|l<<8|s<<16).toString(16).slice(1)}}function d(e){var t,r,n=e.r,i=e.g,o=e.b;return(e.r>1||e.g>1||e.b>1)&&(n/=255,i/=255,o/=255),{h:(0==(r=(t=Math.max(n,i,o))-Math.min(n,i,o))?null:t==n?(i-o)/r+(i<o?6:0):t==i?(o-n)/r+2:(n-i)/r+4)%6*60,s:0==r?0:r/t,v:t}}function f(t,n,i){return function(o){var s=c(o=o||e.event);t.h=s.y/n.offsetHeight*360+a;var l=h({h:t.h,s:1,v:1}),u=h({h:t.h,s:t.s,v:t.v});i.style.backgroundColor=l.hex,t.callback&&t.callback(u.hex,{h:t.h-a,s:t.s,v:t.v},{r:u.r,g:u.g,b:u.b},r,s)}}function p(t,r){return function(n){var i=c(n=n||e.event),o=r.offsetWidth,s=r.offsetHeight;t.s=i.x/o,t.v=(s-i.y)/s;var l=h(t);t.callback&&t.callback(l.hex,{h:t.h-a,s:t.s,v:t.v},{r:l.r,g:l.g,b:l.b},i)}}"SVG"==o?(i=u("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"100%",height:"100%"},[u("defs",{},u("linearGradient",{id:"gradient-hsv",x1:"0%",y1:"100%",x2:"0%",y2:"0%"},[u("stop",{offset:"0%","stop-color":"#FF0000","stop-opacity":"1"}),u("stop",{offset:"13%","stop-color":"#FF00FF","stop-opacity":"1"}),u("stop",{offset:"25%","stop-color":"#8000FF","stop-opacity":"1"}),u("stop",{offset:"38%","stop-color":"#0040FF","stop-opacity":"1"}),u("stop",{offset:"50%","stop-color":"#00FFFF","stop-opacity":"1"}),u("stop",{offset:"63%","stop-color":"#00FF40","stop-opacity":"1"}),u("stop",{offset:"75%","stop-color":"#0BED00","stop-opacity":"1"}),u("stop",{offset:"88%","stop-color":"#FFFF00","stop-opacity":"1"}),u("stop",{offset:"100%","stop-color":"#FF0000","stop-opacity":"1"})])),u("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#gradient-hsv)"})]),n=u("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"100%",height:"100%"},[u("defs",{},[u("linearGradient",{id:"gradient-black",x1:"0%",y1:"100%",x2:"0%",y2:"0%"},[u("stop",{offset:"0%","stop-color":"#000000","stop-opacity":"1"}),u("stop",{offset:"100%","stop-color":"#CC9A81","stop-opacity":"0"})]),u("linearGradient",{id:"gradient-white",x1:"0%",y1:"100%",x2:"100%",y2:"100%"},[u("stop",{offset:"0%","stop-color":"#FFFFFF","stop-opacity":"1"}),u("stop",{offset:"100%","stop-color":"#CC9A81","stop-opacity":"0"})])]),u("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#gradient-white)"}),u("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#gradient-black)"})])):"VML"==o&&(i=['<DIV style="position: relative; width: 100%; height: 100%">','<v:rect style="position: absolute; top: 0; left: 0; width: 100%; height: 100%" stroked="f" filled="t">','<v:fill type="gradient" method="none" angle="0" color="red" color2="red" colors="8519f fuchsia;.25 #8000ff;24903f #0040ff;.5 aqua;41287f #00ff40;.75 #0bed00;57671f yellow"></v:fill>',"</v:rect>","</DIV>"].join(""),n=['<DIV style="position: relative; width: 100%; height: 100%">','<v:rect style="position: absolute; left: -1px; top: -1px; width: 101%; height: 101%" stroked="f" filled="t">','<v:fill type="gradient" method="none" angle="270" color="#FFFFFF" opacity="100%" color2="#CC9A81" o:opacity2="0%"></v:fill>',"</v:rect>",'<v:rect style="position: absolute; left: 0px; top: 0px; width: 100%; height: 101%" stroked="f" filled="t">','<v:fill type="gradient" method="none" angle="0" color="#000000" opacity="100%" color2="#CC9A81" o:opacity2="0%"></v:fill>',"</v:rect>","</DIV>"].join(""),t.namespaces.v||t.namespaces.add("v","urn:schemas-microsoft-com:vml","#default#VML"));var g=0;function m(e,t,r){if(!(this instanceof m))return new m(e,t,r);if(this.h=0,this.s=1,this.v=1,r)this.callback=r,this.pickerElement=t,this.slideElement=e;else{var a=e;a.innerHTML=l,this.slideElement=a.getElementsByClassName("slide")[0],this.pickerElement=a.getElementsByClassName("picker")[0];var s=a.getElementsByClassName("slide-indicator")[0],c=a.getElementsByClassName("picker-indicator")[0];m.fixIndicators(s,c),this.callback=function(e,r,n,i,o){m.positionIndicators(s,c,o,i),t(e,r,n)}}if("SVG"==o){var u=i.cloneNode(!0),h=n.cloneNode(!0),d=u.getElementsByTagName("linearGradient")[0],_=u.getElementsByTagName("rect")[0];d.id="gradient-hsv-"+g,_.setAttribute("fill","url(#"+d.id+")");var b=[h.getElementsByTagName("linearGradient")[0],h.getElementsByTagName("linearGradient")[1]],x=h.getElementsByTagName("rect");b[0].id="gradient-black-"+g,b[1].id="gradient-white-"+g,x[0].setAttribute("fill","url(#"+b[1].id+")"),x[1].setAttribute("fill","url(#"+b[0].id+")"),this.slideElement.appendChild(u),this.pickerElement.appendChild(h),g++}else this.slideElement.innerHTML=i,this.pickerElement.innerHTML=n;v(this.slideElement,"click",f(this,this.slideElement,this.pickerElement)),v(this.pickerElement,"click",p(this,this.pickerElement)),y(this,this.slideElement,f(this,this.slideElement,this.pickerElement)),y(this,this.pickerElement,p(this,this.pickerElement))}function v(e,t,r){e.attachEvent?e.attachEvent("on"+t,r):e.addEventListener&&e.addEventListener(t,r,!1)}function y(e,t,r){var n=!1;v(t,"mousedown",function(e){n=!0}),v(t,"mouseup",function(e){n=!1}),v(t,"mouseout",function(e){n=!1}),v(t,"mousemove",function(e){n&&r(e)})}function _(e,t,r,n){e.h=t.h%360,e.s=t.s,e.v=t.v;var i=h(e),o={y:e.h*e.slideElement.offsetHeight/360,x:0},a=e.pickerElement.offsetHeight,s={x:e.s*e.pickerElement.offsetWidth,y:a-e.v*a};return e.pickerElement.style.backgroundColor=h({h:e.h,s:1,v:1}).hex,e.callback&&e.callback(n||i.hex,{h:e.h,s:e.s,v:e.v},r||{r:i.r,g:i.g,b:i.b},s,o),e}m.hsv2rgb=function(e){var t=h(e);return delete t.hex,t},m.hsv2hex=function(e){return h(e).hex},m.rgb2hsv=d,m.rgb2hex=function(e){return h(d(e)).hex},m.hex2hsv=function(e){return d(m.hex2rgb(e))},m.hex2rgb=function(e){return{r:parseInt(e.substr(1,2),16),g:parseInt(e.substr(3,2),16),b:parseInt(e.substr(5,2),16)}},m.prototype.setHsv=function(e){return _(this,e)},m.prototype.setRgb=function(e){return _(this,d(e),e)},m.prototype.setHex=function(e){return _(this,m.hex2hsv(e),r,e)},m.positionIndicators=function(e,t,r,n){r&&(e.style.top=r.y-e.offsetHeight/2+"px"),n&&(t.style.top=n.y-t.offsetHeight/2+"px",t.style.left=n.x-t.offsetWidth/2+"px")},m.fixIndicators=function(e,t){t.style.pointerEvents="none",e.style.pointerEvents="none"},e.ColorPicker=m}(window,window.document),function(e){var t,r,n="hasOwnProperty",i=/[\.\/]/,o=/\s*,\s*/,a=function(e,t){return e-t},s={n:{}},l=function(){for(var e=0,t=this.length;e<t;e++)if(void 0!==this[e])return this[e]},c=function(){for(var e=this.length;--e;)if(void 0!==this[e])return this[e]},u=Object.prototype.toString,h=String,d=Array.isArray||function(e){return e instanceof Array||"[object Array]"==u.call(e)};eve=function(e,n){var i,o=r,s=Array.prototype.slice.call(arguments,2),u=eve.listeners(e),h=0,d=[],f={},p=[],g=t;p.firstDefined=l,p.lastDefined=c,t=e,r=0;for(var m=0,v=u.length;m<v;m++)"zIndex"in u[m]&&(d.push(u[m].zIndex),u[m].zIndex<0&&(f[u[m].zIndex]=u[m]));for(d.sort(a);d[h]<0;)if(i=f[d[h++]],p.push(i.apply(n,s)),r)return r=o,p;for(m=0;m<v;m++)if("zIndex"in(i=u[m]))if(i.zIndex==d[h]){if(p.push(i.apply(n,s)),r)break;do{if((i=f[d[++h]])&&p.push(i.apply(n,s)),r)break}while(i)}else f[i.zIndex]=i;else if(p.push(i.apply(n,s)),r)break;return r=o,t=g,p},eve._events=s,eve.listeners=function(e){var t,r,n,o,a,l,c,u,h=d(e)?e:e.split(i),f=s,p=[f],g=[];for(o=0,a=h.length;o<a;o++){for(u=[],l=0,c=p.length;l<c;l++)for(r=[(f=p[l].n)[h[o]],f["*"]],n=2;n--;)(t=r[n])&&(u.push(t),g=g.concat(t.f||[]));p=u}return g},eve.separator=function(e){e?(e="["+(e=h(e).replace(/(?=[\.\^\]\[\-])/g,"\\"))+"]",i=new RegExp(e)):i=/[\.\/]/},eve.on=function(e,t){if("function"!=typeof t)return function(){};for(var r=d(e)?d(e[0])?e:[e]:h(e).split(o),n=0,a=r.length;n<a;n++)!function(e){for(var r,n=d(e)?e:h(e).split(i),o=s,a=0,l=n.length;a<l;a++)o=(o=o.n).hasOwnProperty(n[a])&&o[n[a]]||(o[n[a]]={n:{}});for(o.f=o.f||[],a=0,l=o.f.length;a<l;a++)if(o.f[a]==t){r=!0;break}!r&&o.f.push(t)}(r[n]);return function(e){+e==+e&&(t.zIndex=+e)}},eve.f=function(e){var t=[].slice.call(arguments,1);return function(){eve.apply(null,[e,null].concat(t).concat([].slice.call(arguments,0)))}},eve.stop=function(){r=1},eve.nt=function(e){var r=d(t)?t.join("."):t;return e?new RegExp("(?:\\.|\\/|^)"+e+"(?:\\.|\\/|$)").test(r):r},eve.nts=function(){return d(t)?t:t.split(i)},eve.off=eve.unbind=function(e,t){if(e){var r=d(e)?d(e[0])?e:[e]:h(e).split(o);if(r.length>1)for(var a=0,l=r.length;a<l;a++)eve.off(r[a],t);else{r=d(e)?e:h(e).split(i);var c,u,f,p,g,m=[s],v=[];for(a=0,l=r.length;a<l;a++)for(p=0;p<m.length;p+=f.length-2){if(f=[p,1],c=m[p].n,"*"!=r[a])c[r[a]]&&(f.push(c[r[a]]),v.unshift({n:c,name:r[a]}));else for(u in c)c[n](u)&&(f.push(c[u]),v.unshift({n:c,name:u}));m.splice.apply(m,f)}for(a=0,l=m.length;a<l;a++)for(c=m[a];c.n;){if(t){if(c.f){for(p=0,g=c.f.length;p<g;p++)if(c.f[p]==t){c.f.splice(p,1);break}!c.f.length&&delete c.f}for(u in c.n)if(c.n[n](u)&&c.n[u].f){var y=c.n[u].f;for(p=0,g=y.length;p<g;p++)if(y[p]==t){y.splice(p,1);break}!y.length&&delete c.n[u].f}}else for(u in delete c.f,c.n)c.n[n](u)&&c.n[u].f&&delete c.n[u].f;c=c.n}e:for(a=0,l=v.length;a<l;a++){for(u in(c=v[a]).n[c.name].f)continue e;for(u in c.n[c.name].n)continue e;delete c.n[c.name]}}}else eve._events=s={n:{}}},eve.once=function(e,t){var r=function(){return eve.off(e,r),t.apply(this,arguments)};return eve.on(e,r)},eve.version="0.5.0",eve.toString=function(){return"You are running Eve 0.5.0"},"undefined"!=typeof module&&module.exports?module.exports=eve:"function"==typeof define&&define.amd?define("eve",[],function(){return eve}):e.eve=eve}(this),function(e,t){if("function"==typeof define&&define.amd)define(["eve"],function(r){return t(e,r)});else if("undefined"!=typeof exports){var r=require("eve");module.exports=t(e,r)}else t(e,e.eve)}(window||this,function(e,t){var r=function(t){var r,n={},i=e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame||function(e){return setTimeout(e,16,(new Date).getTime()),!0},o=Array.isArray||function(e){return e instanceof Array||"[object Array]"==Object.prototype.toString.call(e)},a=0,s="M"+(+new Date).toString(36),l=Date.now||function(){return+new Date},c=function(e){var t=this;if(null==e)return t.s;var r=t.s-e;t.b+=t.dur*r,t.B+=t.dur*r,t.s=e},u=function(e){if(null==e)return this.spd;this.spd=e},h=function(e){var t=this;if(null==e)return t.dur;t.s=t.s*e/t.dur,t.dur=e},d=function(){var e=this;delete n[e.id],e.update(),t("mina.stop."+e.id,e)},f=function(){var e=this;e.pdif||(delete n[e.id],e.update(),e.pdif=e.get()-e.b)},p=function(){var e=this;e.pdif&&(e.b=e.get()-e.pdif,delete e.pdif,n[e.id]=e,m())},g=function(){var e,t=this;if(o(t.start)){e=[];for(var r=0,n=t.start.length;r<n;r++)e[r]=+t.start[r]+(t.end[r]-t.start[r])*t.easing(t.s)}else e=+t.start+(t.end-t.start)*t.easing(t.s);t.set(e)},m=function(e){if(e){var o=0;for(var a in n)if(n.hasOwnProperty(a)){var s=n[a],l=s.get();o++,s.s=(l-s.b)/(s.dur/s.spd),s.s>=1&&(delete n[a],s.s=1,o--,function(e){setTimeout(function(){t("mina.finish."+e.id,e)})}(s)),s.update()}r=!!o&&i(m)}else r||(r=i(m))},v=function(e,t,r,i,o,l,y){var _={id:s+(a++).toString(36),start:e,end:t,b:r,s:0,dur:i-r,spd:1,get:o,set:l,easing:y||v.linear,status:c,speed:u,duration:h,stop:d,pause:f,resume:p,update:g};n[_.id]=_;var b,x=0;for(b in n)if(n.hasOwnProperty(b)&&2==++x)break;return 1==x&&m(),_};return v.time=l,v.getById=function(e){return n[e]||null},v.linear=function(e){return e},v.easeout=function(e){return Math.pow(e,1.7)},v.easein=function(e){return Math.pow(e,.48)},v.easeinout=function(e){if(1==e)return 1;if(0==e)return 0;var t=.48-e/1.04,r=Math.sqrt(.1734+t*t),n=r-t,i=-r-t,o=Math.pow(Math.abs(n),1/3)*(n<0?-1:1)+Math.pow(Math.abs(i),1/3)*(i<0?-1:1)+.5;return 3*(1-o)*o*o+o*o*o},v.backin=function(e){if(1==e)return 1;var t=1.70158;return e*e*((t+1)*e-t)},v.backout=function(e){if(0==e)return 0;var t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},v.elastic=function(e){return e==!!e?e:Math.pow(2,-10*e)*Math.sin((e-.075)*(2*Math.PI)/.3)+1},v.bounce=function(e){var t=7.5625,r=2.75;return e<1/r?t*e*e:e<2/r?t*(e-=1.5/r)*e+.75:e<2.5/r?t*(e-=2.25/r)*e+.9375:t*(e-=2.625/r)*e+.984375},e.mina=v,v}(void 0===t?function(){}:t),n=function(e){function r(e,t){if(e){if(e.nodeType)return Y(e);if(q(e,"array")&&r.set)return r.set.apply(r,e);if(e instanceof G)return e;if(null==t)return Y(e=n.doc.querySelector(String(e)))}return new X(e=null==e?"100%":e,t=null==t?"100%":t)}r.version="0.5.1",r.toString=function(){return"Snap v"+this.version},r._={};var n={win:e.window,doc:e.window.document};r._.glob=n;var i,o,a="hasOwnProperty",s=String,l=parseFloat,c=parseInt,u=Math,h=u.max,d=u.min,f=u.abs,p=(u.pow,u.PI),m=(u.round,""),v=Object.prototype.toString,y=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?%?)\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?%?)\s*\))\s*$/i,_=(r._.separator=/[,\s]+/,/[\s]*,[\s]*/),b={hs:1,rg:1},x=/([a-z])[\s,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\s]*,?[\s]*)+)/gi,w=/([rstm])[\s,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\s]*,?[\s]*)+)/gi,C=/(-?\d*\.?\d*(?:e[\-+]?\d+)?)[\s]*,?[\s]*/gi,k=0,S="S"+(+new Date).toString(36),F=function(e){return(e&&e.type?e.type:m)+S+(k++).toString(36)},E="http://www.w3.org/1999/xlink",A="http://www.w3.org/2000/svg",L={};r.url=function(e){return"url('#"+e+"')"};function B(e,t){if(t){if("#text"==e&&(e=n.doc.createTextNode(t.text||t["#text"]||"")),"#comment"==e&&(e=n.doc.createComment(t.text||t["#text"]||"")),"string"==typeof e&&(e=B(e)),"string"==typeof t)return 1==e.nodeType?"xlink:"==t.substring(0,6)?e.getAttributeNS(E,t.substring(6)):"xml:"==t.substring(0,4)?e.getAttributeNS(A,t.substring(4)):e.getAttribute(t):"text"==t?e.nodeValue:null;if(1==e.nodeType){for(var r in t)if(t[a](r)){var i=s(t[r]);i?"xlink:"==r.substring(0,6)?e.setAttributeNS(E,r.substring(6),i):"xml:"==r.substring(0,4)?e.setAttributeNS(A,r.substring(4),i):e.setAttribute(r,i):e.removeAttribute(r)}}else"text"in t&&(e.nodeValue=t.text)}else e=n.doc.createElementNS(A,e);return e}function q(e,t){return"finite"==(t=s.prototype.toLowerCase.call(t))?isFinite(e):!("array"!=t||!(e instanceof Array||Array.isArray&&Array.isArray(e)))||("null"==t&&null===e||t==typeof e&&null!==e||"object"==t&&e===Object(e)||v.call(e).slice(8,-1).toLowerCase()==t)}function T(e,t,r){return function n(){var i=Array.prototype.slice.call(arguments,0),o=i.join("␀"),s=n.cache=n.cache||{},l=n.count=n.count||[];return s[a](o)?(function(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return e.push(e.splice(r,1)[0])}(l,o),r?r(s[o]):s[o]):(l.length>=1e3&&delete s[l.shift()],l.push(o),s[o]=e.apply(t,i),r?r(s[o]):s[o])}}function j(e){return e%360*p/180}r._.$=B,r._.id=F,r.format=(i=/\{([^\}]+)\}/g,o=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,function(e,t){return s(e).replace(i,function(e,r){return function(e,t,r){var n=r;return t.replace(o,function(e,t,r,i,o){t=t||i,n&&(t in n&&(n=n[t]),"function"==typeof n&&o&&(n=n()))}),n=(null==n||n==r?e:n)+""}(e,r,t)})}),r._.clone=function e(t){if("function"==typeof t||Object(t)!==t)return t;var r=new t.constructor;for(var n in t)t[a](n)&&(r[n]=e(t[n]));return r},r._.cacher=T,r.rad=j,r.deg=function(e){return 180*e/p%360},r.sin=function(e){return u.sin(r.rad(e))},r.tan=function(e){return u.tan(r.rad(e))},r.cos=function(e){return u.cos(r.rad(e))},r.asin=function(e){return r.deg(u.asin(e))},r.acos=function(e){return r.deg(u.acos(e))},r.atan=function(e){return r.deg(u.atan(e))},r.atan2=function(e){return r.deg(u.atan2(e))},r.angle=function e(t,r,n,i,o,a){if(null==o){var s=t-n,l=r-i;return s||l?(180+180*u.atan2(-l,-s)/p+360)%360:0}return e(t,r,o,a)-e(n,i,o,a)},r.len=function(e,t,n,i){return Math.sqrt(r.len2(e,t,n,i))},r.len2=function(e,t,r,n){return(e-r)*(e-r)+(t-n)*(t-n)},r.closestPoint=function(e,t,r){function n(e){var n=e.x-t,i=e.y-r;return n*n+i*i}for(var i,o,a,s,l=e.node,c=l.getTotalLength(),u=c/l.pathSegList.numberOfItems*.125,h=1/0,d=0;d<=c;d+=u)(s=n(a=l.getPointAtLength(d)))<h&&(i=a,o=d,h=s);for(u*=.5;u>.5;){var f,p,g,m,v,y;(g=o-u)>=0&&(v=n(f=l.getPointAtLength(g)))<h?(i=f,o=g,h=v):(m=o+u)<=c&&(y=n(p=l.getPointAtLength(m)))<h?(i=p,o=m,h=y):u*=.5}return i={x:i.x,y:i.y,length:o,distance:Math.sqrt(h)}},r.is=q,r.snapTo=function(e,t,r){if(r=q(r,"finite")?r:10,q(e,"array")){for(var n=e.length;n--;)if(f(e[n]-t)<=r)return e[n]}else{var i=t%(e=+e);if(i<r)return t-i;if(i>e-r)return t-i+e}return t},r.getRGB=T(function(e){if(!e||(e=s(e)).indexOf("-")+1)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:U};if("none"==e)return{r:-1,g:-1,b:-1,hex:"none",toString:U};if(!b[a](e.toLowerCase().substring(0,2))&&"#"!=e.charAt()&&(e=M(e)),!e)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:U};var t,n,i,o,f,p,g=e.match(y);return g?(g[2]&&(i=c(g[2].substring(5),16),n=c(g[2].substring(3,5),16),t=c(g[2].substring(1,3),16)),g[3]&&(i=c((f=g[3].charAt(3))+f,16),n=c((f=g[3].charAt(2))+f,16),t=c((f=g[3].charAt(1))+f,16)),g[4]&&(p=g[4].split(_),t=l(p[0]),"%"==p[0].slice(-1)&&(t*=2.55),n=l(p[1]),"%"==p[1].slice(-1)&&(n*=2.55),i=l(p[2]),"%"==p[2].slice(-1)&&(i*=2.55),"rgba"==g[1].toLowerCase().slice(0,4)&&(o=l(p[3])),p[3]&&"%"==p[3].slice(-1)&&(o/=100)),g[5]?(p=g[5].split(_),t=l(p[0]),"%"==p[0].slice(-1)&&(t/=100),n=l(p[1]),"%"==p[1].slice(-1)&&(n/=100),i=l(p[2]),"%"==p[2].slice(-1)&&(i/=100),("deg"==p[0].slice(-3)||"°"==p[0].slice(-1))&&(t/=360),"hsba"==g[1].toLowerCase().slice(0,4)&&(o=l(p[3])),p[3]&&"%"==p[3].slice(-1)&&(o/=100),r.hsb2rgb(t,n,i,o)):g[6]?(p=g[6].split(_),t=l(p[0]),"%"==p[0].slice(-1)&&(t/=100),n=l(p[1]),"%"==p[1].slice(-1)&&(n/=100),i=l(p[2]),"%"==p[2].slice(-1)&&(i/=100),("deg"==p[0].slice(-3)||"°"==p[0].slice(-1))&&(t/=360),"hsla"==g[1].toLowerCase().slice(0,4)&&(o=l(p[3])),p[3]&&"%"==p[3].slice(-1)&&(o/=100),r.hsl2rgb(t,n,i,o)):(t=d(u.round(t),255),n=d(u.round(n),255),i=d(u.round(i),255),o=d(h(o,0),1),(g={r:t,g:n,b:i,toString:U}).hex="#"+(16777216|i|n<<8|t<<16).toString(16).slice(1),g.opacity=q(o,"finite")?o:1,g)):{r:-1,g:-1,b:-1,hex:"none",error:1,toString:U}},r),r.hsb=T(function(e,t,n){return r.hsb2rgb(e,t,n).hex}),r.hsl=T(function(e,t,n){return r.hsl2rgb(e,t,n).hex}),r.rgb=T(function(e,t,r,n){if(q(n,"finite")){var i=u.round;return"rgba("+[i(e),i(t),i(r),+n.toFixed(2)]+")"}return"#"+(16777216|r|t<<8|e<<16).toString(16).slice(1)});var M=function(e){var t=n.doc.getElementsByTagName("head")[0]||n.doc.getElementsByTagName("svg")[0],r="rgb(255, 0, 0)";return(M=T(function(e){if("red"==e.toLowerCase())return r;t.style.color=r,t.style.color=e;var i=n.doc.defaultView.getComputedStyle(t,m).getPropertyValue("color");return i==r?null:i}))(e)},D=function(){return"hsb("+[this.h,this.s,this.b]+")"},N=function(){return"hsl("+[this.h,this.s,this.l]+")"},U=function(){return 1==this.opacity||null==this.opacity?this.hex:"rgba("+[this.r,this.g,this.b,this.opacity]+")"},I=function(e,t,n){if(null==t&&q(e,"object")&&"r"in e&&"g"in e&&"b"in e&&(n=e.b,t=e.g,e=e.r),null==t&&q(e,string)){var i=r.getRGB(e);e=i.r,t=i.g,n=i.b}return(e>1||t>1||n>1)&&(e/=255,t/=255,n/=255),[e,t,n]},P=function(e,t,n,i){var o={r:e=u.round(255*e),g:t=u.round(255*t),b:n=u.round(255*n),opacity:q(i,"finite")?i:1,hex:r.rgb(e,t,n),toString:U};return q(i,"finite")&&(o.opacity=i),o};r.color=function(e){var t;return q(e,"object")&&"h"in e&&"s"in e&&"b"in e?(t=r.hsb2rgb(e),e.r=t.r,e.g=t.g,e.b=t.b,e.opacity=1,e.hex=t.hex):q(e,"object")&&"h"in e&&"s"in e&&"l"in e?(t=r.hsl2rgb(e),e.r=t.r,e.g=t.g,e.b=t.b,e.opacity=1,e.hex=t.hex):(q(e,"string")&&(e=r.getRGB(e)),q(e,"object")&&"r"in e&&"g"in e&&"b"in e&&!("error"in e)?(t=r.rgb2hsl(e),e.h=t.h,e.s=t.s,e.l=t.l,t=r.rgb2hsb(e),e.v=t.b):((e={hex:"none"}).r=e.g=e.b=e.h=e.s=e.v=e.l=-1,e.error=1)),e.toString=U,e},r.hsb2rgb=function(e,t,r,n){var i,o,a,s,l;return q(e,"object")&&"h"in e&&"s"in e&&"b"in e&&(r=e.b,t=e.s,n=e.o,e=e.h),s=(l=r*t)*(1-f((e=(e*=360)%360/60)%2-1)),i=o=a=r-l,P(i+=[l,s,0,0,s,l][e=~~e],o+=[s,l,l,s,0,0][e],a+=[0,0,s,l,l,s][e],n)},r.hsl2rgb=function(e,t,r,n){var i,o,a,s,l;return q(e,"object")&&"h"in e&&"s"in e&&"l"in e&&(r=e.l,t=e.s,e=e.h),(e>1||t>1||r>1)&&(e/=360,t/=100,r/=100),e=(e*=360)%360/60,s=(l=2*t*(r<.5?r:1-r))*(1-f(e%2-1)),i=o=a=r-l/2,P(i+=[l,s,0,0,s,l][e=~~e],o+=[s,l,l,s,0,0][e],a+=[0,0,s,l,l,s][e],n)},r.rgb2hsb=function(e,t,r){var n,i;return e=(r=I(e,t,r))[0],t=r[1],r=r[2],{h:((0==(i=(n=h(e,t,r))-d(e,t,r))?null:n==e?(t-r)/i:n==t?(r-e)/i+2:(e-t)/i+4)+360)%6*60/360,s:0==i?0:i/n,b:n,toString:D}},r.rgb2hsl=function(e,t,r){var n,i,o,a;return e=(r=I(e,t,r))[0],t=r[1],r=r[2],n=((i=h(e,t,r))+(o=d(e,t,r)))/2,{h:((0==(a=i-o)?null:i==e?(t-r)/a:i==t?(r-e)/a+2:(e-t)/a+4)+360)%6*60/360,s:0==a?0:n<.5?a/(2*n):a/(2-2*n),l:n,toString:N}},r.parsePathString=function(e){if(!e)return null;var t=r.path(e);if(t.arr)return r.path.clone(t.arr);var n={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},i=[];return q(e,"array")&&q(e[0],"array")&&(i=r.path.clone(e)),i.length||s(e).replace(x,function(e,t,r){var o=[],a=t.toLowerCase();if(r.replace(C,function(e,t){t&&o.push(+t)}),"m"==a&&o.length>2&&(i.push([t].concat(o.splice(0,2))),a="l",t="m"==t?"l":"L"),"o"==a&&1==o.length&&i.push([t,o[0]]),"r"==a)i.push([t].concat(o));else for(;o.length>=n[a]&&(i.push([t].concat(o.splice(0,n[a]))),n[a]););}),i.toString=r.path.toString,t.arr=r.path.clone(i),i};var O=r.parseTransformString=function(e){if(!e)return null;var t=[];return q(e,"array")&&q(e[0],"array")&&(t=r.path.clone(e)),t.length||s(e).replace(w,function(e,r,n){var i=[];r.toLowerCase();n.replace(C,function(e,t){t&&i.push(+t)}),t.push([r].concat(i))}),t.toString=r.path.toString,t};r._.svgTransform2string=function(e){var t=[];return e=e.replace(/(?:^|\s)(\w+)\(([^)]+)\)/g,function(e,r,n){return n=n.split(/\s*,\s*|\s+/),"rotate"==r&&1==n.length&&n.push(0,0),"scale"==r&&(n.length>2?n=n.slice(0,2):2==n.length&&n.push(0,0),1==n.length&&n.push(n[0],0,0)),"skewX"==r?t.push(["m",1,0,u.tan(j(n[0])),1,0,0]):"skewY"==r?t.push(["m",1,u.tan(j(n[0])),0,1,0,0]):t.push([r.charAt(0)].concat(n)),e}),t},r._.rgTransform=/^[a-z][\s]*-?\.?\d/i,r._.transform2matrix=function(e,t){var n=O(e),i=new r.Matrix;if(n)for(var o=0,a=n.length;o<a;o++){var l,c,u,h,d,f=n[o],p=f.length,g=s(f[0]).toLowerCase(),m=f[0]!=g,v=m?i.invert():0;"t"==g&&2==p?i.translate(f[1],0):"t"==g&&3==p?m?(l=v.x(0,0),c=v.y(0,0),u=v.x(f[1],f[2]),h=v.y(f[1],f[2]),i.translate(u-l,h-c)):i.translate(f[1],f[2]):"r"==g?2==p?(d=d||t,i.rotate(f[1],d.x+d.width/2,d.y+d.height/2)):4==p&&(m?(u=v.x(f[2],f[3]),h=v.y(f[2],f[3]),i.rotate(f[1],u,h)):i.rotate(f[1],f[2],f[3])):"s"==g?2==p||3==p?(d=d||t,i.scale(f[1],f[p-1],d.x+d.width/2,d.y+d.height/2)):4==p?m?(u=v.x(f[2],f[3]),h=v.y(f[2],f[3]),i.scale(f[1],f[1],u,h)):i.scale(f[1],f[1],f[2],f[3]):5==p&&(m?(u=v.x(f[3],f[4]),h=v.y(f[3],f[4]),i.scale(f[1],f[2],u,h)):i.scale(f[1],f[2],f[3],f[4])):"m"==g&&7==p&&i.add(f[1],f[2],f[3],f[4],f[5],f[6])}return i},r._unit2px=function(e,t,r){var n=z(e).node,i={},o=n.querySelector(".svg---mgr");o||(B(o=B("rect"),{x:-9e9,y:-9e9,width:10,height:10,class:"svg---mgr",fill:"none"}),n.appendChild(o));function a(e){if(null==e)return m;if(e==+e)return e;B(o,{width:e});try{return o.getBBox().width}catch(e){return 0}}function s(e){if(null==e)return m;if(e==+e)return e;B(o,{height:e});try{return o.getBBox().height}catch(e){return 0}}function l(n,o){null==t?i[n]=o(e.attr(n)||0):n==t&&(i=o(null==r?e.attr(n)||0:r))}switch(e.type){case"rect":l("rx",a),l("ry",s);case"image":l("width",a),l("height",s);case"text":l("x",a),l("y",s);break;case"circle":l("cx",a),l("cy",s),l("r",a);break;case"ellipse":l("cx",a),l("cy",s),l("rx",a),l("ry",s);break;case"line":l("x1",a),l("x2",a),l("y1",s),l("y2",s);break;case"marker":l("refX",a),l("markerWidth",a),l("refY",s),l("markerHeight",s);break;case"radialGradient":l("fx",a),l("fy",s);break;case"tspan":l("dx",a),l("dy",s);break;default:l(t,a)}return n.removeChild(o),i};n.doc.contains||n.doc.compareDocumentPosition;function z(e){return e.node.ownerSVGElement&&Y(e.node.ownerSVGElement)||r.select("svg")}function R(e){q(e,"array")||(e=Array.prototype.slice.call(arguments,0));for(var t=0,r=0,n=this.node;this[t];)delete this[t++];for(t=0;t<e.length;t++)"set"==e[t].type?e[t].forEach(function(e){n.appendChild(e.node)}):n.appendChild(e[t].node);var i=n.childNodes;for(t=0;t<i.length;t++)this[r++]=Y(i[t]);return this}function G(e){if(e.snap in L)return L[e.snap];var t;try{t=e.ownerSVGElement}catch(e){}this.node=e,t&&(this.paper=new X(t)),this.type=e.tagName||e.nodeName;var r=this.id=F(this);if(this.anims={},this._={transform:[]},e.snap=r,L[r]=this,"g"==this.type&&(this.add=R),this.type in{g:1,mask:1,pattern:1,symbol:1})for(var n in X.prototype)X.prototype[a](n)&&(this[n]=X.prototype[n])}function H(e){this.node=e}function V(e,t){var r=B(e);return t.appendChild(r),Y(r)}function X(e,t){var r,i,o,s=X.prototype;if(e&&e.tagName&&"svg"==e.tagName.toLowerCase()){if(e.snap in L)return L[e.snap];var l=e.ownerDocument;for(var c in r=new G(e),i=e.getElementsByTagName("desc")[0],o=e.getElementsByTagName("defs")[0],i||((i=B("desc")).appendChild(l.createTextNode("Created with Snap")),r.node.appendChild(i)),o||(o=B("defs"),r.node.appendChild(o)),r.defs=o,s)s[a](c)&&(r[c]=s[c]);r.paper=r.root=r}else B((r=V("svg",n.doc.body)).node,{height:t,version:1.1,width:e,xmlns:A});return r}function Y(e){return e?e instanceof G||e instanceof H?e:e.tagName&&"svg"==e.tagName.toLowerCase()?new X(e):e.tagName&&"object"==e.tagName.toLowerCase()&&"image/svg+xml"==e.type?new X(e.contentDocument.getElementsByTagName("svg")[0]):new G(e):e}r._.getSomeDefs=function(e){var t=e.node.ownerSVGElement&&Y(e.node.ownerSVGElement)||e.node.parentNode&&Y(e.node.parentNode)||r.select("svg")||r(0,0),n=t.select("defs"),i=null!=n&&n.node;return i||(i=V("defs",t.node).node),i},r._.getSomeSVG=z,r.select=function(e){return e=s(e).replace(/([^\\]):/g,"$1\\:"),Y(n.doc.querySelector(e))},r.selectAll=function(e){for(var t=n.doc.querySelectorAll(e),i=(r.set||Array)(),o=0;o<t.length;o++)i.push(Y(t[o]));return i},setInterval(function(){for(var e in L)if(L[a](e)){var t=L[e],r=t.node;("svg"!=t.type&&!r.ownerSVGElement||"svg"==t.type&&(!r.parentNode||"ownerSVGElement"in r.parentNode&&!r.ownerSVGElement))&&delete L[e]}},1e4),G.prototype.attr=function(e,r){var n=this.node;if(!e){if(1!=n.nodeType)return{text:n.nodeValue};for(var i=n.attributes,o={},s=0,l=i.length;s<l;s++)o[i[s].nodeName]=i[s].nodeValue;return o}if(q(e,"string")){if(!(arguments.length>1))return t("snap.util.getattr."+e,this).firstDefined();var c={};c[e]=r,e=c}for(var u in e)e[a](u)&&t("snap.util.attr."+u,this,e[u]);return this},r.parse=function(e){var t=n.doc.createDocumentFragment(),r=!0,i=n.doc.createElement("div");if((e=s(e)).match(/^\s*<\s*svg(?:\s|>)/)||(e="<svg>"+e+"</svg>",r=!1),i.innerHTML=e,e=i.getElementsByTagName("svg")[0])if(r)t=e;else for(;e.firstChild;)t.appendChild(e.firstChild);return new H(t)},r.fragment=function(){for(var e=Array.prototype.slice.call(arguments,0),t=n.doc.createDocumentFragment(),i=0,o=e.length;i<o;i++){var a=e[i];a.node&&a.node.nodeType&&t.appendChild(a.node),a.nodeType&&t.appendChild(a),"string"==typeof a&&t.appendChild(r.parse(a).node)}return new H(t)},r._.make=V,r._.wrap=Y,X.prototype.el=function(e,t){var r=V(e,this.node);return t&&r.attr(t),r},G.prototype.children=function(){for(var e=[],t=this.node.childNodes,n=0,i=t.length;n<i;n++)e[n]=r(t[n]);return e},G.prototype.toJSON=function(){var e=[];return function e(t,r){for(var n=0,i=t.length;n<i;n++){var o={type:t[n].type,attr:t[n].attr()},a=t[n].children();r.push(o),a.length&&e(a,o.childNodes=[])}}([this],e),e[0]},t.on("snap.util.getattr",function(){var e=t.nt(),r=(e=e.substring(e.lastIndexOf(".")+1)).replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()});return $[a](r)?this.node.ownerDocument.defaultView.getComputedStyle(this.node,null).getPropertyValue(r):B(this.node,e)});var $={"alignment-baseline":0,"baseline-shift":0,clip:0,"clip-path":0,"clip-rule":0,color:0,"color-interpolation":0,"color-interpolation-filters":0,"color-profile":0,"color-rendering":0,cursor:0,direction:0,display:0,"dominant-baseline":0,"enable-background":0,fill:0,"fill-opacity":0,"fill-rule":0,filter:0,"flood-color":0,"flood-opacity":0,font:0,"font-family":0,"font-size":0,"font-size-adjust":0,"font-stretch":0,"font-style":0,"font-variant":0,"font-weight":0,"glyph-orientation-horizontal":0,"glyph-orientation-vertical":0,"image-rendering":0,kerning:0,"letter-spacing":0,"lighting-color":0,marker:0,"marker-end":0,"marker-mid":0,"marker-start":0,mask:0,opacity:0,overflow:0,"pointer-events":0,"shape-rendering":0,"stop-color":0,"stop-opacity":0,stroke:0,"stroke-dasharray":0,"stroke-dashoffset":0,"stroke-linecap":0,"stroke-linejoin":0,"stroke-miterlimit":0,"stroke-opacity":0,"stroke-width":0,"text-anchor":0,"text-decoration":0,"text-rendering":0,"unicode-bidi":0,visibility:0,"word-spacing":0,"writing-mode":0};t.on("snap.util.attr",function(e){var r=t.nt(),n={};n[r=r.substring(r.lastIndexOf(".")+1)]=e;var i=r.replace(/-(\w)/gi,function(e,t){return t.toUpperCase()}),o=r.replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()});$[a](o)?this.node.style[i]=null==e?m:e:B(this.node,n)}),X.prototype,r.ajax=function(e,r,n,i){var o=new XMLHttpRequest,a=F();if(o){if(q(r,"function"))i=n,n=r,r=null;else if(q(r,"object")){var s=[];for(var l in r)r.hasOwnProperty(l)&&s.push(encodeURIComponent(l)+"="+encodeURIComponent(r[l]));r=s.join("&")}return o.open(r?"POST":"GET",e,!0),r&&(o.setRequestHeader("X-Requested-With","XMLHttpRequest"),o.setRequestHeader("Content-type","application/x-www-form-urlencoded")),n&&(t.once("snap.ajax."+a+".0",n),t.once("snap.ajax."+a+".200",n),t.once("snap.ajax."+a+".304",n)),o.onreadystatechange=function(){4==o.readyState&&t("snap.ajax."+a+"."+o.status,i,o)},4==o.readyState?o:(o.send(r),o)}},r.load=function(e,t,n){r.ajax(e,function(e){var i=r.parse(e.responseText);n?t.call(n,i):t(i)})};return r.getElementByPoint=function(e,t){this.canvas;var r,i,o,a,s,l,c,u=n.doc.elementFromPoint(e,t);if(n.win.opera&&"svg"==u.tagName){var h=(i=(r=u).getBoundingClientRect(),o=r.ownerDocument,a=o.body,s=o.documentElement,l=s.clientTop||a.clientTop||0,c=s.clientLeft||a.clientLeft||0,{y:i.top+(g.win.pageYOffset||s.scrollTop||a.scrollTop)-l,x:i.left+(g.win.pageXOffset||s.scrollLeft||a.scrollLeft)-c}),d=u.createSVGRect();d.x=e-h.x,d.y=t-h.y,d.width=d.height=1;var f=u.getIntersectionList(d,null);f.length&&(u=f[f.length-1])}return u?Y(u):null},r.plugin=function(e){e(r,G,X,n,H)},n.win.Snap=r,r}(e||this);return n.plugin(function(r,n,i,o,a){var s=n.prototype,l=r.is,c=String,u=r._unit2px,h=r._.$,d=r._.make,f=r._.getSomeDefs,p=r._.wrap;s.getBBox=function(e){if("tspan"==this.type)return r._.box(this.node.getClientRects().item(0));if(!r.Matrix||!r.path)return this.node.getBBox();var t=this,n=new r.Matrix;if(t.removed)return r._.box();for(;"use"==t.type;)if(e||(n=n.add(t.transform().localMatrix.translate(t.attr("x")||0,t.attr("y")||0))),t.original)t=t.original;else{var i=t.attr("xlink:href");t=t.original=t.node.ownerDocument.getElementById(i.substring(i.indexOf("#")+1))}var o=t._,a=r.path.get[t.type]||r.path.get.deflt;try{return e?(o.bboxwt=a?r.path.getBBox(t.realPath=a(t)):r._.box(t.node.getBBox()),r._.box(o.bboxwt)):(t.realPath=a(t),t.matrix=t.transform().localMatrix,o.bbox=r.path.getBBox(r.path.map(t.realPath,n.add(t.matrix))),r._.box(o.bbox))}catch(e){return r._.box()}};var g=function(){return this.string};function m(e,t){if(null==t){var n=!0;if(!(t="linearGradient"==e.type||"radialGradient"==e.type?e.node.getAttribute("gradientTransform"):"pattern"==e.type?e.node.getAttribute("patternTransform"):e.node.getAttribute("transform")))return new r.Matrix;t=r._.svgTransform2string(t)}else t=r._.rgTransform.test(t)?c(t).replace(/\.{3}|\u2026/g,e._.transform||""):r._.svgTransform2string(t),l(t,"array")&&(t=r.path?r.path.toString.call(t):c(t)),e._.transform=t;var i=r._.transform2matrix(t,e.getBBox(1));if(n)return i;e.matrix=i}s.transform=function(e){var t=this._;if(null==e){for(var n,i=this,o=new r.Matrix(this.node.getCTM()),a=m(this),s=[a],l=new r.Matrix,u=a.toTransformString(),d=c(a)==c(this.matrix)?c(t.transform):u;"svg"!=i.type&&(i=i.parent());)s.push(m(i));for(n=s.length;n--;)l.add(s[n]);return{string:d,globalMatrix:o,totalMatrix:l,localMatrix:a,diffMatrix:o.clone().add(a.invert()),global:o.toTransformString(),total:l.toTransformString(),local:u,toString:g}}return e instanceof r.Matrix?(this.matrix=e,this._.transform=e.toTransformString()):m(this,e),this.node&&("linearGradient"==this.type||"radialGradient"==this.type?h(this.node,{gradientTransform:this.matrix}):"pattern"==this.type?h(this.node,{patternTransform:this.matrix}):h(this.node,{transform:this.matrix})),this},s.parent=function(){return p(this.node.parentNode)},s.append=s.add=function(e){if(e){if("set"==e.type){var t=this;return e.forEach(function(e){t.add(e)}),this}e=p(e),this.node.appendChild(e.node),e.paper=this.paper}return this},s.appendTo=function(e){return e&&(e=p(e)).append(this),this},s.prepend=function(e){if(e){if("set"==e.type){var t,r=this;return e.forEach(function(e){t?t.after(e):r.prepend(e),t=e}),this}var n=(e=p(e)).parent();this.node.insertBefore(e.node,this.node.firstChild),this.add&&this.add(),e.paper=this.paper,this.parent()&&this.parent().add(),n&&n.add()}return this},s.prependTo=function(e){return(e=p(e)).prepend(this),this},s.before=function(e){if("set"==e.type){var t=this;return e.forEach(function(e){var r=e.parent();t.node.parentNode.insertBefore(e.node,t.node),r&&r.add()}),this.parent().add(),this}var r=(e=p(e)).parent();return this.node.parentNode.insertBefore(e.node,this.node),this.parent()&&this.parent().add(),r&&r.add(),e.paper=this.paper,this},s.after=function(e){var t=(e=p(e)).parent();return this.node.nextSibling?this.node.parentNode.insertBefore(e.node,this.node.nextSibling):this.node.parentNode.appendChild(e.node),this.parent()&&this.parent().add(),t&&t.add(),e.paper=this.paper,this},s.insertBefore=function(e){e=p(e);var t=this.parent();return e.node.parentNode.insertBefore(this.node,e.node),this.paper=e.paper,t&&t.add(),e.parent()&&e.parent().add(),this},s.insertAfter=function(e){e=p(e);var t=this.parent();return e.node.parentNode.insertBefore(this.node,e.node.nextSibling),this.paper=e.paper,t&&t.add(),e.parent()&&e.parent().add(),this},s.remove=function(){var e=this.parent();return this.node.parentNode&&this.node.parentNode.removeChild(this.node),delete this.paper,this.removed=!0,e&&e.add(),this},s.select=function(e){return p(this.node.querySelector(e))},s.selectAll=function(e){for(var t=this.node.querySelectorAll(e),n=(r.set||Array)(),i=0;i<t.length;i++)n.push(p(t[i]));return n},s.asPX=function(e,t){return null==t&&(t=this.attr(e)),+u(this,e,t)},s.use=function(){var e,t=this.node.id;return t||(t=this.id,h(this.node,{id:t})),e="linearGradient"==this.type||"radialGradient"==this.type||"pattern"==this.type?d(this.type,this.node.parentNode):d("use",this.node.parentNode),h(e.node,{"xlink:href":"#"+t}),e.original=this,e},s.clone=function(){var e=p(this.node.cloneNode(!0));return h(e.node,"id")&&h(e.node,{id:e.id}),function(e){var t,n=e.selectAll("*"),i=/^\s*url\(("|'|)(.*)\1\)\s*$/,o=[],a={};function s(e,t){var n=h(e.node,t);(n=(n=n&&n.match(i))&&n[2])&&"#"==n.charAt()&&(n=n.substring(1))&&(a[n]=(a[n]||[]).concat(function(n){var i={};i[t]=r.url(n),h(e.node,i)}))}function l(e){var t=h(e.node,"xlink:href");t&&"#"==t.charAt()&&(t=t.substring(1))&&(a[t]=(a[t]||[]).concat(function(t){e.attr("xlink:href","#"+t)}))}for(var c=0,u=n.length;c<u;c++){s(t=n[c],"fill"),s(t,"stroke"),s(t,"filter"),s(t,"mask"),s(t,"clip-path"),l(t);var d=h(t.node,"id");d&&(h(t.node,{id:t.id}),o.push({old:d,id:t.id}))}for(c=0,u=o.length;c<u;c++){var f=a[o[c].old];if(f)for(var p=0,g=f.length;p<g;p++)f[p](o[c].id)}}(e),e.insertAfter(this),e},s.toDefs=function(){return f(this).appendChild(this.node),this},s.pattern=s.toPattern=function(e,t,r,n){var i=d("pattern",f(this));return null==e&&(e=this.getBBox()),l(e,"object")&&"x"in e&&(t=e.y,r=e.width,n=e.height,e=e.x),h(i.node,{x:e,y:t,width:r,height:n,patternUnits:"userSpaceOnUse",id:i.id,viewBox:[e,t,r,n].join(" ")}),i.node.appendChild(this.node),i},s.marker=function(e,t,r,n,i,o){var a=d("marker",f(this));return null==e&&(e=this.getBBox()),l(e,"object")&&"x"in e&&(t=e.y,r=e.width,n=e.height,i=e.refX||e.cx,o=e.refY||e.cy,e=e.x),h(a.node,{viewBox:[e,t,r,n].join(" "),markerWidth:r,markerHeight:n,orient:"auto",refX:i||0,refY:o||0,id:a.id}),a.node.appendChild(this.node),a};var v={};function y(e){return function(){var t=e?"<"+this.type:"",r=this.node.attributes,n=this.node.childNodes;if(e)for(var i=0,o=r.length;i<o;i++)t+=" "+r[i].name+'="'+r[i].value.replace(/"/g,'\\"')+'"';if(n.length){for(e&&(t+=">"),i=0,o=n.length;i<o;i++)3==n[i].nodeType?t+=n[i].nodeValue:1==n[i].nodeType&&(t+=p(n[i]).toString());e&&(t+="</"+this.type+">")}else e&&(t+="/>");return t}}s.data=function(e,n){var i=v[this.id]=v[this.id]||{};if(0==arguments.length)return t("snap.data.get."+this.id,this,i,null),i;if(1==arguments.length){if(r.is(e,"object")){for(var o in e)e.hasOwnProperty(o)&&this.data(o,e[o]);return this}return t("snap.data.get."+this.id,this,i[e],e),i[e]}return i[e]=n,t("snap.data.set."+this.id,this,n,e),this},s.removeData=function(e){return null==e?v[this.id]={}:v[this.id]&&delete v[this.id][e],this},s.outerSVG=s.toString=y(1),s.innerSVG=y(),s.toDataURL=function(){if(e&&e.btoa){var t=this.getBBox(),n=r.format('<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="{width}" height="{height}" viewBox="{x} {y} {width} {height}">{contents}</svg>',{x:+t.x.toFixed(3),y:+t.y.toFixed(3),width:+t.width.toFixed(3),height:+t.height.toFixed(3),contents:this.outerSVG()});return"data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(n)))}},a.prototype.select=s.select,a.prototype.selectAll=s.selectAll}),n.plugin(function(e,n,i,o,a){var s=n.prototype,l=e.is,c=String,u="hasOwnProperty";function h(e,t,r){return function(n){var i=n.slice(e,t);return 1==i.length&&(i=i[0]),r?r(i):i}}var d=function(e,t,n,i){"function"!=typeof n||n.length||(i=n,n=r.linear),this.attr=e,this.dur=t,n&&(this.easing=n),i&&(this.callback=i)};e._.Animation=d,e.animation=function(e,t,r,n){return new d(e,t,r,n)},s.inAnim=function(){var e=[];for(var t in this.anims)this.anims[u](t)&&function(t){e.push({anim:new d(t._attrs,t.dur,t.easing,t._callback),mina:t,curStatus:t.status(),status:function(e){return t.status(e)},stop:function(){t.stop()}})}(this.anims[t]);return e},e.animate=function(e,n,i,o,a,s){"function"!=typeof a||a.length||(s=a,a=r.linear);var l=r.time(),c=r(e,n,l,l+o,r.time,i,a);return s&&t.once("mina.finish."+c.id,s),c},s.stop=function(){for(var e=this.inAnim(),t=0,r=e.length;t<r;t++)e[t].stop();return this},s.animate=function(e,n,i,o){"function"!=typeof i||i.length||(o=i,i=r.linear),e instanceof d&&(o=e.callback,i=e.easing,n=e.dur,e=e.attr);var a,s,f,p,g=[],m=[],v={},y=this;for(var _ in e)if(e[u](_)){y.equal?(a=(p=y.equal(_,c(e[_]))).from,s=p.to,f=p.f):(a=+y.attr(_),s=+e[_]);var b=l(a,"array")?a.length:1;v[_]=h(g.length,g.length+b,f),g=g.concat(a),m=m.concat(s)}var x=r.time(),w=r(g,m,x,x+n,r.time,function(e){var t={};for(var r in v)v[u](r)&&(t[r]=v[r](e));y.attr(t)},i);return y.anims[w.id]=w,w._attrs=e,w._callback=o,t("snap.animcreated."+y.id,w),t.once("mina.finish."+w.id,function(){t.off("mina.*."+w.id),delete y.anims[w.id],o&&o.call(y)}),t.once("mina.stop."+w.id,function(){t.off("mina.*."+w.id),delete y.anims[w.id]}),y}}),n.plugin(function(e,t,r,n,i){var o=Object.prototype.toString,a=String,s=Math;function l(e,t,r,n,i,a){if(null==t&&"[object SVGMatrix]"==o.call(e))return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.e=e.e,void(this.f=e.f);null!=e?(this.a=+e,this.b=+t,this.c=+r,this.d=+n,this.e=+i,this.f=+a):(this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0)}!function(t){function r(e){return e[0]*e[0]+e[1]*e[1]}function n(e){var t=s.sqrt(r(e));e[0]&&(e[0]/=t),e[1]&&(e[1]/=t)}t.add=function(e,t,r,n,i,o){if(e&&e instanceof l)return this.add(e.a,e.b,e.c,e.d,e.e,e.f);var a=e*this.a+t*this.c,s=e*this.b+t*this.d;return this.e+=i*this.a+o*this.c,this.f+=i*this.b+o*this.d,this.c=r*this.a+n*this.c,this.d=r*this.b+n*this.d,this.a=a,this.b=s,this},l.prototype.multLeft=function(e,t,r,n,i,o){if(e&&e instanceof l)return this.multLeft(e.a,e.b,e.c,e.d,e.e,e.f);var a=e*this.a+r*this.b,s=e*this.c+r*this.d,c=e*this.e+r*this.f+i;return this.b=t*this.a+n*this.b,this.d=t*this.c+n*this.d,this.f=t*this.e+n*this.f+o,this.a=a,this.c=s,this.e=c,this},t.invert=function(){var e=this,t=e.a*e.d-e.b*e.c;return new l(e.d/t,-e.b/t,-e.c/t,e.a/t,(e.c*e.f-e.d*e.e)/t,(e.b*e.e-e.a*e.f)/t)},t.clone=function(){return new l(this.a,this.b,this.c,this.d,this.e,this.f)},t.translate=function(e,t){return this.e+=e*this.a+t*this.c,this.f+=e*this.b+t*this.d,this},t.scale=function(e,t,r,n){return null==t&&(t=e),(r||n)&&this.translate(r,n),this.a*=e,this.b*=e,this.c*=t,this.d*=t,(r||n)&&this.translate(-r,-n),this},t.rotate=function(t,r,n){t=e.rad(t),r=r||0,n=n||0;var i=+s.cos(t).toFixed(9),o=+s.sin(t).toFixed(9);return this.add(i,o,-o,i,r,n),this.add(1,0,0,1,-r,-n)},t.skewX=function(e){return this.skew(e,0)},t.skewY=function(e){return this.skew(0,e)},t.skew=function(t,r){t=t||0,r=r||0,t=e.rad(t),r=e.rad(r);var n=s.tan(t).toFixed(9),i=s.tan(r).toFixed(9);return this.add(1,i,n,1,0,0)},t.x=function(e,t){return e*this.a+t*this.c+this.e},t.y=function(e,t){return e*this.b+t*this.d+this.f},t.get=function(e){return+this[a.fromCharCode(97+e)].toFixed(4)},t.toString=function(){return"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")"},t.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)]},t.determinant=function(){return this.a*this.d-this.b*this.c},t.split=function(){var t={};t.dx=this.e,t.dy=this.f;var i=[[this.a,this.b],[this.c,this.d]];t.scalex=s.sqrt(r(i[0])),n(i[0]),t.shear=i[0][0]*i[1][0]+i[0][1]*i[1][1],i[1]=[i[1][0]-i[0][0]*t.shear,i[1][1]-i[0][1]*t.shear],t.scaley=s.sqrt(r(i[1])),n(i[1]),t.shear/=t.scaley,this.determinant()<0&&(t.scalex=-t.scalex);var o=i[0][1],a=i[1][1];return a<0?(t.rotate=e.deg(s.acos(a)),o<0&&(t.rotate=360-t.rotate)):t.rotate=e.deg(s.asin(o)),t.isSimple=!(+t.shear.toFixed(9)||t.scalex.toFixed(9)!=t.scaley.toFixed(9)&&t.rotate),t.isSuperSimple=!+t.shear.toFixed(9)&&t.scalex.toFixed(9)==t.scaley.toFixed(9)&&!t.rotate,t.noRotation=!+t.shear.toFixed(9)&&!t.rotate,t},t.toTransformString=function(e){var t=e||this.split();return+t.shear.toFixed(9)?"m"+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)]:(t.scalex=+t.scalex.toFixed(4),t.scaley=+t.scaley.toFixed(4),t.rotate=+t.rotate.toFixed(4),(t.dx||t.dy?"t"+[+t.dx.toFixed(4),+t.dy.toFixed(4)]:"")+(t.rotate?"r"+[+t.rotate.toFixed(4),0,0]:"")+(1!=t.scalex||1!=t.scaley?"s"+[t.scalex,t.scaley,0,0]:""))}}(l.prototype),e.Matrix=l,e.matrix=function(e,t,r,n,i,o){return new l(e,t,r,n,i,o)}}),n.plugin(function(e,r,n,i,o){var a,s=e._.make,l=e._.wrap,c=e.is,u=e._.getSomeDefs,h=/^url\((['"]?)([^)]+)\1\)$/,d=e._.$,f=e.url,p=String,g=e._.separator,m="";function v(n){return function(i){if(t.stop(),i instanceof o&&1==i.node.childNodes.length&&("radialGradient"==i.node.firstChild.tagName||"linearGradient"==i.node.firstChild.tagName||"pattern"==i.node.firstChild.tagName)&&(i=i.node.firstChild,u(this).appendChild(i),i=l(i)),i instanceof r)if("radialGradient"==i.type||"linearGradient"==i.type||"pattern"==i.type){i.node.id||d(i.node,{id:i.id});var a=f(i.node.id)}else a=i.attr(n);else if((a=e.color(i)).error){var s=e(u(this).ownerSVGElement).gradient(i);s?(s.node.id||d(s.node,{id:s.id}),a=f(s.node.id)):a=i}else a=p(a);var c={};c[n]=a,d(this.node,c),this.node.style[n]=m}}e.deurl=function(e){var t=String(e).match(h);return t?t[2]:e},t.on("snap.util.attr.mask",function(e){if(e instanceof r||e instanceof o){if(t.stop(),e instanceof o&&1==e.node.childNodes.length&&(e=e.node.firstChild,u(this).appendChild(e),e=l(e)),"mask"==e.type)var n=e;else(n=s("mask",u(this))).node.appendChild(e.node);!n.node.id&&d(n.node,{id:n.id}),d(this.node,{mask:f(n.id)})}}),a=function(e){if(e instanceof r||e instanceof o){t.stop();for(var n,i=e.node;i;){if("clipPath"===i.nodeName){n=new r(i);break}if("svg"===i.nodeName){n=void 0;break}i=i.parentNode}n||((n=s("clipPath",u(this))).node.appendChild(e.node),!n.node.id&&d(n.node,{id:n.id})),d(this.node,{"clip-path":f(n.node.id||n.id)})}},t.on("snap.util.attr.clip",a),t.on("snap.util.attr.clip-path",a),t.on("snap.util.attr.clipPath",a),t.on("snap.util.attr.fill",v("fill")),t.on("snap.util.attr.stroke",v("stroke"));var y=/^([lr])(?:\(([^)]*)\))?(.*)$/i;function _(e){t.stop(),e==+e&&(e+="px"),this.node.style.fontSize=e}function b(){return t.stop(),this.node.style.fontSize}t.on("snap.util.grad.parse",function(e){var t=(e=p(e)).match(y);if(!t)return null;var r=t[1],n=t[2],i=t[3];1==(n=n.split(/\s*,\s*/).map(function(e){return+e==e?+e:e})).length&&0==n[0]&&(n=[]);var o=(i=(i=i.split("-")).map(function(e){var t={color:(e=e.split(":"))[0]};return e[1]&&(t.offset=parseFloat(e[1])),t})).length,a=0,s=0;function l(e,t){for(var r=(t-a)/(e-s),n=s;n<e;n++)i[n].offset=+(+a+r*(n-s)).toFixed(2);s=e,a=t}o--;for(var c=0;c<o;c++)"offset"in i[c]&&l(c,i[c].offset);return i[o].offset=i[o].offset||100,l(o,i[o].offset),{type:r,params:n,stops:i}}),t.on("snap.util.attr.d",function(r){t.stop(),c(r,"array")&&c(r[0],"array")&&(r=e.path.toString.call(r)),(r=p(r)).match(/[ruo]/i)&&(r=e.path.toAbsolute(r)),d(this.node,{d:r})})(-1),t.on("snap.util.attr.#text",function(e){t.stop(),e=p(e);for(var r=i.doc.createTextNode(e);this.node.firstChild;)this.node.removeChild(this.node.firstChild);this.node.appendChild(r)})(-1),t.on("snap.util.attr.path",function(e){t.stop(),this.attr({d:e})})(-1),t.on("snap.util.attr.class",function(e){t.stop(),this.node.className.baseVal=e})(-1),t.on("snap.util.attr.viewBox",function(e){var r;r=c(e,"object")&&"x"in e?[e.x,e.y,e.width,e.height].join(" "):c(e,"array")?e.join(" "):e,d(this.node,{viewBox:r}),t.stop()})(-1),t.on("snap.util.attr.transform",function(e){this.transform(e),t.stop()})(-1),t.on("snap.util.attr.r",function(e){"rect"==this.type&&(t.stop(),d(this.node,{rx:e,ry:e}))})(-1),t.on("snap.util.attr.textpath",function(e){if(t.stop(),"text"==this.type){var n,i,o;if(!e&&this.textPath){for(i=this.textPath;i.node.firstChild;)this.node.appendChild(i.node.firstChild);return i.remove(),void delete this.textPath}if(c(e,"string")){var a=u(this),s=l(a.parentNode).path(e);a.appendChild(s.node),n=s.id,s.attr({id:n})}else(e=l(e))instanceof r&&((n=e.attr("id"))||(n=e.id,e.attr({id:n})));if(n)if(i=this.textPath,o=this.node,i)i.attr({"xlink:href":"#"+n});else{for(i=d("textPath",{"xlink:href":"#"+n});o.firstChild;)i.appendChild(o.firstChild);o.appendChild(i),this.textPath=l(i)}}})(-1),t.on("snap.util.attr.text",function(e){if("text"==this.type){for(var r=this.node,n=function(e){var t=d("tspan");if(c(e,"array"))for(var r=0;r<e.length;r++)t.appendChild(n(e[r]));else t.appendChild(i.doc.createTextNode(e));return t.normalize&&t.normalize(),t};r.firstChild;)r.removeChild(r.firstChild);for(var o=n(e);o.firstChild;)r.appendChild(o.firstChild)}t.stop()})(-1),t.on("snap.util.attr.fontSize",_)(-1),t.on("snap.util.attr.font-size",_)(-1),t.on("snap.util.getattr.transform",function(){return t.stop(),this.transform()})(-1),t.on("snap.util.getattr.textpath",function(){return t.stop(),this.textPath})(-1),function(){function r(r){return function(){t.stop();var n=i.doc.defaultView.getComputedStyle(this.node,null).getPropertyValue("marker-"+r);return"none"==n?n:e(i.doc.getElementById(n.match(h)[1]))}}function n(e){return function(r){t.stop();var n="marker"+e.charAt(0).toUpperCase()+e.substring(1);if(""!=r&&r){if("marker"==r.type){var i=r.node.id;return i||d(r.node,{id:r.id}),void(this.node.style[n]=f(i))}}else this.node.style[n]="none"}}t.on("snap.util.getattr.marker-end",r("end"))(-1),t.on("snap.util.getattr.markerEnd",r("end"))(-1),t.on("snap.util.getattr.marker-start",r("start"))(-1),t.on("snap.util.getattr.markerStart",r("start"))(-1),t.on("snap.util.getattr.marker-mid",r("mid"))(-1),t.on("snap.util.getattr.markerMid",r("mid"))(-1),t.on("snap.util.attr.marker-end",n("end"))(-1),t.on("snap.util.attr.markerEnd",n("end"))(-1),t.on("snap.util.attr.marker-start",n("start"))(-1),t.on("snap.util.attr.markerStart",n("start"))(-1),t.on("snap.util.attr.marker-mid",n("mid"))(-1),t.on("snap.util.attr.markerMid",n("mid"))(-1)}(),t.on("snap.util.getattr.r",function(){if("rect"==this.type&&d(this.node,"rx")==d(this.node,"ry"))return t.stop(),d(this.node,"rx")})(-1),t.on("snap.util.getattr.text",function(){if("text"==this.type||"tspan"==this.type){t.stop();var e=function e(t){for(var r=[],n=t.childNodes,i=0,o=n.length;i<o;i++){var a=n[i];3==a.nodeType&&r.push(a.nodeValue),"tspan"==a.tagName&&(1==a.childNodes.length&&3==a.firstChild.nodeType?r.push(a.firstChild.nodeValue):r.push(e(a)))}return r}(this.node);return 1==e.length?e[0]:e}})(-1),t.on("snap.util.getattr.#text",function(){return this.node.textContent})(-1),t.on("snap.util.getattr.fill",function(r){if(!r){t.stop();var n=t("snap.util.getattr.fill",this,!0).firstDefined();return e(e.deurl(n))||n}})(-1),t.on("snap.util.getattr.stroke",function(r){if(!r){t.stop();var n=t("snap.util.getattr.stroke",this,!0).firstDefined();return e(e.deurl(n))||n}})(-1),t.on("snap.util.getattr.viewBox",function(){t.stop();var r=d(this.node,"viewBox");return r?(r=r.split(g),e._.box(+r[0],+r[1],+r[2],+r[3])):void 0})(-1),t.on("snap.util.getattr.points",function(){var e=d(this.node,"points");return t.stop(),e?e.split(g):void 0})(-1),t.on("snap.util.getattr.path",function(){var e=d(this.node,"d");return t.stop(),e})(-1),t.on("snap.util.getattr.class",function(){return this.node.className.baseVal})(-1),t.on("snap.util.getattr.fontSize",b)(-1),t.on("snap.util.getattr.font-size",b)(-1)}),n.plugin(function(e,t,r,n,i){var o=/\S+/g,a=String,s=t.prototype;s.addClass=function(e){var t,r,n,i=a(e||"").match(o)||[],s=this.node,l=s.className.baseVal,c=l.match(o)||[];if(i.length){for(t=0;r=i[t++];)~c.indexOf(r)||c.push(r);l!=(n=c.join(" "))&&(s.className.baseVal=n)}return this},s.removeClass=function(e){var t,r,n,i,s=a(e||"").match(o)||[],l=this.node,c=l.className.baseVal,u=c.match(o)||[];if(u.length){for(t=0;n=s[t++];)~(r=u.indexOf(n))&&u.splice(r,1);c!=(i=u.join(" "))&&(l.className.baseVal=i)}return this},s.hasClass=function(e){return!!~(this.node.className.baseVal.match(o)||[]).indexOf(e)},s.toggleClass=function(e,t){if(null!=t)return t?this.addClass(e):this.removeClass(e);var r,n,i,a,s=(e||"").match(o)||[],l=this.node,c=l.className.baseVal,u=c.match(o)||[];for(r=0;i=s[r++];)~(n=u.indexOf(i))?u.splice(n,1):u.push(i);return c!=(a=u.join(" "))&&(l.className.baseVal=a),this}}),n.plugin(function(e,r,n,i,o){var a={"+":function(e,t){return e+t},"-":function(e,t){return e-t},"/":function(e,t){return e/t},"*":function(e,t){return e*t}},s=String,l=/[a-z]+$/i,c=/^\s*([+\-\/*])\s*=\s*([\d.eE+\-]+)\s*([^\d\s]+)?\s*$/;function u(e){return e}t.on("snap.util.attr",function(e){var r=s(e).match(c);if(r){var n=t.nt(),i=n.substring(n.lastIndexOf(".")+1),o=this.attr(i),u={};t.stop();var h=r[3]||"",d=o.match(l),f=a[r[1]];if(d&&d==h?e=f(parseFloat(o),+r[2]):(o=this.asPX(i),e=f(this.asPX(i),this.asPX(i,r[2]+h))),isNaN(o)||isNaN(e))return;u[i]=e,this.attr(u)}})(-10),t.on("snap.util.equal",function(e,r){var n=s(this.attr(e)||""),i=s(r).match(c);if(i){t.stop();var o=i[3]||"",h=n.match(l),d=a[i[1]];return h&&h==o?{from:parseFloat(n),to:d(parseFloat(n),+i[2]),f:function(e){return function(t){return+t.toFixed(3)+e}}(h)}:{from:n=this.asPX(e),to:d(n,this.asPX(e,i[2]+o)),f:u}}})(-10)}),n.plugin(function(r,n,i,o,a){var s=i.prototype,l=r.is;s.rect=function(e,t,r,n,i,o){var a;return null==o&&(o=i),l(e,"object")&&"[object Object]"==e?a=e:null!=e&&(a={x:e,y:t,width:r,height:n},null!=i&&(a.rx=i,a.ry=o)),this.el("rect",a)},s.circle=function(e,t,r){var n;return l(e,"object")&&"[object Object]"==e?n=e:null!=e&&(n={cx:e,cy:t,r:r}),this.el("circle",n)};var c=function(){function e(){this.parentNode.removeChild(this)}return function(t,r){var n=o.doc.createElement("img"),i=o.doc.body;n.style.cssText="position:absolute;left:-9999em;top:-9999em",n.onload=function(){r.call(n),n.onload=n.onerror=null,i.removeChild(n)},n.onerror=e,i.appendChild(n),n.src=t}}();s.image=function(e,t,n,i,o){var a=this.el("image");if(l(e,"object")&&"src"in e)a.attr(e);else if(null!=e){var s={"xlink:href":e,preserveAspectRatio:"none"};null!=t&&null!=n&&(s.x=t,s.y=n),null!=i&&null!=o?(s.width=i,s.height=o):c(e,function(){r._.$(a.node,{width:this.offsetWidth,height:this.offsetHeight})}),r._.$(a.node,s)}return a},s.ellipse=function(e,t,r,n){var i;return l(e,"object")&&"[object Object]"==e?i=e:null!=e&&(i={cx:e,cy:t,rx:r,ry:n}),this.el("ellipse",i)},s.path=function(e){var t;return l(e,"object")&&!l(e,"array")?t=e:e&&(t={d:e}),this.el("path",t)},s.group=s.g=function(e){var t=this.el("g");return 1==arguments.length&&e&&!e.type?t.attr(e):arguments.length&&t.add(Array.prototype.slice.call(arguments,0)),t},s.svg=function(e,t,r,n,i,o,a,s){var c={};return l(e,"object")&&null==t?c=e:(null!=e&&(c.x=e),null!=t&&(c.y=t),null!=r&&(c.width=r),null!=n&&(c.height=n),null!=i&&null!=o&&null!=a&&null!=s&&(c.viewBox=[i,o,a,s])),this.el("svg",c)},s.mask=function(e){var t=this.el("mask");return 1==arguments.length&&e&&!e.type?t.attr(e):arguments.length&&t.add(Array.prototype.slice.call(arguments,0)),t},s.ptrn=function(e,t,r,n,i,o,a,s){if(l(e,"object"))var c=e;else c={patternUnits:"userSpaceOnUse"},e&&(c.x=e),t&&(c.y=t),null!=r&&(c.width=r),null!=n&&(c.height=n),c.viewBox=null!=i&&null!=o&&null!=a&&null!=s?[i,o,a,s]:[e||0,t||0,r||0,n||0];return this.el("pattern",c)},s.use=function(e){return null!=e?(e instanceof n&&(e.attr("id")||e.attr({id:r._.id(e)}),e=e.attr("id")),"#"==String(e).charAt()&&(e=e.substring(1)),this.el("use",{"xlink:href":"#"+e})):n.prototype.use.call(this)},s.symbol=function(e,t,r,n){var i={};return null!=e&&null!=t&&null!=r&&null!=n&&(i.viewBox=[e,t,r,n]),this.el("symbol",i)},s.text=function(e,t,r){var n={};return l(e,"object")?n=e:null!=e&&(n={x:e,y:t,text:r||""}),this.el("text",n)},s.line=function(e,t,r,n){var i={};return l(e,"object")?i=e:null!=e&&(i={x1:e,x2:r,y1:t,y2:n}),this.el("line",i)},s.polyline=function(e){arguments.length>1&&(e=Array.prototype.slice.call(arguments,0));var t={};return l(e,"object")&&!l(e,"array")?t=e:null!=e&&(t={points:e}),this.el("polyline",t)},s.polygon=function(e){arguments.length>1&&(e=Array.prototype.slice.call(arguments,0));var t={};return l(e,"object")&&!l(e,"array")?t=e:null!=e&&(t={points:e}),this.el("polygon",t)},function(){var n=r._.$;function i(){return this.selectAll("stop")}function o(e,t){var i=n("stop"),o={offset:+t+"%"};e=r.color(e),o["stop-color"]=e.hex,e.opacity<1&&(o["stop-opacity"]=e.opacity),n(i,o);for(var a,s=this.stops(),l=0;l<s.length;l++){if(parseFloat(s[l].attr("offset"))>t){this.node.insertBefore(i,s[l].node),a=!0;break}}return a||this.node.appendChild(i),this}function a(){if("linearGradient"==this.type){var e=n(this.node,"x1")||0,t=n(this.node,"x2")||1,i=n(this.node,"y1")||0,o=n(this.node,"y2")||0;return r._.box(e,i,math.abs(t-e),math.abs(o-i))}var a=this.node.cx||.5,s=this.node.cy||.5,l=this.node.r||0;return r._.box(a-l,s-l,2*l,2*l)}function l(e){var n=e,i=this.stops();if("string"==typeof e&&(n=t("snap.util.grad.parse",null,"l(0,0,0,1)"+e).firstDefined().stops),r.is(n,"array")){for(var o=0;o<i.length;o++)if(n[o]){var a=r.color(n[o].color),s={offset:n[o].offset+"%"};s["stop-color"]=a.hex,a.opacity<1&&(s["stop-opacity"]=a.opacity),i[o].attr(s)}else i[o].remove();for(o=i.length;o<n.length;o++)this.addStop(n[o].color,n[o].offset);return this}}function c(e,t,s,c,u){var h=r._.make("linearGradient",e);return h.stops=i,h.addStop=o,h.getBBox=a,h.setStops=l,null!=t&&n(h.node,{x1:t,y1:s,x2:c,y2:u}),h}function u(e,t,s,l,c,u){var h=r._.make("radialGradient",e);return h.stops=i,h.addStop=o,h.getBBox=a,null!=t&&n(h.node,{cx:t,cy:s,r:l}),null!=c&&null!=u&&n(h.node,{fx:c,fy:u}),h}s.gradient=function(e){return function(e,r){var i,o=t("snap.util.grad.parse",null,r).firstDefined();if(!o)return null;o.params.unshift(e),i="l"==o.type.toLowerCase()?c.apply(0,o.params):u.apply(0,o.params),o.type!=o.type.toLowerCase()&&n(i.node,{gradientUnits:"userSpaceOnUse"});for(var a=o.stops,s=a.length,l=0;l<s;l++){var h=a[l];i.addStop(h.color,h.offset)}return i}(this.defs,e)},s.gradientLinear=function(e,t,r,n){return c(this.defs,e,t,r,n)},s.gradientRadial=function(e,t,r,n,i){return u(this.defs,e,t,r,n,i)},s.toString=function(){var e,t=this.node.ownerDocument,n=t.createDocumentFragment(),i=t.createElement("div"),o=this.node.cloneNode(!0);return n.appendChild(i),i.appendChild(o),r._.$(o,{xmlns:"http://www.w3.org/2000/svg"}),e=i.innerHTML,n.removeChild(n.firstChild),e},s.toDataURL=function(){if(e&&e.btoa)return"data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(this)))},s.clear=function(){for(var e,t=this.node.firstChild;t;)e=t.nextSibling,"defs"!=t.tagName?t.parentNode.removeChild(t):s.clear.call({node:t}),t=e}}()}),n.plugin(function(e,t,r,n){var i=t.prototype,o=e.is,a=e._.clone,s="hasOwnProperty",l=/,?([a-z]),?/gi,c=parseFloat,u=Math,h=u.PI,d=u.min,f=u.max,p=u.pow,g=u.abs;function m(e){var t=m.ps=m.ps||{};return t[e]?t[e].sleep=100:t[e]={sleep:100},setTimeout(function(){for(var r in t)t[s](r)&&r!=e&&(t[r].sleep--,!t[r].sleep&&delete t[r])}),t[e]}function v(e,t,r,n){return null==e&&(e=t=r=n=0),null==t&&(t=e.y,r=e.width,n=e.height,e=e.x),{x:e,y:t,width:r,w:r,height:n,h:n,x2:e+r,y2:t+n,cx:e+r/2,cy:t+n/2,r1:u.min(r,n)/2,r2:u.max(r,n)/2,r0:u.sqrt(r*r+n*n)/2,path:D(e,t,r,n),vb:[e,t,r,n].join(" ")}}function y(){return this.join(",").replace(l,"$1")}function _(e){var t=a(e);return t.toString=y,t}function b(e,t,r,n,i,o,a,s,l){return null==l?B(e,t,r,n,i,o,a,s):S(e,t,r,n,i,o,a,s,function(e,t,r,n,i,o,a,s,l){if(l<0||B(e,t,r,n,i,o,a,s)<l)return;var c,u=.5,h=1-u;c=B(e,t,r,n,i,o,a,s,h);for(;g(c-l)>.01;)u/=2,c=B(e,t,r,n,i,o,a,s,h+=(c<l?1:-1)*u);return h}(e,t,r,n,i,o,a,s,l))}function x(r,n){function i(e){return+(+e).toFixed(3)}return e._.cacher(function(e,o,a){e instanceof t&&(e=e.attr("d"));for(var s,l,c,u,h,d="",f={},p=0,g=0,m=(e=G(e)).length;g<m;g++){if("M"==(c=e[g])[0])s=+c[1],l=+c[2];else{if(p+(u=b(s,l,c[1],c[2],c[3],c[4],c[5],c[6]))>o){if(n&&!f.start){if(d+=["C"+i((h=b(s,l,c[1],c[2],c[3],c[4],c[5],c[6],o-p)).start.x),i(h.start.y),i(h.m.x),i(h.m.y),i(h.x),i(h.y)],a)return d;f.start=d,d=["M"+i(h.x),i(h.y)+"C"+i(h.n.x),i(h.n.y),i(h.end.x),i(h.end.y),i(c[5]),i(c[6])].join(),p+=u,s=+c[5],l=+c[6];continue}if(!r&&!n)return h=b(s,l,c[1],c[2],c[3],c[4],c[5],c[6],o-p)}p+=u,s=+c[5],l=+c[6]}d+=c.shift()+c}return f.end=d,h=r?p:n?f:S(s,l,c[0],c[1],c[2],c[3],c[4],c[5],1)},null,e._.clone)}var w=x(1),C=x(),k=x(0,1);function S(e,t,r,n,i,o,a,s,l){var c=1-l,d=p(c,3),f=p(c,2),g=l*l,m=g*l,v=e+2*l*(r-e)+g*(i-2*r+e),y=t+2*l*(n-t)+g*(o-2*n+t),_=r+2*l*(i-r)+g*(a-2*i+r),b=n+2*l*(o-n)+g*(s-2*o+n);return{x:d*e+3*f*l*r+3*c*l*l*i+m*a,y:d*t+3*f*l*n+3*c*l*l*o+m*s,m:{x:v,y:y},n:{x:_,y:b},start:{x:c*e+l*r,y:c*t+l*n},end:{x:c*i+l*a,y:c*o+l*s},alpha:90-180*u.atan2(v-_,y-b)/h}}function F(t,r,n,i,o,a,s,l){e.is(t,"array")||(t=[t,r,n,i,o,a,s,l]);var c=R.apply(null,t);return v(c.min.x,c.min.y,c.max.x-c.min.x,c.max.y-c.min.y)}function E(e,t,r){return t>=e.x&&t<=e.x+e.width&&r>=e.y&&r<=e.y+e.height}function A(e,t){return e=v(e),E(t=v(t),e.x,e.y)||E(t,e.x2,e.y)||E(t,e.x,e.y2)||E(t,e.x2,e.y2)||E(e,t.x,t.y)||E(e,t.x2,t.y)||E(e,t.x,t.y2)||E(e,t.x2,t.y2)||(e.x<t.x2&&e.x>t.x||t.x<e.x2&&t.x>e.x)&&(e.y<t.y2&&e.y>t.y||t.y<e.y2&&t.y>e.y)}function L(e,t,r,n,i){return e*(e*(-3*t+9*r-9*n+3*i)+6*t-12*r+6*n)-3*t+3*r}function B(e,t,r,n,i,o,a,s,l){null==l&&(l=1);for(var c=(l=l>1?1:l<0?0:l)/2,h=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],d=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],f=0,p=0;p<12;p++){var g=c*h[p]+c,m=L(g,e,r,i,a),v=L(g,t,n,o,s),y=m*m+v*v;f+=d[p]*u.sqrt(y)}return c*f}function q(e,t,r,n,i,o,a,s){if(!(f(e,r)<d(i,a)||d(e,r)>f(i,a)||f(t,n)<d(o,s)||d(t,n)>f(o,s))){var l=(e-r)*(o-s)-(t-n)*(i-a);if(l){var c=((e*n-t*r)*(i-a)-(e-r)*(i*s-o*a))/l,u=((e*n-t*r)*(o-s)-(t-n)*(i*s-o*a))/l,h=+c.toFixed(2),p=+u.toFixed(2);if(!(h<+d(e,r).toFixed(2)||h>+f(e,r).toFixed(2)||h<+d(i,a).toFixed(2)||h>+f(i,a).toFixed(2)||p<+d(t,n).toFixed(2)||p>+f(t,n).toFixed(2)||p<+d(o,s).toFixed(2)||p>+f(o,s).toFixed(2)))return{x:c,y:u}}}}function T(e,t,r){if(!A(F(e),F(t)))return r?0:[];for(var n=~~(B.apply(0,e)/8),i=~~(B.apply(0,t)/8),o=[],a=[],s={},l=r?0:[],c=0;c<n+1;c++){var u=S.apply(0,e.concat(c/n));o.push({x:u.x,y:u.y,t:c/n})}for(c=0;c<i+1;c++)u=S.apply(0,t.concat(c/i)),a.push({x:u.x,y:u.y,t:c/i});for(c=0;c<n;c++)for(var h=0;h<i;h++){var d=o[c],f=o[c+1],p=a[h],m=a[h+1],v=g(f.x-d.x)<.001?"y":"x",y=g(m.x-p.x)<.001?"y":"x",_=q(d.x,d.y,f.x,f.y,p.x,p.y,m.x,m.y);if(_){if(s[_.x.toFixed(4)]==_.y.toFixed(4))continue;s[_.x.toFixed(4)]=_.y.toFixed(4);var b=d.t+g((_[v]-d[v])/(f[v]-d[v]))*(f.t-d.t),x=p.t+g((_[y]-p[y])/(m[y]-p[y]))*(m.t-p.t);b>=0&&b<=1&&x>=0&&x<=1&&(r?l++:l.push({x:_.x,y:_.y,t1:b,t2:x}))}}return l}function j(e,t,r){e=G(e),t=G(t);for(var n,i,o,a,s,l,c,u,h,d,f=r?0:[],p=0,g=e.length;p<g;p++){var m=e[p];if("M"==m[0])n=s=m[1],i=l=m[2];else{"C"==m[0]?(n=(h=[n,i].concat(m.slice(1)))[6],i=h[7]):(h=[n,i,n,i,s,l,s,l],n=s,i=l);for(var v=0,y=t.length;v<y;v++){var _=t[v];if("M"==_[0])o=c=_[1],a=u=_[2];else{"C"==_[0]?(o=(d=[o,a].concat(_.slice(1)))[6],a=d[7]):(d=[o,a,o,a,c,u,c,u],o=c,a=u);var b=T(h,d,r);if(r)f+=b;else{for(var x=0,w=b.length;x<w;x++)b[x].segment1=p,b[x].segment2=v,b[x].bez1=h,b[x].bez2=d;f=f.concat(b)}}}}}return f}function M(e){var t=m(e);if(t.bbox)return a(t.bbox);if(!e)return v();for(var r,n=0,i=0,o=[],s=[],l=0,c=(e=G(e)).length;l<c;l++)if("M"==(r=e[l])[0])n=r[1],i=r[2],o.push(n),s.push(i);else{var u=R(n,i,r[1],r[2],r[3],r[4],r[5],r[6]);o=o.concat(u.min.x,u.max.x),s=s.concat(u.min.y,u.max.y),n=r[5],i=r[6]}var h=d.apply(0,o),p=d.apply(0,s),g=v(h,p,f.apply(0,o)-h,f.apply(0,s)-p);return t.bbox=a(g),g}function D(e,t,r,n,i){if(i)return[["M",+e+ +i,t],["l",r-2*i,0],["a",i,i,0,0,1,i,i],["l",0,n-2*i],["a",i,i,0,0,1,-i,i],["l",2*i-r,0],["a",i,i,0,0,1,-i,-i],["l",0,2*i-n],["a",i,i,0,0,1,i,-i],["z"]];var o=[["M",e,t],["l",r,0],["l",0,n],["l",-r,0],["z"]];return o.toString=y,o}function N(e,t,r,n,i){if(null==i&&null==n&&(n=r),e=+e,t=+t,r=+r,n=+n,null!=i)var o=Math.PI/180,a=e+r*Math.cos(-n*o),s=e+r*Math.cos(-i*o),l=[["M",a,t+r*Math.sin(-n*o)],["A",r,r,0,+(i-n>180),0,s,t+r*Math.sin(-i*o)]];else l=[["M",e,t],["m",0,-n],["a",r,n,0,1,1,0,2*n],["a",r,n,0,1,1,0,-2*n],["z"]];return l.toString=y,l}var U=e._unit2px,I={path:function(e){return e.attr("path")},circle:function(e){var t=U(e);return N(t.cx,t.cy,t.r)},ellipse:function(e){var t=U(e);return N(t.cx||0,t.cy||0,t.rx,t.ry)},rect:function(e){var t=U(e);return D(t.x||0,t.y||0,t.width,t.height,t.rx,t.ry)},image:function(e){var t=U(e);return D(t.x||0,t.y||0,t.width,t.height)},line:function(e){return"M"+[e.attr("x1")||0,e.attr("y1")||0,e.attr("x2"),e.attr("y2")]},polyline:function(e){return"M"+e.attr("points")},polygon:function(e){return"M"+e.attr("points")+"z"},deflt:function(e){var t=e.node.getBBox();return D(t.x,t.y,t.width,t.height)}};function P(t){var r=m(t);if(r.abs)return _(r.abs);if(o(t,"array")&&o(t&&t[0],"array")||(t=e.parsePathString(t)),!t||!t.length)return[["M",0,0]];var n,i=[],a=0,s=0,l=0,c=0,u=0;"M"==t[0][0]&&(l=a=+t[0][1],c=s=+t[0][2],u++,i[0]=["M",a,s]);for(var h,d,f=3==t.length&&"M"==t[0][0]&&"R"==t[1][0].toUpperCase()&&"Z"==t[2][0].toUpperCase(),p=u,g=t.length;p<g;p++){if(i.push(h=[]),(n=(d=t[p])[0])!=n.toUpperCase())switch(h[0]=n.toUpperCase(),h[0]){case"A":h[1]=d[1],h[2]=d[2],h[3]=d[3],h[4]=d[4],h[5]=d[5],h[6]=+d[6]+a,h[7]=+d[7]+s;break;case"V":h[1]=+d[1]+s;break;case"H":h[1]=+d[1]+a;break;case"R":for(var v=[a,s].concat(d.slice(1)),b=2,x=v.length;b<x;b++)v[b]=+v[b]+a,v[++b]=+v[b]+s;i.pop(),i=i.concat(H(v,f));break;case"O":i.pop(),(v=N(a,s,d[1],d[2])).push(v[0]),i=i.concat(v);break;case"U":i.pop(),i=i.concat(N(a,s,d[1],d[2],d[3])),h=["U"].concat(i[i.length-1].slice(-2));break;case"M":l=+d[1]+a,c=+d[2]+s;default:for(b=1,x=d.length;b<x;b++)h[b]=+d[b]+(b%2?a:s)}else if("R"==n)v=[a,s].concat(d.slice(1)),i.pop(),i=i.concat(H(v,f)),h=["R"].concat(d.slice(-2));else if("O"==n)i.pop(),(v=N(a,s,d[1],d[2])).push(v[0]),i=i.concat(v);else if("U"==n)i.pop(),i=i.concat(N(a,s,d[1],d[2],d[3])),h=["U"].concat(i[i.length-1].slice(-2));else for(var w=0,C=d.length;w<C;w++)h[w]=d[w];if("O"!=(n=n.toUpperCase()))switch(h[0]){case"Z":a=+l,s=+c;break;case"H":a=h[1];break;case"V":s=h[1];break;case"M":l=h[h.length-2],c=h[h.length-1];default:a=h[h.length-2],s=h[h.length-1]}}return i.toString=y,r.abs=_(i),i}function O(e,t,r,n){return[e,t,r,n,r,n]}function z(e,t,r,n,i,o){return[1/3*e+2/3*r,1/3*t+2/3*n,1/3*i+2/3*r,1/3*o+2/3*n,i,o]}function R(e,t,r,n,i,o,a,s){for(var l,c,h,p,m,v,y,_,b=[],x=[[],[]],w=0;w<2;++w)if(0==w?(c=6*e-12*r+6*i,l=-3*e+9*r-9*i+3*a,h=3*r-3*e):(c=6*t-12*n+6*o,l=-3*t+9*n-9*o+3*s,h=3*n-3*t),g(l)<1e-12){if(g(c)<1e-12)continue;0<(p=-h/c)&&p<1&&b.push(p)}else y=c*c-4*h*l,_=u.sqrt(y),y<0||(0<(m=(-c+_)/(2*l))&&m<1&&b.push(m),0<(v=(-c-_)/(2*l))&&v<1&&b.push(v));for(var C,k=b.length,S=k;k--;)C=1-(p=b[k]),x[0][k]=C*C*C*e+3*C*C*p*r+3*C*p*p*i+p*p*p*a,x[1][k]=C*C*C*t+3*C*C*p*n+3*C*p*p*o+p*p*p*s;return x[0][S]=e,x[1][S]=t,x[0][S+1]=a,x[1][S+1]=s,x[0].length=x[1].length=S+2,{min:{x:d.apply(0,x[0]),y:d.apply(0,x[1])},max:{x:f.apply(0,x[0]),y:f.apply(0,x[1])}}}function G(t,r){var n=!r&&m(t);if(!r&&n.curve)return _(n.curve);for(var i=P(t),o=r&&P(r),a={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},s={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},l=function(t,r,n){var i,o;if(!t)return["C",r.x,r.y,r.x,r.y,r.x,r.y];switch(!(t[0]in{T:1,Q:1})&&(r.qx=r.qy=null),t[0]){case"M":r.X=t[1],r.Y=t[2];break;case"A":t=["C"].concat(function t(r,n,i,o,a,s,l,c,d,f){var p,m=120*h/180,v=h/180*(+a||0),y=[],_=e._.cacher(function(e,t,r){return{x:e*u.cos(r)-t*u.sin(r),y:e*u.sin(r)+t*u.cos(r)}});if(!i||!o)return[r,n,c,d,c,d];if(f)A=f[0],L=f[1],F=f[2],E=f[3];else{r=(p=_(r,n,-v)).x,n=p.y,c=(p=_(c,d,-v)).x,d=p.y,u.cos(h/180*a),u.sin(h/180*a);var b=(r-c)/2,x=(n-d)/2,w=b*b/(i*i)+x*x/(o*o);w>1&&(i*=w=u.sqrt(w),o*=w);var C=i*i,k=o*o,S=(s==l?-1:1)*u.sqrt(g((C*k-C*x*x-k*b*b)/(C*x*x+k*b*b))),F=S*i*x/o+(r+c)/2,E=S*-o*b/i+(n+d)/2,A=u.asin(((n-E)/o).toFixed(9)),L=u.asin(((d-E)/o).toFixed(9));A=r<F?h-A:A,L=c<F?h-L:L,A<0&&(A=2*h+A),L<0&&(L=2*h+L),l&&A>L&&(A-=2*h),!l&&L>A&&(L-=2*h)}var B=L-A;if(g(B)>m){var q=L,T=c,j=d;L=A+m*(l&&L>A?1:-1),y=t(c=F+i*u.cos(L),d=E+o*u.sin(L),i,o,a,0,l,T,j,[L,q,F,E])}B=L-A;var M=u.cos(A),D=u.sin(A),N=u.cos(L),U=u.sin(L),I=u.tan(B/4),P=4/3*i*I,O=4/3*o*I,z=[r,n],R=[r+P*D,n-O*M],G=[c+P*U,d-O*N],H=[c,d];if(R[0]=2*z[0]-R[0],R[1]=2*z[1]-R[1],f)return[R,G,H].concat(y);for(var V=[],X=0,Y=(y=[R,G,H].concat(y).join().split(",")).length;X<Y;X++)V[X]=X%2?_(y[X-1],y[X],v).y:_(y[X],y[X+1],v).x;return V}.apply(0,[r.x,r.y].concat(t.slice(1))));break;case"S":"C"==n||"S"==n?(i=2*r.x-r.bx,o=2*r.y-r.by):(i=r.x,o=r.y),t=["C",i,o].concat(t.slice(1));break;case"T":"Q"==n||"T"==n?(r.qx=2*r.x-r.qx,r.qy=2*r.y-r.qy):(r.qx=r.x,r.qy=r.y),t=["C"].concat(z(r.x,r.y,r.qx,r.qy,t[1],t[2]));break;case"Q":r.qx=t[1],r.qy=t[2],t=["C"].concat(z(r.x,r.y,t[1],t[2],t[3],t[4]));break;case"L":t=["C"].concat(O(r.x,r.y,t[1],t[2]));break;case"H":t=["C"].concat(O(r.x,r.y,t[1],r.y));break;case"V":t=["C"].concat(O(r.x,r.y,r.x,t[1]));break;case"Z":t=["C"].concat(O(r.x,r.y,r.X,r.Y))}return t},d=function(e,t){if(e[t].length>7){e[t].shift();for(var r=e[t];r.length;)v[t]="A",o&&(y[t]="A"),e.splice(t++,0,["C"].concat(r.splice(0,6)));e.splice(t,1),C=f(i.length,o&&o.length||0)}},p=function(e,t,r,n,a){e&&t&&"M"==e[a][0]&&"M"!=t[a][0]&&(t.splice(a,0,["M",n.x,n.y]),r.bx=0,r.by=0,r.x=e[a][1],r.y=e[a][2],C=f(i.length,o&&o.length||0))},v=[],y=[],b="",x="",w=0,C=f(i.length,o&&o.length||0);w<C;w++){i[w]&&(b=i[w][0]),"C"!=b&&(v[w]=b,w&&(x=v[w-1])),i[w]=l(i[w],a,x),"A"!=v[w]&&"C"==b&&(v[w]="C"),d(i,w),o&&(o[w]&&(b=o[w][0]),"C"!=b&&(y[w]=b,w&&(x=y[w-1])),o[w]=l(o[w],s,x),"A"!=y[w]&&"C"==b&&(y[w]="C"),d(o,w)),p(i,o,a,s,w),p(o,i,s,a,w);var k=i[w],S=o&&o[w],F=k.length,E=o&&S.length;a.x=k[F-2],a.y=k[F-1],a.bx=c(k[F-4])||a.x,a.by=c(k[F-3])||a.y,s.bx=o&&(c(S[E-4])||s.x),s.by=o&&(c(S[E-3])||s.y),s.x=o&&S[E-2],s.y=o&&S[E-1]}return o||(n.curve=_(i)),o?[i,o]:i}function H(e,t){for(var r=[],n=0,i=e.length;i-2*!t>n;n+=2){var o=[{x:+e[n-2],y:+e[n-1]},{x:+e[n],y:+e[n+1]},{x:+e[n+2],y:+e[n+3]},{x:+e[n+4],y:+e[n+5]}];t?n?i-4==n?o[3]={x:+e[0],y:+e[1]}:i-2==n&&(o[2]={x:+e[0],y:+e[1]},o[3]={x:+e[2],y:+e[3]}):o[0]={x:+e[i-2],y:+e[i-1]}:i-4==n?o[3]=o[2]:n||(o[0]={x:+e[n],y:+e[n+1]}),r.push(["C",(-o[0].x+6*o[1].x+o[2].x)/6,(-o[0].y+6*o[1].y+o[2].y)/6,(o[1].x+6*o[2].x-o[3].x)/6,(o[1].y+6*o[2].y-o[3].y)/6,o[2].x,o[2].y])}return r}e.path=m,e.path.getTotalLength=w,e.path.getPointAtLength=C,e.path.getSubpath=function(e,t,r){if(this.getTotalLength(e)-r<1e-6)return k(e,t).end;var n=k(e,r,1);return t?k(n,t).end:n},i.getTotalLength=function(){if(this.node.getTotalLength)return this.node.getTotalLength()},i.getPointAtLength=function(e){return C(this.attr("d"),e)},i.getSubpath=function(t,r){return e.path.getSubpath(this.attr("d"),t,r)},e._.box=v,e.path.findDotsAtSegment=S,e.path.bezierBBox=F,e.path.isPointInsideBBox=E,e.closest=function(t,r,n,i){for(var o=100,a=v(t-o/2,r-o/2,o,o),s=[],l=n[0].hasOwnProperty("x")?function(e){return{x:n[e].x,y:n[e].y}}:function(e){return{x:n[e],y:i[e]}},c=0;o<=1e6&&!c;){for(var u=0,h=n.length;u<h;u++){var d=l(u);if(E(a,d.x,d.y)){c++,s.push(d);break}}c||(a=v(t-(o*=2)/2,r-o/2,o,o))}if(1e6!=o){var f,p=1/0;for(u=0,h=s.length;u<h;u++){var g=e.len(t,r,s[u].x,s[u].y);p>g&&(p=g,s[u].len=g,f=s[u])}return f}},e.path.isBBoxIntersect=A,e.path.intersection=function(e,t){return j(e,t)},e.path.intersectionNumber=function(e,t){return j(e,t,1)},e.path.isPointInside=function(e,t,r){var n=M(e);return E(n,t,r)&&j(e,[["M",t,r],["H",n.x2+10]],1)%2==1},e.path.getBBox=M,e.path.get=I,e.path.toRelative=function(t){var r=m(t),n=String.prototype.toLowerCase;if(r.rel)return _(r.rel);e.is(t,"array")&&e.is(t&&t[0],"array")||(t=e.parsePathString(t));var i=[],o=0,a=0,s=0,l=0,c=0;"M"==t[0][0]&&(s=o=t[0][1],l=a=t[0][2],c++,i.push(["M",o,a]));for(var u=c,h=t.length;u<h;u++){var d=i[u]=[],f=t[u];if(f[0]!=n.call(f[0]))switch(d[0]=n.call(f[0]),d[0]){case"a":d[1]=f[1],d[2]=f[2],d[3]=f[3],d[4]=f[4],d[5]=f[5],d[6]=+(f[6]-o).toFixed(3),d[7]=+(f[7]-a).toFixed(3);break;case"v":d[1]=+(f[1]-a).toFixed(3);break;case"m":s=f[1],l=f[2];default:for(var p=1,g=f.length;p<g;p++)d[p]=+(f[p]-(p%2?o:a)).toFixed(3)}else{d=i[u]=[],"m"==f[0]&&(s=f[1]+o,l=f[2]+a);for(var v=0,b=f.length;v<b;v++)i[u][v]=f[v]}var x=i[u].length;switch(i[u][0]){case"z":o=s,a=l;break;case"h":o+=+i[u][x-1];break;case"v":a+=+i[u][x-1];break;default:o+=+i[u][x-2],a+=+i[u][x-1]}}return i.toString=y,r.rel=_(i),i},e.path.toAbsolute=P,e.path.toCubic=G,e.path.map=function(e,t){if(!t)return e;var r,n,i,o,a,s,l;for(i=0,a=(e=G(e)).length;i<a;i++)for(o=1,s=(l=e[i]).length;o<s;o+=2)r=t.x(l[o],l[o+1]),n=t.y(l[o],l[o+1]),l[o]=r,l[o+1]=n;return e},e.path.toString=y,e.path.clone=_}),n.plugin(function(e,n,i,o){var a=Math.max,s=Math.min,l=function(e){if(this.items=[],this.bindings={},this.length=0,this.type="set",e)for(var t=0,r=e.length;t<r;t++)e[t]&&(this[this.items.length]=this.items[this.items.length]=e[t],this.length++)},c=l.prototype;c.push=function(){for(var e,t,r=0,n=arguments.length;r<n;r++)(e=arguments[r])&&(this[t=this.items.length]=this.items[t]=e,this.length++);return this},c.pop=function(){return this.length&&delete this[this.length--],this.items.pop()},c.forEach=function(e,t){for(var r=0,n=this.items.length;r<n;r++)if(!1===e.call(t,this.items[r],r))return this;return this},c.animate=function(n,i,o,a){"function"!=typeof o||o.length||(a=o,o=r.linear),n instanceof e._.Animation&&(a=n.callback,o=n.easing,i=o.dur,n=n.attr);var s=arguments;if(e.is(n,"array")&&e.is(s[s.length-1],"array"))var l=!0;var c,u=function(){c?this.b=c:c=this.b},h=0,d=this,f=a&&function(){++h==d.length&&a.call(this)};return this.forEach(function(e,r){t.once("snap.animcreated."+e.id,u),l?s[r]&&e.animate.apply(e,s[r]):e.animate(n,i,o,f)})},c.remove=function(){for(;this.length;)this.pop().remove();return this},c.bind=function(e,t,r){var n={};if("function"==typeof t)this.bindings[e]=t;else{var i=r||e;this.bindings[e]=function(e){n[i]=e,t.attr(n)}}return this},c.attr=function(e){var t={};for(var r in e)this.bindings[r]?this.bindings[r](e[r]):t[r]=e[r];for(var n=0,i=this.items.length;n<i;n++)this.items[n].attr(t);return this},c.clear=function(){for(;this.length;)this.pop()},c.splice=function(e,t,r){e=e<0?a(this.length+e,0):e,t=a(0,s(this.length-e,t));var n,i=[],o=[],c=[];for(n=2;n<arguments.length;n++)c.push(arguments[n]);for(n=0;n<t;n++)o.push(this[e+n]);for(;n<this.length-e;n++)i.push(this[e+n]);var u=c.length;for(n=0;n<u+i.length;n++)this.items[e+n]=this[e+n]=n<u?c[n]:i[n-u];for(n=this.items.length=this.length-=t-u;this[n];)delete this[n++];return new l(o)},c.exclude=function(e){for(var t=0,r=this.length;t<r;t++)if(this[t]==e)return this.splice(t,1),!0;return!1},c.insertAfter=function(e){for(var t=this.items.length;t--;)this.items[t].insertAfter(e);return this},c.getBBox=function(){for(var e=[],t=[],r=[],n=[],i=this.items.length;i--;)if(!this.items[i].removed){var o=this.items[i].getBBox();e.push(o.x),t.push(o.y),r.push(o.x+o.width),n.push(o.y+o.height)}return{x:e=s.apply(0,e),y:t=s.apply(0,t),x2:r=a.apply(0,r),y2:n=a.apply(0,n),width:r-e,height:n-t,cx:e+(r-e)/2,cy:t+(n-t)/2}},c.clone=function(e){e=new l;for(var t=0,r=this.items.length;t<r;t++)e.push(this.items[t].clone());return e},c.toString=function(){return"Snap‘s set"},c.type="set",e.Set=l,e.set=function(){var e=new l;return arguments.length&&e.push.apply(e,Array.prototype.slice.call(arguments,0)),e}}),n.plugin(function(e,r,n,i){var o={},a=/[%a-z]+$/i,s=String;function l(e){var t=e[0];switch(t.toLowerCase()){case"t":return[t,0,0];case"m":return[t,1,0,0,1,0,0];case"r":return 4==e.length?[t,0,e[2],e[3]]:[t,0];case"s":return 5==e.length?[t,1,1,e[3],e[4]]:3==e.length?[t,1,1]:[t,1]}}function c(e){return e}function u(e){return e.join(" ")}function h(t){return e.rgb(t[0],t[1],t[2],t[3])}function d(e){var t,r,n,i,o,a,s=0,l=[];for(t=0,r=e.length;t<r;t++){for(o="[",a=['"'+e[t][0]+'"'],n=1,i=e[t].length;n<i;n++)a[n]="val["+s+++"]";o+=a+"]",l[t]=o}return Function("val","return Snap.path.toString.call(["+l+"])")}function f(e){for(var t=[],r=0,n=e.length;r<n;r++)for(var i=1,o=e[r].length;i<o;i++)t.push(e[r][i]);return t}function p(e){return isFinite(e)}o.stroke=o.fill="colour",r.prototype.equal=function(e,r){return t("snap.util.equal",this,e,r).firstDefined()},t.on("snap.util.equal",function(t,r){var n,i,g=s(this.attr(t)||""),m=this;if("colour"==o[t])return n=e.color(g),i=e.color(r),{from:[n.r,n.g,n.b,n.opacity],to:[i.r,i.g,i.b,i.opacity],f:h};if("viewBox"==t)return{from:n=this.attr(t).vb.split(" ").map(Number),to:i=r.split(" ").map(Number),f:u};if("transform"==t||"gradientTransform"==t||"patternTransform"==t)return"string"==typeof r&&(r=s(r).replace(/\.{3}|\u2026/g,g)),function(t,r,n){t=t||new e.Matrix,r=r||new e.Matrix,t=e.parseTransformString(t.toTransformString())||[],r=e.parseTransformString(r.toTransformString())||[];for(var i,o,a,s,c=Math.max(t.length,r.length),u=[],h=[],p=0;p<c;p++){if(a=t[p]||l(r[p]),s=r[p]||l(a),a[0]!=s[0]||"r"==a[0].toLowerCase()&&(a[2]!=s[2]||a[3]!=s[3])||"s"==a[0].toLowerCase()&&(a[3]!=s[3]||a[4]!=s[4])){t=e._.transform2matrix(t,n()),r=e._.transform2matrix(r,n()),u=[["m",t.a,t.b,t.c,t.d,t.e,t.f]],h=[["m",r.a,r.b,r.c,r.d,r.e,r.f]];break}for(u[p]=[],h[p]=[],i=0,o=Math.max(a.length,s.length);i<o;i++)i in a&&(u[p][i]=a[i]),i in s&&(h[p][i]=s[i])}return{from:f(u),to:f(h),f:d(u)}}(g=this.matrix,r=e._.rgTransform.test(r)?e._.transform2matrix(r,this.getBBox()):e._.transform2matrix(e._.svgTransform2string(r),this.getBBox()),function(){return m.getBBox(1)});if("d"==t||"path"==t)return{from:f((n=e.path.toCubic(g,r))[0]),to:f(n[1]),f:d(n[0])};if("points"==t)return{from:n=s(g).split(e._.separator),to:i=s(r).split(e._.separator),f:function(e){return e}};if(p(g)&&p(r))return{from:parseFloat(g),to:parseFloat(r),f:c};var v,y,_,b=g.match(a),x=s(r).match(a);return b&&(y=b,_=x,e.is(y,"array")&&e.is(_,"array")&&y.toString()==_.toString())?{from:parseFloat(g),to:parseFloat(r),f:(v=b,function(e){return+e.toFixed(3)+v})}:{from:this.asPX(t),to:this.asPX(t,r),f:c}})}),n.plugin(function(e,r,n,i){for(var o=r.prototype,a=("createTouch"in i.doc),s=["click","dblclick","mousedown","mousemove","mouseout","mouseover","mouseup","touchstart","touchmove","touchend","touchcancel"],l={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},c=function(e,t){var r="y"==e?"scrollTop":"scrollLeft",n=t&&t.node?t.node.ownerDocument:i.doc;return n[r in n.documentElement?"documentElement":"body"][r]},u=function(){return this.originalEvent.preventDefault()},h=function(){return this.originalEvent.stopPropagation()},d=function(e,t,r,n){var i=a&&l[t]?l[t]:t,o=function(i){var o=c("y",n),s=c("x",n);if(a&&l.hasOwnProperty(t))for(var d=0,f=i.targetTouches&&i.targetTouches.length;d<f;d++)if(i.targetTouches[d].target==e||e.contains(i.targetTouches[d].target)){var p=i;(i=i.targetTouches[d]).originalEvent=p,i.preventDefault=u,i.stopPropagation=h;break}var g=i.clientX+s,m=i.clientY+o;return r.call(n,i,g,m)};return t!==i&&e.addEventListener(t,o,!1),e.addEventListener(i,o,!1),function(){return t!==i&&e.removeEventListener(t,o,!1),e.removeEventListener(i,o,!1),!0}},f=[],p=function(e){for(var r,n=e.clientX,i=e.clientY,o=c("y"),s=c("x"),l=f.length;l--;){if(r=f[l],a){for(var u,h=e.touches&&e.touches.length;h--;)if((u=e.touches[h]).identifier==r.el._drag.id||r.el.node.contains(u.target)){n=u.clientX,i=u.clientY,(e.originalEvent?e.originalEvent:e).preventDefault();break}}else e.preventDefault();var d=r.el.node;d.nextSibling,d.parentNode,d.style.display;n+=s,i+=o,t("snap.drag.move."+r.el.id,r.move_scope||r.el,n-r.el._drag.x,i-r.el._drag.y,n,i,e)}},g=function(r){e.unmousemove(p).unmouseup(g);for(var n,i=f.length;i--;)(n=f[i]).el._drag={},t("snap.drag.end."+n.el.id,n.end_scope||n.start_scope||n.move_scope||n.el,r),t.off("snap.drag.*."+n.el.id);f=[]},m=s.length;m--;)!function(t){e[t]=o[t]=function(r,n){if(e.is(r,"function"))this.events=this.events||[],this.events.push({name:t,f:r,unbind:d(this.node||document,t,r,n||this)});else for(var i=0,o=this.events.length;i<o;i++)if(this.events[i].name==t)try{this.events[i].f.call(this)}catch(e){}return this},e["un"+t]=o["un"+t]=function(e){for(var r=this.events||[],n=r.length;n--;)if(r[n].name==t&&(r[n].f==e||!e))return r[n].unbind(),r.splice(n,1),!r.length&&delete this.events,this;return this}}(s[m]);o.hover=function(e,t,r,n){return this.mouseover(e,r).mouseout(t,n||r)},o.unhover=function(e,t){return this.unmouseover(e).unmouseout(t)};var v=[];o.drag=function(r,n,i,o,a,s){var l,c=this;if(!arguments.length)return c.drag(function(e,t){this.attr({transform:l+(l?"T":"t")+[e,t]})},function(){l=this.transform().local});function u(l,u,h){(l.originalEvent||l).preventDefault(),c._drag.x=u,c._drag.y=h,c._drag.id=l.identifier,!f.length&&e.mousemove(p).mouseup(g),f.push({el:c,move_scope:o,start_scope:a,end_scope:s}),n&&t.on("snap.drag.start."+c.id,n),r&&t.on("snap.drag.move."+c.id,r),i&&t.on("snap.drag.end."+c.id,i),t("snap.drag.start."+c.id,a||o||c,u,h,l)}function h(e,r,n){t("snap.draginit."+c.id,c,e,r,n)}return t.on("snap.draginit."+c.id,u),c._drag={},v.push({el:c,start:u,init:h}),c.mousedown(h),c},o.undrag=function(){for(var r=v.length;r--;)v[r].el==this&&(this.unmousedown(v[r].init),v.splice(r,1),t.unbind("snap.drag.*."+this.id),t.unbind("snap.draginit."+this.id));return!v.length&&e.unmousemove(p).unmouseup(g),this}}),n.plugin(function(e,r,n,i){r.prototype;var o=n.prototype,a=/^\s*url\((.+)\)/,s=String,l=e._.$;e.filter={},o.filter=function(t){var n=this;"svg"!=n.type&&(n=n.paper);var i=e.parse(s(t)),o=e._.id(),a=(n.node.offsetWidth,n.node.offsetHeight,l("filter"));return l(a,{id:o,filterUnits:"userSpaceOnUse"}),a.appendChild(i.node),n.defs.appendChild(a),new r(a)},t.on("snap.util.getattr.filter",function(){t.stop();var r=l(this.node,"filter");if(r){var n=s(r).match(a);return n&&e.select(n[1])}}),t.on("snap.util.attr.filter",function(n){if(n instanceof r&&"filter"==n.type){t.stop();var i=n.node.id;i||(l(n.node,{id:n.id}),i=n.id),l(this.node,{filter:e.url(i)})}n&&"none"!=n||(t.stop(),this.node.removeAttribute("filter"))}),e.filter.blur=function(t,r){null==t&&(t=2);var n=null==r?t:[t,r];return e.format('<feGaussianBlur stdDeviation="{def}"/>',{def:n})},e.filter.blur.toString=function(){return this()},e.filter.shadow=function(t,r,n,i,o){return null==o&&(null==i?(o=n,n=4,i="#000"):(o=i,i=n,n=4)),null==n&&(n=4),null==o&&(o=1),null==t&&(t=0,r=2),null==r&&(r=t),i=e.color(i),e.format('<feGaussianBlur in="SourceAlpha" stdDeviation="{blur}"/><feOffset dx="{dx}" dy="{dy}" result="offsetblur"/><feFlood flood-color="{color}"/><feComposite in2="offsetblur" operator="in"/><feComponentTransfer><feFuncA type="linear" slope="{opacity}"/></feComponentTransfer><feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge>',{color:i,dx:t,dy:r,blur:n,opacity:o})},e.filter.shadow.toString=function(){return this()},e.filter.grayscale=function(t){return null==t&&(t=1),e.format('<feColorMatrix type="matrix" values="{a} {b} {c} 0 0 {d} {e} {f} 0 0 {g} {b} {h} 0 0 0 0 0 1 0"/>',{a:.2126+.7874*(1-t),b:.7152-.7152*(1-t),c:.0722-.0722*(1-t),d:.2126-.2126*(1-t),e:.7152+.2848*(1-t),f:.0722-.0722*(1-t),g:.2126-.2126*(1-t),h:.0722+.9278*(1-t)})},e.filter.grayscale.toString=function(){return this()},e.filter.sepia=function(t){return null==t&&(t=1),e.format('<feColorMatrix type="matrix" values="{a} {b} {c} 0 0 {d} {e} {f} 0 0 {g} {h} {i} 0 0 0 0 0 1 0"/>',{a:.393+.607*(1-t),b:.769-.769*(1-t),c:.189-.189*(1-t),d:.349-.349*(1-t),e:.686+.314*(1-t),f:.168-.168*(1-t),g:.272-.272*(1-t),h:.534-.534*(1-t),i:.131+.869*(1-t)})},e.filter.sepia.toString=function(){return this()},e.filter.saturate=function(t){return null==t&&(t=1),e.format('<feColorMatrix type="saturate" values="{amount}"/>',{amount:1-t})},e.filter.saturate.toString=function(){return this()},e.filter.hueRotate=function(t){return t=t||0,e.format('<feColorMatrix type="hueRotate" values="{angle}"/>',{angle:t})},e.filter.hueRotate.toString=function(){return this()},e.filter.invert=function(t){return null==t&&(t=1),e.format('<feComponentTransfer><feFuncR type="table" tableValues="{amount} {amount2}"/><feFuncG type="table" tableValues="{amount} {amount2}"/><feFuncB type="table" tableValues="{amount} {amount2}"/></feComponentTransfer>',{amount:t,amount2:1-t})},e.filter.invert.toString=function(){return this()},e.filter.brightness=function(t){return null==t&&(t=1),e.format('<feComponentTransfer><feFuncR type="linear" slope="{amount}"/><feFuncG type="linear" slope="{amount}"/><feFuncB type="linear" slope="{amount}"/></feComponentTransfer>',{amount:t})},e.filter.brightness.toString=function(){return this()},e.filter.contrast=function(t){return null==t&&(t=1),e.format('<feComponentTransfer><feFuncR type="linear" slope="{amount}" intercept="{amount2}"/><feFuncG type="linear" slope="{amount}" intercept="{amount2}"/><feFuncB type="linear" slope="{amount}" intercept="{amount2}"/></feComponentTransfer>',{amount:t,amount2:.5-t/2})},e.filter.contrast.toString=function(){return this()}}),n.plugin(function(e,t,r,n,i){var o=e._.box,a=e.is,s=/^[^a-z]*([tbmlrc])/i,l=function(){return"T"+this.dx+","+this.dy};t.prototype.getAlign=function(e,t){null==t&&a(e,"string")&&(t=e,e=null);var r=(e=e||this.paper).getBBox?e.getBBox():o(e),n=this.getBBox(),i={};switch(t=(t=t&&t.match(s))?t[1].toLowerCase():"c"){case"t":i.dx=0,i.dy=r.y-n.y;break;case"b":i.dx=0,i.dy=r.y2-n.y2;break;case"m":i.dx=0,i.dy=r.cy-n.cy;break;case"l":i.dx=r.x-n.x,i.dy=0;break;case"r":i.dx=r.x2-n.x2,i.dy=0;break;default:i.dx=r.cx-n.cx,i.dy=0}return i.toString=l,i},t.prototype.align=function(e,t){return this.transform("..."+this.getAlign(e,t))}}),n.plugin(function(t,r,n,i){function o(e){e=e.split(/(?=#)/);var t=new String(e[5]);return t[50]=e[0],t[100]=e[1],t[200]=e[2],t[300]=e[3],t[400]=e[4],t[500]=e[5],t[600]=e[6],t[700]=e[7],t[800]=e[8],t[900]=e[9],e[10]&&(t.A100=e[10],t.A200=e[11],t.A400=e[12],t.A700=e[13]),t}t.mui={},t.flat={},t.mui.red=o("#ffebee#ffcdd2#ef9a9a#e57373#ef5350#f44336#e53935#d32f2f#c62828#b71c1c#ff8a80#ff5252#ff1744#d50000"),t.mui.pink=o("#FCE4EC#F8BBD0#F48FB1#F06292#EC407A#E91E63#D81B60#C2185B#AD1457#880E4F#FF80AB#FF4081#F50057#C51162"),t.mui.purple=o("#F3E5F5#E1BEE7#CE93D8#BA68C8#AB47BC#9C27B0#8E24AA#7B1FA2#6A1B9A#4A148C#EA80FC#E040FB#D500F9#AA00FF"),t.mui.deeppurple=o("#EDE7F6#D1C4E9#B39DDB#9575CD#7E57C2#673AB7#5E35B1#512DA8#4527A0#311B92#B388FF#7C4DFF#651FFF#6200EA"),t.mui.indigo=o("#E8EAF6#C5CAE9#9FA8DA#7986CB#5C6BC0#3F51B5#3949AB#303F9F#283593#1A237E#8C9EFF#536DFE#3D5AFE#304FFE"),t.mui.blue=o("#E3F2FD#BBDEFB#90CAF9#64B5F6#64B5F6#2196F3#1E88E5#1976D2#1565C0#0D47A1#82B1FF#448AFF#2979FF#2962FF"),t.mui.lightblue=o("#E1F5FE#B3E5FC#81D4FA#4FC3F7#29B6F6#03A9F4#039BE5#0288D1#0277BD#01579B#80D8FF#40C4FF#00B0FF#0091EA"),t.mui.cyan=o("#E0F7FA#B2EBF2#80DEEA#4DD0E1#26C6DA#00BCD4#00ACC1#0097A7#00838F#006064#84FFFF#18FFFF#00E5FF#00B8D4"),t.mui.teal=o("#E0F2F1#B2DFDB#80CBC4#4DB6AC#26A69A#009688#00897B#00796B#00695C#004D40#A7FFEB#64FFDA#1DE9B6#00BFA5"),t.mui.green=o("#E8F5E9#C8E6C9#A5D6A7#81C784#66BB6A#4CAF50#43A047#388E3C#2E7D32#1B5E20#B9F6CA#69F0AE#00E676#00C853"),t.mui.lightgreen=o("#F1F8E9#DCEDC8#C5E1A5#AED581#9CCC65#8BC34A#7CB342#689F38#558B2F#33691E#CCFF90#B2FF59#76FF03#64DD17"),t.mui.lime=o("#F9FBE7#F0F4C3#E6EE9C#DCE775#D4E157#CDDC39#C0CA33#AFB42B#9E9D24#827717#F4FF81#EEFF41#C6FF00#AEEA00"),t.mui.yellow=o("#FFFDE7#FFF9C4#FFF59D#FFF176#FFEE58#FFEB3B#FDD835#FBC02D#F9A825#F57F17#FFFF8D#FFFF00#FFEA00#FFD600"),t.mui.amber=o("#FFF8E1#FFECB3#FFE082#FFD54F#FFCA28#FFC107#FFB300#FFA000#FF8F00#FF6F00#FFE57F#FFD740#FFC400#FFAB00"),t.mui.orange=o("#FFF3E0#FFE0B2#FFCC80#FFB74D#FFA726#FF9800#FB8C00#F57C00#EF6C00#E65100#FFD180#FFAB40#FF9100#FF6D00"),t.mui.deeporange=o("#FBE9E7#FFCCBC#FFAB91#FF8A65#FF7043#FF5722#F4511E#E64A19#D84315#BF360C#FF9E80#FF6E40#FF3D00#DD2C00"),t.mui.brown=o("#EFEBE9#D7CCC8#BCAAA4#A1887F#8D6E63#795548#6D4C41#5D4037#4E342E#3E2723"),t.mui.grey=o("#FAFAFA#F5F5F5#EEEEEE#E0E0E0#BDBDBD#9E9E9E#757575#616161#424242#212121"),t.mui.bluegrey=o("#ECEFF1#CFD8DC#B0BEC5#90A4AE#78909C#607D8B#546E7A#455A64#37474F#263238"),t.flat.turquoise="#1abc9c",t.flat.greensea="#16a085",t.flat.sunflower="#f1c40f",t.flat.orange="#f39c12",t.flat.emerland="#2ecc71",t.flat.nephritis="#27ae60",t.flat.carrot="#e67e22",t.flat.pumpkin="#d35400",t.flat.peterriver="#3498db",t.flat.belizehole="#2980b9",t.flat.alizarin="#e74c3c",t.flat.pomegranate="#c0392b",t.flat.amethyst="#9b59b6",t.flat.wisteria="#8e44ad",t.flat.clouds="#ecf0f1",t.flat.silver="#bdc3c7",t.flat.wetasphalt="#34495e",t.flat.midnightblue="#2c3e50",t.flat.concrete="#95a5a6",t.flat.asbestos="#7f8c8d",t.importMUIColors=function(){for(var r in t.mui)t.mui.hasOwnProperty(r)&&(e[r]=t.mui[r])}}),n}),function(e,t){"use strict";var r=function(){var t=function(){for(var t=e.location.hash?e.location.hash.substr(1).split("&"):[],r={},n=0;n<t.length;n++){var i=t[n].split("=");r[i[0]]=decodeURIComponent(i[1])}return r},r=function(t){var r=[];for(var n in t)r.push(n+"="+encodeURIComponent(t[n]));e.location.hash=r.join("&")};return{get:function(e){var r=t();return e?r[e]:r},add:function(e){var n=t();for(var i in e)n[i]=e[i];r(n)},remove:function(e){e="string"==typeof e?[e]:e;for(var n=t(),i=0;i<e.length;i++)delete n[e[i]];r(n)},clear:function(){r({})}}}();e.hash=r}(window),function(e){var t,r,n="0.4.2",i="hasOwnProperty",o=/[\.\/]/,a=function(){},s=function(e,t){return e-t},l={n:{}},c=function(e,n){e=String(e);var i,o=r,a=Array.prototype.slice.call(arguments,2),l=c.listeners(e),u=0,h=[],d={},f=[],p=t;t=e,r=0;for(var g=0,m=l.length;m>g;g++)"zIndex"in l[g]&&(h.push(l[g].zIndex),l[g].zIndex<0&&(d[l[g].zIndex]=l[g]));for(h.sort(s);h[u]<0;)if(i=d[h[u++]],f.push(i.apply(n,a)),r)return r=o,f;for(g=0;m>g;g++)if("zIndex"in(i=l[g]))if(i.zIndex==h[u]){if(f.push(i.apply(n,a)),r)break;do{if((i=d[h[++u]])&&f.push(i.apply(n,a)),r)break}while(i)}else d[i.zIndex]=i;else if(f.push(i.apply(n,a)),r)break;return r=o,t=p,f.length?f:null};c._events=l,c.listeners=function(e){var t,r,n,i,a,s,c,u,h=e.split(o),d=l,f=[d],p=[];for(i=0,a=h.length;a>i;i++){for(u=[],s=0,c=f.length;c>s;s++)for(r=[(d=f[s].n)[h[i]],d["*"]],n=2;n--;)(t=r[n])&&(u.push(t),p=p.concat(t.f||[]));f=u}return p},c.on=function(e,t){if(e=String(e),"function"!=typeof t)return function(){};for(var r=e.split(o),n=l,i=0,s=r.length;s>i;i++)n=(n=n.n).hasOwnProperty(r[i])&&n[r[i]]||(n[r[i]]={n:{}});for(n.f=n.f||[],i=0,s=n.f.length;s>i;i++)if(n.f[i]==t)return a;return n.f.push(t),function(e){+e==+e&&(t.zIndex=+e)}},c.f=function(e){var t=[].slice.call(arguments,1);return function(){c.apply(null,[e,null].concat(t).concat([].slice.call(arguments,0)))}},c.stop=function(){r=1},c.nt=function(e){return e?new RegExp("(?:\\.|\\/|^)"+e+"(?:\\.|\\/|$)").test(t):t},c.nts=function(){return t.split(o)},c.off=c.unbind=function(e,t){if(e){var r,n,a,s,u,h,d,f=e.split(o),p=[l];for(s=0,u=f.length;u>s;s++)for(h=0;h<p.length;h+=a.length-2){if(a=[h,1],r=p[h].n,"*"!=f[s])r[f[s]]&&a.push(r[f[s]]);else for(n in r)r[i](n)&&a.push(r[n]);p.splice.apply(p,a)}for(s=0,u=p.length;u>s;s++)for(r=p[s];r.n;){if(t){if(r.f){for(h=0,d=r.f.length;d>h;h++)if(r.f[h]==t){r.f.splice(h,1);break}!r.f.length&&delete r.f}for(n in r.n)if(r.n[i](n)&&r.n[n].f){var g=r.n[n].f;for(h=0,d=g.length;d>h;h++)if(g[h]==t){g.splice(h,1);break}!g.length&&delete r.n[n].f}}else for(n in delete r.f,r.n)r.n[i](n)&&r.n[n].f&&delete r.n[n].f;r=r.n}}else c._events=l={n:{}}},c.once=function(e,t){var r=function(){return c.unbind(e,r),t.apply(this,arguments)};return c.on(e,r)},c.version=n,c.toString=function(){return"You are running Eve "+n},"undefined"!=typeof module&&module.exports?module.exports=c:"undefined"!=typeof define?define("eve",[],function(){return c}):e.eve=c}(this),function(e,t){"function"==typeof define&&define.amd?define(["eve"],function(r){return t(e,r)}):t(e,e.eve)}(this,function(e,t){var r=function(t){var r={},n=e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame||function(e){setTimeout(e,16)},i=Array.isArray||function(e){return e instanceof Array||"[object Array]"==Object.prototype.toString.call(e)},o=0,a="M"+(+new Date).toString(36),s=function(){return a+(o++).toString(36)},l=Date.now||function(){return+new Date},c=function(e){var t=this;if(null==e)return t.s;var r=t.s-e;t.b+=t.dur*r,t.B+=t.dur*r,t.s=e},u=function(e){return null==e?this.spd:void(this.spd=e)},h=function(e){var t=this;return null==e?t.dur:(t.s=t.s*e/t.dur,void(t.dur=e))},d=function(){var e=this;delete r[e.id],t("mina.stop."+e.id,e)},f=function(){var e=this;e.pdif||(delete r[e.id],e.pdif=e.get()-e.b)},p=function(){var e=this;e.pdif&&(e.b=e.get()-e.pdif,delete e.pdif,r[e.id]=e)},g=function(){var e=0;for(var o in r)if(r.hasOwnProperty(o)){var a,s=r[o],l=s.get();if(e++,s.s=(l-s.b)/(s.dur/s.spd),s.s>=1&&(delete r[o],s.s=1,e--,function(e){setTimeout(function(){t("mina.finish."+e.id,e)})}(s)),i(s.start)){a=[];for(var c=0,u=s.start.length;u>c;c++)a[c]=+s.start[c]+(s.end[c]-s.start[c])*s.easing(s.s)}else a=+s.start+(s.end-s.start)*s.easing(s.s);s.set(a)}e&&n(g)},m=function(e,t,i,o,a,l,v){var y={id:s(),start:e,end:t,b:i,s:0,dur:o-i,spd:1,get:a,set:l,easing:v||m.linear,status:c,speed:u,duration:h,stop:d,pause:f,resume:p};r[y.id]=y;var _,b=0;for(_ in r)if(r.hasOwnProperty(_)&&2==++b)break;return 1==b&&n(g),y};return m.time=l,m.getById=function(e){return r[e]||null},m.linear=function(e){return e},m.easeout=function(e){return Math.pow(e,1.7)},m.easein=function(e){return Math.pow(e,.48)},m.easeinout=function(e){if(1==e)return 1;if(0==e)return 0;var t=.48-e/1.04,r=Math.sqrt(.1734+t*t),n=r-t,i=-r-t,o=Math.pow(Math.abs(n),1/3)*(0>n?-1:1)+Math.pow(Math.abs(i),1/3)*(0>i?-1:1)+.5;return 3*(1-o)*o*o+o*o*o},m.backin=function(e){if(1==e)return 1;var t=1.70158;return e*e*((t+1)*e-t)},m.backout=function(e){if(0==e)return 0;var t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},m.elastic=function(e){return e==!!e?e:Math.pow(2,-10*e)*Math.sin(2*(e-.075)*Math.PI/.3)+1},m.bounce=function(e){var t,r=7.5625,n=2.75;return 1/n>e?t=r*e*e:2/n>e?t=r*(e-=1.5/n)*e+.75:2.5/n>e?t=r*(e-=2.25/n)*e+.9375:t=r*(e-=2.625/n)*e+.984375,t},e.mina=m,m}(void 0===t?function(){}:t),n=function(){function n(e,t){if(e){if(e.tagName)return w(e);if(e instanceof v)return e;if(null==t)return w(e=B.doc.querySelector(e))}return new x(e=null==e?"100%":e,t=null==t?"100%":t)}function i(e,t){if(t){if("string"==typeof e&&(e=i(e)),"string"==typeof t)return"xlink:"==t.substring(0,6)?e.getAttributeNS(ee,t.substring(6)):"xml:"==t.substring(0,4)?e.getAttributeNS(te,t.substring(4)):e.getAttribute(t);for(var r in t)if(t[q](r)){var n=T(t[r]);n?"xlink:"==r.substring(0,6)?e.setAttributeNS(ee,r.substring(6),n):"xml:"==r.substring(0,4)?e.setAttributeNS(te,r.substring(4),n):e.setAttribute(r,n):e.removeAttribute(r)}}else e=B.doc.createElementNS(te,e);return e}function o(e,t){return"finite"==(t=T.prototype.toLowerCase.call(t))?isFinite(e):!("array"!=t||!(e instanceof Array||Array.isArray&&Array.isArray(e)))||("null"==t&&null===e||t==typeof e&&null!==e||"object"==t&&e===Object(e)||z.call(e).slice(8,-1).toLowerCase()==t)}function a(e,t,r){return function n(){var i=Array.prototype.slice.call(arguments,0),o=i.join("␀"),a=n.cache=n.cache||{},s=n.count=n.count||[];return a[q](o)?(function(e,t){for(var r=0,n=e.length;n>r;r++)if(e[r]===t)return e.push(e.splice(r,1)[0])}(s,o),r?r(a[o]):a[o]):(s.length>=1e3&&delete a[s.shift()],s.push(o),a[o]=e.apply(t,i),r?r(a[o]):a[o])}}function s(e){return e%360*P/180}function l(e){return 180*e/P%360}function c(e,t,r,n,i,o){return null==t&&"[object SVGMatrix]"==z.call(e)?(this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.e=e.e,void(this.f=e.f)):void(null!=e?(this.a=+e,this.b=+t,this.c=+r,this.d=+n,this.e=+i,this.f=+o):(this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0))}function u(e){var t=[];return e=e.replace(/(?:^|\s)(\w+)\(([^)]+)\)/g,function(e,r,n){return n=n.split(/\s*,\s*|\s+/),"rotate"==r&&1==n.length&&n.push(0,0),"scale"==r&&(2==n.length&&n.push(0,0),1==n.length&&n.push(n[0],0,0)),"skewX"==r?t.push(["m",1,0,D.tan(s(n[0])),1,0,0]):"skewY"==r?t.push(["m",1,D.tan(s(n[0])),0,1,0,0]):t.push([r.charAt(0)].concat(n)),e}),t}function h(e,t){var r=he(e),n=new c;if(r)for(var i=0,o=r.length;o>i;i++){var a,s,l,u,h,d=r[i],f=d.length,p=T(d[0]).toLowerCase(),g=d[0]!=p,m=g?n.invert():0;"t"==p&&2==f?n.translate(d[1],0):"t"==p&&3==f?g?(a=m.x(0,0),s=m.y(0,0),l=m.x(d[1],d[2]),u=m.y(d[1],d[2]),n.translate(l-a,u-s)):n.translate(d[1],d[2]):"r"==p?2==f?(h=h||t,n.rotate(d[1],h.x+h.width/2,h.y+h.height/2)):4==f&&(g?(l=m.x(d[2],d[3]),u=m.y(d[2],d[3]),n.rotate(d[1],l,u)):n.rotate(d[1],d[2],d[3])):"s"==p?2==f||3==f?(h=h||t,n.scale(d[1],d[f-1],h.x+h.width/2,h.y+h.height/2)):4==f?g?(l=m.x(d[2],d[3]),u=m.y(d[2],d[3]),n.scale(d[1],d[1],l,u)):n.scale(d[1],d[1],d[2],d[3]):5==f&&(g?(l=m.x(d[3],d[4]),u=m.y(d[3],d[4]),n.scale(d[1],d[2],l,u)):n.scale(d[1],d[2],d[3],d[4])):"m"==p&&7==f&&n.add(d[1],d[2],d[3],d[4],d[5],d[6])}return n}function d(e,t){if(null==t){var r=!0;if(!(t="linearGradient"==e.type||"radialGradient"==e.type?e.node.getAttribute("gradientTransform"):"pattern"==e.type?e.node.getAttribute("patternTransform"):e.node.getAttribute("transform")))return new c;t=u(t)}else o(t=n._.rgTransform.test(t)?T(t).replace(/\.{3}|\u2026/g,e._.transform||O):u(t),"array")&&(t=n.path?n.path.toString.call(t):T(t)),e._.transform=t;var i=h(t,e.getBBox(1));return r?i:void(e.matrix=i)}function f(e){var t=n._.someDefs;if(t&&de(t.ownerDocument.documentElement,t))return t;var r=e.node.ownerSVGElement&&w(e.node.ownerSVGElement)||e.node.parentNode&&w(e.node.parentNode)||n.select("svg")||n(0,0),i=r.select("defs"),o=null!=i&&i.node;return o||(o=b("defs",r.node).node),n._.someDefs=o,o}function p(e,t,r){function n(e){return null==e?O:e==+e?e:(i(c,{width:e}),c.getBBox().width)}function o(e){return null==e?O:e==+e?e:(i(c,{height:e}),c.getBBox().height)}function a(n,i){null==t?l[n]=i(e.attr(n)):n==t&&(l=i(null==r?e.attr(n):r))}var s=f(e),l={},c=s.querySelector(".svg---mgr");switch(c||(i(c=i("rect"),{width:10,height:10,class:"svg---mgr"}),s.appendChild(c)),e.type){case"rect":a("rx",n),a("ry",o);case"image":a("width",n),a("height",o);case"text":a("x",n),a("y",o);break;case"circle":a("cx",n),a("cy",o),a("r",n);break;case"ellipse":a("cx",n),a("cy",o),a("rx",n),a("ry",o);break;case"line":a("x1",n),a("x2",n),a("y1",o),a("y2",o);break;case"marker":a("refX",n),a("markerWidth",n),a("refY",o),a("markerHeight",o);break;case"radialGradient":a("fx",n),a("fy",o);break;case"tspan":a("dx",n),a("dy",o);break;default:a(t,n)}return l}function m(e){o(e,"array")||(e=Array.prototype.slice.call(arguments,0));for(var t=0,r=0,n=this.node;this[t];)delete this[t++];for(t=0;t<e.length;t++)"set"==e[t].type?e[t].forEach(function(e){n.appendChild(e.node)}):n.appendChild(e[t].node);var i=n.childNodes;for(t=0;t<i.length;t++)this[r++]=w(i[t]);return this}function v(e){if(e.snap in re)return re[e.snap];var t,r=this.id=K();try{t=e.ownerSVGElement}catch(e){}if(this.node=e,t&&(this.paper=new x(t)),this.type=e.tagName,this.anims={},this._={transform:[]},e.snap=r,re[r]=this,"g"==this.type)for(var n in this.add=m,x.prototype)x.prototype[q](n)&&(this[n]=x.prototype[n])}function y(e){for(var t,r=0,n=e.length;n>r;r++)if(t=t||e[r])return t}function _(e){this.node=e}function b(e,t){var r=i(e);t.appendChild(r);var n=w(r);return n.type=e,n}function x(e,t){var r,n,o,a=x.prototype;if(e&&"svg"==e.tagName){if(e.snap in re)return re[e.snap];for(var s in r=new v(e),n=e.getElementsByTagName("desc")[0],o=e.getElementsByTagName("defs")[0],n||((n=i("desc")).appendChild(B.doc.createTextNode("Created with Snap")),r.node.appendChild(n)),o||(o=i("defs"),r.node.appendChild(o)),r.defs=o,a)a[q](s)&&(r[s]=a[s]);r.paper=r.root=r}else i((r=b("svg",B.doc.body)).node,{height:t,version:1.1,width:e,xmlns:te});return r}function w(e){return e?e instanceof v||e instanceof _?e:"svg"==e.tagName?new x(e):new v(e):e}function C(){return this.selectAll("stop")}function k(e,t){var r=i("stop"),o={offset:+t+"%"};return e=n.color(e),o["stop-color"]=e.hex,e.opacity<1&&(o["stop-opacity"]=e.opacity),i(r,o),this.node.appendChild(r),this}function S(){if("linearGradient"==this.type){var e=i(this.node,"x1")||0,t=i(this.node,"x2")||1,r=i(this.node,"y1")||0,o=i(this.node,"y2")||0;return n._.box(e,r,D.abs(t-e),D.abs(o-r))}var a=this.node.cx||.5,s=this.node.cy||.5,l=this.node.r||0;return n._.box(a-l,s-l,2*l,2*l)}function F(e,r){function n(e,t){for(var r=(t-c)/(e-u),n=u;e>n;n++)s[n].offset=+(+c+r*(n-u)).toFixed(2);u=e,c=t}var o,a=y(t("snap.util.grad.parse",null,r));if(!a)return null;a.params.unshift(e),o="l"==a.type.toLowerCase()?E.apply(0,a.params):A.apply(0,a.params),a.type!=a.type.toLowerCase()&&i(o.node,{gradientUnits:"userSpaceOnUse"});var s=a.stops,l=s.length,c=0,u=0;l--;for(var h=0;l>h;h++)"offset"in s[h]&&n(h,s[h].offset);for(s[l].offset=s[l].offset||100,n(l,s[l].offset),h=0;l>=h;h++){var d=s[h];o.addStop(d.color,d.offset)}return o}function E(e,t,r,n,o){var a=b("linearGradient",e);return a.stops=C,a.addStop=k,a.getBBox=S,null!=t&&i(a.node,{x1:t,y1:r,x2:n,y2:o}),a}function A(e,t,r,n,o,a){var s=b("radialGradient",e);return s.stops=C,s.addStop=k,s.getBBox=S,null!=t&&i(s.node,{cx:t,cy:r,r:n}),null!=o&&null!=a&&i(s.node,{fx:o,fy:a}),s}function L(e){return function(r){if(t.stop(),r instanceof _&&1==r.node.childNodes.length&&("radialGradient"==r.node.firstChild.tagName||"linearGradient"==r.node.firstChild.tagName||"pattern"==r.node.firstChild.tagName)&&(r=r.node.firstChild,f(this).appendChild(r),r=w(r)),r instanceof v)if("radialGradient"==r.type||"linearGradient"==r.type||"pattern"==r.type){r.node.id||i(r.node,{id:r.id});var o=ne(r.node.id)}else o=r.attr(e);else if((o=n.color(r)).error){var a=F(f(this),r);a?(a.node.id||i(a.node,{id:a.id}),o=ne(a.node.id)):o=r}else o=T(o);var s={};s[e]=o,i(this.node,s),this.node.style[e]=O}}n.version="0.2.0",n.toString=function(){return"Snap v"+this.version},n._={};var B={win:e,doc:e.document};n._.glob=B;var q="hasOwnProperty",T=String,j=parseFloat,M=parseInt,D=Math,N=D.max,U=D.min,I=D.abs,P=(D.pow,D.PI),O=(D.round,""),z=Object.prototype.toString,R=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?%?)\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?%?)\s*\))\s*$/i,G=/^url\(#?([^)]+)\)$/,H="\t\n\v\f\r   ᠎             　\u2028\u2029",V=new RegExp("[,"+H+"]+"),X=(new RegExp("["+H+"]","g"),new RegExp("["+H+"]*,["+H+"]*")),Y={hs:1,rg:1},$=new RegExp("([a-z])["+H+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+H+"]*,?["+H+"]*)+)","ig"),W=new RegExp("([rstm])["+H+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+H+"]*,?["+H+"]*)+)","ig"),Z=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+H+"]*,?["+H+"]*","ig"),Q=0,J="S"+(+new Date).toString(36),K=function(){return J+(Q++).toString(36)},ee="http://www.w3.org/1999/xlink",te="http://www.w3.org/2000/svg",re={},ne=n.url=function(e){return"url('#"+e+"')"};n._.$=i,n._.id=K,n.format=function(){var e=/\{([^\}]+)\}/g,t=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,r=function(e,r,n){var i=n;return r.replace(t,function(e,t,r,n,o){t=t||n,i&&(t in i&&(i=i[t]),"function"==typeof i&&o&&(i=i()))}),i=(null==i||i==n?e:i)+""};return function(t,n){return T(t).replace(e,function(e,t){return r(e,t,n)})}}();var ie=function(){function e(){this.parentNode.removeChild(this)}return function(t,r){var n=B.doc.createElement("img"),i=B.doc.body;n.style.cssText="position:absolute;left:-9999em;top:-9999em",n.onload=function(){r.call(n),n.onload=n.onerror=null,i.removeChild(n)},n.onerror=e,i.appendChild(n),n.src=t}}();n._.clone=function e(t){if("function"==typeof t||Object(t)!==t)return t;var r=new t.constructor;for(var n in t)t[q](n)&&(r[n]=e(t[n]));return r},n._.cacher=a,n.rad=s,n.deg=l,n.angle=function e(t,r,n,i,o,a){if(null==o){var s=t-n,l=r-i;return s||l?(180+180*D.atan2(-l,-s)/P+360)%360:0}return e(t,r,o,a)-e(n,i,o,a)},n.is=o,n.snapTo=function(e,t,r){if(r=o(r,"finite")?r:10,o(e,"array")){for(var n=e.length;n--;)if(I(e[n]-t)<=r)return e[n]}else{var i=t%(e=+e);if(r>i)return t-i;if(i>e-r)return t-i+e}return t},function(e){function t(e){return e[0]*e[0]+e[1]*e[1]}function r(e){var r=D.sqrt(t(e));e[0]&&(e[0]/=r),e[1]&&(e[1]/=r)}e.add=function(e,t,r,n,i,o){var a,s,l,u,h=[[],[],[]],d=[[this.a,this.c,this.e],[this.b,this.d,this.f],[0,0,1]],f=[[e,r,i],[t,n,o],[0,0,1]];for(e&&e instanceof c&&(f=[[e.a,e.c,e.e],[e.b,e.d,e.f],[0,0,1]]),a=0;3>a;a++)for(s=0;3>s;s++){for(u=0,l=0;3>l;l++)u+=d[a][l]*f[l][s];h[a][s]=u}return this.a=h[0][0],this.b=h[1][0],this.c=h[0][1],this.d=h[1][1],this.e=h[0][2],this.f=h[1][2],this},e.invert=function(){var e=this,t=e.a*e.d-e.b*e.c;return new c(e.d/t,-e.b/t,-e.c/t,e.a/t,(e.c*e.f-e.d*e.e)/t,(e.b*e.e-e.a*e.f)/t)},e.clone=function(){return new c(this.a,this.b,this.c,this.d,this.e,this.f)},e.translate=function(e,t){return this.add(1,0,0,1,e,t)},e.scale=function(e,t,r,n){return null==t&&(t=e),(r||n)&&this.add(1,0,0,1,r,n),this.add(e,0,0,t,0,0),(r||n)&&this.add(1,0,0,1,-r,-n),this},e.rotate=function(e,t,r){e=s(e),t=t||0,r=r||0;var n=+D.cos(e).toFixed(9),i=+D.sin(e).toFixed(9);return this.add(n,i,-i,n,t,r),this.add(1,0,0,1,-t,-r)},e.x=function(e,t){return e*this.a+t*this.c+this.e},e.y=function(e,t){return e*this.b+t*this.d+this.f},e.get=function(e){return+this[T.fromCharCode(97+e)].toFixed(4)},e.toString=function(){return"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")"},e.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)]},e.split=function(){var e={};e.dx=this.e,e.dy=this.f;var n=[[this.a,this.c],[this.b,this.d]];e.scalex=D.sqrt(t(n[0])),r(n[0]),e.shear=n[0][0]*n[1][0]+n[0][1]*n[1][1],n[1]=[n[1][0]-n[0][0]*e.shear,n[1][1]-n[0][1]*e.shear],e.scaley=D.sqrt(t(n[1])),r(n[1]),e.shear/=e.scaley;var i=-n[0][1],o=n[1][1];return 0>o?(e.rotate=l(D.acos(o)),0>i&&(e.rotate=360-e.rotate)):e.rotate=l(D.asin(i)),e.isSimple=!(+e.shear.toFixed(9)||e.scalex.toFixed(9)!=e.scaley.toFixed(9)&&e.rotate),e.isSuperSimple=!+e.shear.toFixed(9)&&e.scalex.toFixed(9)==e.scaley.toFixed(9)&&!e.rotate,e.noRotation=!+e.shear.toFixed(9)&&!e.rotate,e},e.toTransformString=function(e){var t=e||this.split();return t.isSimple?(t.scalex=+t.scalex.toFixed(4),t.scaley=+t.scaley.toFixed(4),t.rotate=+t.rotate.toFixed(4),(t.dx||t.dy?"t"+[+t.dx.toFixed(4),+t.dy.toFixed(4)]:O)+(1!=t.scalex||1!=t.scaley?"s"+[t.scalex,t.scaley,0,0]:O)+(t.rotate?"r"+[+t.rotate.toFixed(4),0,0]:O)):"m"+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)]}}(c.prototype),n.Matrix=c,n.getRGB=a(function(e){if(!e||(e=T(e)).indexOf("-")+1)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:le};if("none"==e)return{r:-1,g:-1,b:-1,hex:"none",toString:le};if(!(Y[q](e.toLowerCase().substring(0,2))||"#"==e.charAt())&&(e=oe(e)),!e)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:le};var t,r,i,a,s,l,c=e.match(R);return c?(c[2]&&(i=M(c[2].substring(5),16),r=M(c[2].substring(3,5),16),t=M(c[2].substring(1,3),16)),c[3]&&(i=M((s=c[3].charAt(3))+s,16),r=M((s=c[3].charAt(2))+s,16),t=M((s=c[3].charAt(1))+s,16)),c[4]&&(l=c[4].split(X),t=j(l[0]),"%"==l[0].slice(-1)&&(t*=2.55),r=j(l[1]),"%"==l[1].slice(-1)&&(r*=2.55),i=j(l[2]),"%"==l[2].slice(-1)&&(i*=2.55),"rgba"==c[1].toLowerCase().slice(0,4)&&(a=j(l[3])),l[3]&&"%"==l[3].slice(-1)&&(a/=100)),c[5]?(l=c[5].split(X),t=j(l[0]),"%"==l[0].slice(-1)&&(t/=100),r=j(l[1]),"%"==l[1].slice(-1)&&(r/=100),i=j(l[2]),"%"==l[2].slice(-1)&&(i/=100),("deg"==l[0].slice(-3)||"°"==l[0].slice(-1))&&(t/=360),"hsba"==c[1].toLowerCase().slice(0,4)&&(a=j(l[3])),l[3]&&"%"==l[3].slice(-1)&&(a/=100),n.hsb2rgb(t,r,i,a)):c[6]?(l=c[6].split(X),t=j(l[0]),"%"==l[0].slice(-1)&&(t/=100),r=j(l[1]),"%"==l[1].slice(-1)&&(r/=100),i=j(l[2]),"%"==l[2].slice(-1)&&(i/=100),("deg"==l[0].slice(-3)||"°"==l[0].slice(-1))&&(t/=360),"hsla"==c[1].toLowerCase().slice(0,4)&&(a=j(l[3])),l[3]&&"%"==l[3].slice(-1)&&(a/=100),n.hsl2rgb(t,r,i,a)):(t=U(D.round(t),255),r=U(D.round(r),255),i=U(D.round(i),255),a=U(N(a,0),1),(c={r:t,g:r,b:i,toString:le}).hex="#"+(16777216|i|r<<8|t<<16).toString(16).slice(1),c.opacity=o(a,"finite")?a:1,c)):{r:-1,g:-1,b:-1,hex:"none",error:1,toString:le}},n),n.hsb=a(function(e,t,r){return n.hsb2rgb(e,t,r).hex}),n.hsl=a(function(e,t,r){return n.hsl2rgb(e,t,r).hex}),n.rgb=a(function(e,t,r,n){if(o(n,"finite")){var i=D.round;return"rgba("+[i(e),i(t),i(r),+n.toFixed(2)]+")"}return"#"+(16777216|r|t<<8|e<<16).toString(16).slice(1)});var oe=function(e){var t=B.doc.getElementsByTagName("head")[0],r="rgb(255, 0, 0)";return(oe=a(function(e){if("red"==e.toLowerCase())return r;t.style.color=r,t.style.color=e;var n=B.doc.defaultView.getComputedStyle(t,O).getPropertyValue("color");return n==r?null:n}))(e)},ae=function(){return"hsb("+[this.h,this.s,this.b]+")"},se=function(){return"hsl("+[this.h,this.s,this.l]+")"},le=function(){return 1==this.opacity||null==this.opacity?this.hex:"rgba("+[this.r,this.g,this.b,this.opacity]+")"},ce=function(e,t,r){if(null==t&&o(e,"object")&&"r"in e&&"g"in e&&"b"in e&&(r=e.b,t=e.g,e=e.r),null==t&&o(e,string)){var i=n.getRGB(e);e=i.r,t=i.g,r=i.b}return(e>1||t>1||r>1)&&(e/=255,t/=255,r/=255),[e,t,r]},ue=function(e,t,r,i){var a={r:e=D.round(255*e),g:t=D.round(255*t),b:r=D.round(255*r),opacity:o(i,"finite")?i:1,hex:n.rgb(e,t,r),toString:le};return o(i,"finite")&&(a.opacity=i),a};n.color=function(e){var t;return o(e,"object")&&"h"in e&&"s"in e&&"b"in e?(t=n.hsb2rgb(e),e.r=t.r,e.g=t.g,e.b=t.b,e.opacity=1,e.hex=t.hex):o(e,"object")&&"h"in e&&"s"in e&&"l"in e?(t=n.hsl2rgb(e),e.r=t.r,e.g=t.g,e.b=t.b,e.opacity=1,e.hex=t.hex):(o(e,"string")&&(e=n.getRGB(e)),o(e,"object")&&"r"in e&&"g"in e&&"b"in e&&!("error"in e)?(t=n.rgb2hsl(e),e.h=t.h,e.s=t.s,e.l=t.l,t=n.rgb2hsb(e),e.v=t.b):((e={hex:"none"}).r=e.g=e.b=e.h=e.s=e.v=e.l=-1,e.error=1)),e.toString=le,e},n.hsb2rgb=function(e,t,r,n){var i,a,s,l,c;return o(e,"object")&&"h"in e&&"s"in e&&"b"in e&&(r=e.b,t=e.s,n=(e=e.h).o),l=(c=r*t)*(1-I((e=(e*=360)%360/60)%2-1)),i=a=s=r-c,ue(i+=[c,l,0,0,l,c][e=~~e],a+=[l,c,c,l,0,0][e],s+=[0,0,l,c,c,l][e],n)},n.hsl2rgb=function(e,t,r,n){var i,a,s,l,c;return o(e,"object")&&"h"in e&&"s"in e&&"l"in e&&(r=e.l,t=e.s,e=e.h),(e>1||t>1||r>1)&&(e/=360,t/=100,r/=100),e=(e*=360)%360/60,l=(c=2*t*(.5>r?r:1-r))*(1-I(e%2-1)),i=a=s=r-c/2,ue(i+=[c,l,0,0,l,c][e=~~e],a+=[l,c,c,l,0,0][e],s+=[0,0,l,c,c,l][e],n)},n.rgb2hsb=function(e,t,r){var n,i;return e=(r=ce(e,t,r))[0],t=r[1],r=r[2],{h:((0==(i=(n=N(e,t,r))-U(e,t,r))?null:n==e?(t-r)/i:n==t?(r-e)/i+2:(e-t)/i+4)+360)%6*60/360,s:0==i?0:i/n,b:n,toString:ae}},n.rgb2hsl=function(e,t,r){var n,i,o,a;return e=(r=ce(e,t,r))[0],t=r[1],r=r[2],n=((i=N(e,t,r))+(o=U(e,t,r)))/2,{h:((0==(a=i-o)?null:i==e?(t-r)/a:i==t?(r-e)/a+2:(e-t)/a+4)+360)%6*60/360,s:0==a?0:.5>n?a/(2*n):a/(2-2*n),l:n,toString:se}},n.parsePathString=function(e){if(!e)return null;var t=n.path(e);if(t.arr)return n.path.clone(t.arr);var r={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},i=[];return o(e,"array")&&o(e[0],"array")&&(i=n.path.clone(e)),i.length||T(e).replace($,function(e,t,n){var o=[],a=t.toLowerCase();if(n.replace(Z,function(e,t){t&&o.push(+t)}),"m"==a&&o.length>2&&(i.push([t].concat(o.splice(0,2))),a="l",t="m"==t?"l":"L"),"o"==a&&1==o.length&&i.push([t,o[0]]),"r"==a)i.push([t].concat(o));else for(;o.length>=r[a]&&(i.push([t].concat(o.splice(0,r[a]))),r[a]););}),i.toString=n.path.toString,t.arr=n.path.clone(i),i};var he=n.parseTransformString=function(e){if(!e)return null;var t=[];return o(e,"array")&&o(e[0],"array")&&(t=n.path.clone(e)),t.length||T(e).replace(W,function(e,r,n){var i=[];r.toLowerCase(),n.replace(Z,function(e,t){t&&i.push(+t)}),t.push([r].concat(i))}),t.toString=n.path.toString,t};n._.svgTransform2string=u,n._.rgTransform=new RegExp("^[a-z]["+H+"]*-?\\.?\\d","i"),n._.transform2matrix=h,n._unit2px=p;var de=B.doc.contains||B.doc.compareDocumentPosition?function(e,t){var r=9==e.nodeType?e.documentElement:e,n=t&&t.parentNode;return e==n||!(!n||1!=n.nodeType||!(r.contains?r.contains(n):e.compareDocumentPosition&&16&e.compareDocumentPosition(n)))}:function(e,t){if(t)for(;t;)if((t=t.parentNode)==e)return!0;return!1};n._.getSomeDefs=f,n.select=function(e){return w(B.doc.querySelector(e))},n.selectAll=function(e){for(var t=B.doc.querySelectorAll(e),r=(n.set||Array)(),i=0;i<t.length;i++)r.push(w(t[i]));return r},function(e){function a(e,t,r){return function(n){var i=n.slice(e,t);return 1==i.length&&(i=i[0]),r?r(i):i}}function s(e){return function(){var t=e?"<"+this.type:"",r=this.node.attributes,n=this.node.childNodes;if(e)for(var i=0,o=r.length;o>i;i++)t+=" "+r[i].name+'="'+r[i].value.replace(/"/g,'\\"')+'"';if(n.length){for(e&&(t+=">"),i=0,o=n.length;o>i;i++)3==n[i].nodeType?t+=n[i].nodeValue:1==n[i].nodeType&&(t+=w(n[i]).toString());e&&(t+="</"+this.type+">")}else e&&(t+="/>");return t}}e.attr=function(e,r){var n=this;if(n.node,!e)return n;if(o(e,"string")){if(!(arguments.length>1))return y(t("snap.util.getattr."+e,n));var i={};i[e]=r,e=i}for(var a in e)e[q](a)&&t("snap.util.attr."+a,n,e[a]);return n},e.getBBox=function(e){var t=this;if("use"==t.type&&(t=t.original),t.removed)return{};var r=t._;return e?(r.bboxwt=n.path.get[t.type]?n.path.getBBox(t.realPath=n.path.get[t.type](t)):n._.box(t.node.getBBox()),n._.box(r.bboxwt)):(t.realPath=(n.path.get[t.type]||n.path.get.deflt)(t),r.bbox=n.path.getBBox(n.path.map(t.realPath,t.matrix)),n._.box(r.bbox))};var l=function(){return this.string};e.transform=function(e){var t=this._;if(null==e){var r=new c(this.node.getCTM()),n=d(this),o=n.toTransformString();return{string:T(n)==T(this.matrix)?t.transform:o,globalMatrix:r,localMatrix:n,diffMatrix:r.clone().add(n.invert()),global:r.toTransformString(),local:o,toString:l}}return e instanceof c&&(e=e.toTransformString()),d(this,e),this.node&&("linearGradient"==this.type||"radialGradient"==this.type?i(this.node,{gradientTransform:this.matrix}):"pattern"==this.type?i(this.node,{patternTransform:this.matrix}):i(this.node,{transform:this.matrix})),this},e.parent=function(){return w(this.node.parentNode)},e.append=e.add=function(e){if(e){if("set"==e.type){var t=this;return e.forEach(function(e){t.add(e)}),this}e=w(e),this.node.appendChild(e.node),e.paper=this.paper}return this},e.appendTo=function(e){return e&&(e=w(e)).append(this),this},e.prepend=function(e){if(e){var t=(e=w(e)).parent();this.node.insertBefore(e.node,this.node.firstChild),this.add&&this.add(),e.paper=this.paper,this.parent()&&this.parent().add(),t&&t.add()}return this},e.prependTo=function(e){return(e=w(e)).prepend(this),this},e.before=function(e){if("set"==e.type){var t=this;return e.forEach(function(e){var r=e.parent();t.node.parentNode.insertBefore(e.node,t.node),r&&r.add()}),this.parent().add(),this}var r=(e=w(e)).parent();return this.node.parentNode.insertBefore(e.node,this.node),this.parent()&&this.parent().add(),r&&r.add(),e.paper=this.paper,this},e.after=function(e){var t=(e=w(e)).parent();return this.node.nextSibling?this.node.parentNode.insertBefore(e.node,this.node.nextSibling):this.node.parentNode.appendChild(e.node),this.parent()&&this.parent().add(),t&&t.add(),e.paper=this.paper,this},e.insertBefore=function(e){e=w(e);var t=this.parent();return e.node.parentNode.insertBefore(this.node,e.node),this.paper=e.paper,t&&t.add(),e.parent()&&e.parent().add(),this},e.insertAfter=function(e){e=w(e);var t=this.parent();return e.node.parentNode.insertBefore(this.node,e.node.nextSibling),this.paper=e.paper,t&&t.add(),e.parent()&&e.parent().add(),this},e.remove=function(){var e=this.parent();return this.node.parentNode&&this.node.parentNode.removeChild(this.node),delete this.paper,this.removed=!0,e&&e.add(),this},e.select=function(e){return w(this.node.querySelector(e))},e.selectAll=function(e){for(var t=this.node.querySelectorAll(e),r=(n.set||Array)(),i=0;i<t.length;i++)r.push(w(t[i]));return r},e.asPX=function(e,t){return null==t&&(t=this.attr(e)),+p(this,e,t)},e.use=function(){var e,t=this.node.id;return t||(t=this.id,i(this.node,{id:t})),i((e="linearGradient"==this.type||"radialGradient"==this.type||"pattern"==this.type?b(this.type,this.node.parentNode):b("use",this.node.parentNode)).node,{"xlink:href":"#"+t}),e.original=this,e},e.clone=function(){var e=w(this.node.cloneNode(!0));return i(e.node,"id")&&i(e.node,{id:e.id}),function(e){function t(e,t){var r=i(e.node,t);(r=(r=r&&r.match(a))&&r[2])&&"#"==r.charAt()&&(r=r.substring(1))&&(l[r]=(l[r]||[]).concat(function(r){var n={};n[t]=ne(r),i(e.node,n)}))}function r(e){var t=i(e.node,"xlink:href");t&&"#"==t.charAt()&&(t=t.substring(1))&&(l[t]=(l[t]||[]).concat(function(t){e.attr("xlink:href","#"+t)}))}for(var n,o=e.selectAll("*"),a=/^\s*url\(("|'|)(.*)\1\)\s*$/,s=[],l={},c=0,u=o.length;u>c;c++){t(n=o[c],"fill"),t(n,"stroke"),t(n,"filter"),t(n,"mask"),t(n,"clip-path"),r(n);var h=i(n.node,"id");h&&(i(n.node,{id:n.id}),s.push({old:h,id:n.id}))}for(c=0,u=s.length;u>c;c++){var d=l[s[c].old];if(d)for(var f=0,p=d.length;p>f;f++)d[f](s[c].id)}}(e),e.insertAfter(this),e},e.toDefs=function(){return f(this).appendChild(this.node),this},e.pattern=function(e,t,r,n){var a=b("pattern",f(this));return null==e&&(e=this.getBBox()),o(e,"object")&&"x"in e&&(t=e.y,r=e.width,n=e.height,e=e.x),i(a.node,{x:e,y:t,width:r,height:n,patternUnits:"userSpaceOnUse",id:a.id,viewBox:[e,t,r,n].join(" ")}),a.node.appendChild(this.node),a},e.marker=function(e,t,r,n,a,s){var l=b("marker",f(this));return null==e&&(e=this.getBBox()),o(e,"object")&&"x"in e&&(t=e.y,r=e.width,n=e.height,a=e.refX||e.cx,s=e.refY||e.cy,e=e.x),i(l.node,{viewBox:[e,t,r,n].join(" "),markerWidth:r,markerHeight:n,orient:"auto",refX:a||0,refY:s||0,id:l.id}),l.node.appendChild(this.node),l};var u=function(e,t,n,i){"function"!=typeof n||n.length||(i=n,n=r.linear),this.attr=e,this.dur=t,n&&(this.easing=n),i&&(this.callback=i)};n.animation=function(e,t,r,n){return new u(e,t,r,n)},e.inAnim=function(){var e=this,t=[];for(var r in e.anims)e.anims[q](r)&&function(e){t.push({anim:new u(e._attrs,e.dur,e.easing,e._callback),curStatus:e.status(),status:function(t){return e.status(t)},stop:function(){e.stop()}})}(e.anims[r]);return t},n.animate=function(e,n,i,o,a,s){"function"!=typeof a||a.length||(s=a,a=r.linear);var l=r.time(),c=r(e,n,l,l+o,r.time,i,a);return s&&t.once("mina.finish."+c.id,s),c},e.stop=function(){for(var e=this.inAnim(),t=0,r=e.length;r>t;t++)e[t].stop();return this},e.animate=function(e,n,i,s){"function"!=typeof i||i.length||(s=i,i=r.linear),e instanceof u&&(s=e.callback,n=(i=e.easing).dur,e=e.attr);var l,c,h,d,f=[],p=[],g={},m=this;for(var v in e)if(e[q](v)){m.equal?(l=(d=m.equal(v,T(e[v]))).from,c=d.to,h=d.f):(l=+m.attr(v),c=+e[v]);var y=o(l,"array")?l.length:1;g[v]=a(f.length,f.length+y,h),f=f.concat(l),p=p.concat(c)}var _=r.time(),b=r(f,p,_,_+n,r.time,function(e){var t={};for(var r in g)g[q](r)&&(t[r]=g[r](e));m.attr(t)},i);return m.anims[b.id]=b,b._attrs=e,b._callback=s,t.once("mina.finish."+b.id,function(){delete m.anims[b.id],s&&s.call(m)}),t.once("mina.stop."+b.id,function(){delete m.anims[b.id]}),m};var h={};e.data=function(e,r){var i=h[this.id]=h[this.id]||{};if(0==arguments.length)return t("snap.data.get."+this.id,this,i,null),i;if(1==arguments.length){if(n.is(e,"object")){for(var o in e)e[q](o)&&this.data(o,e[o]);return this}return t("snap.data.get."+this.id,this,i[e],e),i[e]}return i[e]=r,t("snap.data.set."+this.id,this,r,e),this},e.removeData=function(e){return null==e?h[this.id]={}:h[this.id]&&delete h[this.id][e],this},e.outerSVG=e.toString=s(1),e.innerSVG=s()}(v.prototype),n.parse=function(e){var t=B.doc.createDocumentFragment(),r=!0,n=B.doc.createElement("div");if((e=T(e)).match(/^\s*<\s*svg(?:\s|>)/)||(e="<svg>"+e+"</svg>",r=!1),n.innerHTML=e,e=n.getElementsByTagName("svg")[0])if(r)t=e;else for(;e.firstChild;)t.appendChild(e.firstChild);return n.innerHTML=O,new _(t)},_.prototype.select=v.prototype.select,_.prototype.selectAll=v.prototype.selectAll,n.fragment=function(){for(var e=Array.prototype.slice.call(arguments,0),t=B.doc.createDocumentFragment(),r=0,i=e.length;i>r;r++){var o=e[r];o.node&&o.node.nodeType&&t.appendChild(o.node),o.nodeType&&t.appendChild(o),"string"==typeof o&&t.appendChild(n.parse(o).node)}return new _(t)},function(e){e.el=function(e,t){return b(e,this.node).attr(t)},e.rect=function(e,t,r,n,i,a){var s;return null==a&&(a=i),o(e,"object")&&"x"in e?s=e:null!=e&&(s={x:e,y:t,width:r,height:n},null!=i&&(s.rx=i,s.ry=a)),this.el("rect",s)},e.circle=function(e,t,r){var n;return o(e,"object")&&"cx"in e?n=e:null!=e&&(n={cx:e,cy:t,r:r}),this.el("circle",n)},e.image=function(e,t,r,n,a){var s=b("image",this.node);if(o(e,"object")&&"src"in e)s.attr(e);else if(null!=e){var l={"xlink:href":e,preserveAspectRatio:"none"};null!=t&&null!=r&&(l.x=t,l.y=r),null!=n&&null!=a?(l.width=n,l.height=a):ie(e,function(){i(s.node,{width:this.offsetWidth,height:this.offsetHeight})}),i(s.node,l)}return s},e.ellipse=function(e,t,r,n){var i=b("ellipse",this.node);return o(e,"object")&&"cx"in e?i.attr(e):null!=e&&i.attr({cx:e,cy:t,rx:r,ry:n}),i},e.path=function(e){var t=b("path",this.node);return o(e,"object")&&!o(e,"array")?t.attr(e):e&&t.attr({d:e}),t},e.group=e.g=function(t){var r=b("g",this.node);for(var n in r.add=m,e)e[q](n)&&(r[n]=e[n]);return 1==arguments.length&&t&&!t.type?r.attr(t):arguments.length&&r.add(Array.prototype.slice.call(arguments,0)),r},e.text=function(e,t,r){var n=b("text",this.node);return o(e,"object")?n.attr(e):null!=e&&n.attr({x:e,y:t,text:r||""}),n},e.line=function(e,t,r,n){var i=b("line",this.node);return o(e,"object")?i.attr(e):null!=e&&i.attr({x1:e,x2:r,y1:t,y2:n}),i},e.polyline=function(e){arguments.length>1&&(e=Array.prototype.slice.call(arguments,0));var t=b("polyline",this.node);return o(e,"object")&&!o(e,"array")?t.attr(e):null!=e&&t.attr({points:e}),t},e.polygon=function(e){arguments.length>1&&(e=Array.prototype.slice.call(arguments,0));var t=b("polygon",this.node);return o(e,"object")&&!o(e,"array")?t.attr(e):null!=e&&t.attr({points:e}),t},e.gradient=function(e){return F(this.defs,e)},e.gradientLinear=function(e,t,r,n){return E(this.defs,e,t,r,n)},e.gradientRadial=function(e,t,r,n,i){return A(this.defs,e,t,r,n,i)},e.toString=function(){var e,t=B.doc.createDocumentFragment(),r=B.doc.createElement("div"),n=this.node.cloneNode(!0);return t.appendChild(r),r.appendChild(n),i(n,{xmlns:te}),e=r.innerHTML,t.removeChild(t.firstChild),e},e.clear=function(){for(var e,t=this.node.firstChild;t;)e=t.nextSibling,"defs"!=t.tagName&&t.parentNode.removeChild(t),t=e}}(x.prototype),n.ajax=function(e,r,n,i){var a=new XMLHttpRequest,s=K();if(a){if(o(r,"function"))i=n,n=r,r=null;else if(o(r,"object")){var l=[];for(var c in r)r.hasOwnProperty(c)&&l.push(encodeURIComponent(c)+"="+encodeURIComponent(r[c]));r=l.join("&")}return a.open(r?"POST":"GET",e,!0),a.setRequestHeader("X-Requested-With","XMLHttpRequest"),r&&a.setRequestHeader("Content-type","application/x-www-form-urlencoded"),n&&(t.once("snap.ajax."+s+".0",n),t.once("snap.ajax."+s+".200",n),t.once("snap.ajax."+s+".304",n)),a.onreadystatechange=function(){4==a.readyState&&t("snap.ajax."+s+"."+a.status,i,a)},4==a.readyState?a:(a.send(r),a)}},n.load=function(e,t,r){n.ajax(e,function(e){var i=n.parse(e.responseText);r?t.call(r,i):t(i)})},t.on("snap.util.attr.mask",function(e){if(e instanceof v||e instanceof _){if(t.stop(),e instanceof _&&1==e.node.childNodes.length&&(e=e.node.firstChild,f(this).appendChild(e),e=w(e)),"mask"==e.type)var r=e;else(r=b("mask",f(this))).node.appendChild(e.node),!r.node.id&&i(r.node,{id:r.id});i(this.node,{mask:ne(r.id)})}}),function(e){t.on("snap.util.attr.clip",e),t.on("snap.util.attr.clip-path",e),t.on("snap.util.attr.clipPath",e)}(function(e){if(e instanceof v||e instanceof _){if(t.stop(),"clipPath"==e.type)var r=e;else(r=b("clipPath",f(this))).node.appendChild(e.node),!r.node.id&&i(r.node,{id:r.id});i(this.node,{"clip-path":ne(r.id)})}}),t.on("snap.util.attr.fill",L("fill")),t.on("snap.util.attr.stroke",L("stroke"));var fe=/^([lr])(?:\(([^)]*)\))?(.*)$/i;t.on("snap.util.grad.parse",function(e){var t=(e=T(e)).match(fe);if(!t)return null;var r=t[1],n=t[2],i=t[3];return 1==(n=n.split(/\s*,\s*/).map(function(e){return+e==e?+e:e})).length&&0==n[0]&&(n=[]),{type:r,params:n,stops:i=(i=i.split("-")).map(function(e){var t={color:(e=e.split(":"))[0]};return e[1]&&(t.offset=e[1]),t})}}),t.on("snap.util.attr.d",function(e){t.stop(),o(e,"array")&&o(e[0],"array")&&(e=n.path.toString.call(e)),(e=T(e)).match(/[ruo]/i)&&(e=n.path.toAbsolute(e)),i(this.node,{d:e})})(-1),t.on("snap.util.attr.#text",function(e){t.stop(),e=T(e);for(var r=B.doc.createTextNode(e);this.node.firstChild;)this.node.removeChild(this.node.firstChild);this.node.appendChild(r)})(-1),t.on("snap.util.attr.path",function(e){t.stop(),this.attr({d:e})})(-1),t.on("snap.util.attr.viewBox",function(e){var r;r=o(e,"object")&&"x"in e?[e.x,e.y,e.width,e.height].join(" "):o(e,"array")?e.join(" "):e,i(this.node,{viewBox:r}),t.stop()})(-1),t.on("snap.util.attr.transform",function(e){this.transform(e),t.stop()})(-1),t.on("snap.util.attr.r",function(e){"rect"==this.type&&(t.stop(),i(this.node,{rx:e,ry:e}))})(-1),t.on("snap.util.attr.textpath",function(e){if(t.stop(),"text"==this.type){var r,n,a;if(!e&&this.textPath){for(n=this.textPath;n.node.firstChild;)this.node.appendChild(n.node.firstChild);return n.remove(),void delete this.textPath}if(o(e,"string")){var s=f(this),l=w(s.parentNode).path(e);s.appendChild(l.node),r=l.id,l.attr({id:r})}else(e=w(e))instanceof v&&((r=e.attr("id"))||(r=e.id,e.attr({id:r})));if(r)if(n=this.textPath,a=this.node,n)n.attr({"xlink:href":"#"+r});else{for(n=i("textPath",{"xlink:href":"#"+r});a.firstChild;)n.appendChild(a.firstChild);a.appendChild(n),this.textPath=w(n)}}})(-1),t.on("snap.util.attr.text",function(e){if("text"==this.type){for(var r=this.node,n=function(e){var t=i("tspan");if(o(e,"array"))for(var r=0;r<e.length;r++)t.appendChild(n(e[r]));else t.appendChild(B.doc.createTextNode(e));return t.normalize&&t.normalize(),t};r.firstChild;)r.removeChild(r.firstChild);for(var a=n(e);a.firstChild;)r.appendChild(a.firstChild)}t.stop()})(-1);var pe={"alignment-baseline":0,"baseline-shift":0,clip:0,"clip-path":0,"clip-rule":0,color:0,"color-interpolation":0,"color-interpolation-filters":0,"color-profile":0,"color-rendering":0,cursor:0,direction:0,display:0,"dominant-baseline":0,"enable-background":0,fill:0,"fill-opacity":0,"fill-rule":0,filter:0,"flood-color":0,"flood-opacity":0,font:0,"font-family":0,"font-size":0,"font-size-adjust":0,"font-stretch":0,"font-style":0,"font-variant":0,"font-weight":0,"glyph-orientation-horizontal":0,"glyph-orientation-vertical":0,"image-rendering":0,kerning:0,"letter-spacing":0,"lighting-color":0,marker:0,"marker-end":0,"marker-mid":0,"marker-start":0,mask:0,opacity:0,overflow:0,"pointer-events":0,"shape-rendering":0,"stop-color":0,"stop-opacity":0,stroke:0,"stroke-dasharray":0,"stroke-dashoffset":0,"stroke-linecap":0,"stroke-linejoin":0,"stroke-miterlimit":0,"stroke-opacity":0,"stroke-width":0,"text-anchor":0,"text-decoration":0,"text-rendering":0,"unicode-bidi":0,visibility:0,"word-spacing":0,"writing-mode":0};t.on("snap.util.attr",function(e){var r=t.nt(),n={};n[r=r.substring(r.lastIndexOf(".")+1)]=e;var o=r.replace(/-(\w)/gi,function(e,t){return t.toUpperCase()}),a=r.replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()});pe[q](a)?this.node.style[o]=null==e?O:e:i(this.node,n)}),t.on("snap.util.getattr.transform",function(){return t.stop(),this.transform()})(-1),t.on("snap.util.getattr.textpath",function(){return t.stop(),this.textPath})(-1),function(){function e(e){return function(){t.stop();var r=B.doc.defaultView.getComputedStyle(this.node,null).getPropertyValue("marker-"+e);return"none"==r?r:n(B.doc.getElementById(r.match(G)[1]))}}function r(e){return function(r){t.stop();var n="marker"+e.charAt(0).toUpperCase()+e.substring(1);if(""!=r&&r){if("marker"==r.type){var o=r.node.id;return o||i(r.node,{id:r.id}),void(this.node.style[n]=ne(o))}}else this.node.style[n]="none"}}t.on("snap.util.getattr.marker-end",e("end"))(-1),t.on("snap.util.getattr.markerEnd",e("end"))(-1),t.on("snap.util.getattr.marker-start",e("start"))(-1),t.on("snap.util.getattr.markerStart",e("start"))(-1),t.on("snap.util.getattr.marker-mid",e("mid"))(-1),t.on("snap.util.getattr.markerMid",e("mid"))(-1),t.on("snap.util.attr.marker-end",r("end"))(-1),t.on("snap.util.attr.markerEnd",r("end"))(-1),t.on("snap.util.attr.marker-start",r("start"))(-1),t.on("snap.util.attr.markerStart",r("start"))(-1),t.on("snap.util.attr.marker-mid",r("mid"))(-1),t.on("snap.util.attr.markerMid",r("mid"))(-1)}(),t.on("snap.util.getattr.r",function(){return"rect"==this.type&&i(this.node,"rx")==i(this.node,"ry")?(t.stop(),i(this.node,"rx")):void 0})(-1),t.on("snap.util.getattr.text",function(){if("text"==this.type||"tspan"==this.type){t.stop();var e=function e(t){for(var r=[],n=t.childNodes,i=0,o=n.length;o>i;i++){var a=n[i];3==a.nodeType&&r.push(a.nodeValue),"tspan"==a.tagName&&(1==a.childNodes.length&&3==a.firstChild.nodeType?r.push(a.firstChild.nodeValue):r.push(e(a)))}return r}(this.node);return 1==e.length?e[0]:e}})(-1),t.on("snap.util.getattr.#text",function(){return this.node.textContent})(-1),t.on("snap.util.getattr.viewBox",function(){t.stop();var e=i(this.node,"viewBox").split(V);return n._.box(+e[0],+e[1],+e[2],+e[3])})(-1),t.on("snap.util.getattr.points",function(){var e=i(this.node,"points");return t.stop(),e.split(V)}),t.on("snap.util.getattr.path",function(){var e=i(this.node,"d");return t.stop(),e}),t.on("snap.util.getattr",function(){var e=t.nt(),r=(e=e.substring(e.lastIndexOf(".")+1)).replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()});return pe[q](r)?B.doc.defaultView.getComputedStyle(this.node,null).getPropertyValue(r):i(this.node,e)});var ge=function(e){var t=e.getBoundingClientRect(),r=e.ownerDocument,n=r.body,i=r.documentElement,o=i.clientTop||n.clientTop||0,a=i.clientLeft||n.clientLeft||0;return{y:t.top+(g.win.pageYOffset||i.scrollTop||n.scrollTop)-o,x:t.left+(g.win.pageXOffset||i.scrollLeft||n.scrollLeft)-a}};return n.getElementByPoint=function(e,t){var r=(this.canvas,B.doc.elementFromPoint(e,t));if(B.win.opera&&"svg"==r.tagName){var n=ge(r),i=r.createSVGRect();i.x=e-n.x,i.y=t-n.y,i.width=i.height=1;var o=r.getIntersectionList(i,null);o.length&&(r=o[o.length-1])}return r?w(r):null},n.plugin=function(e){e(n,v,x,B)},B.win.Snap=n,n}();return n.plugin(function(e,t){function r(e){var t=r.ps=r.ps||{};return t[e]?t[e].sleep=100:t[e]={sleep:100},setTimeout(function(){for(var r in t)t[q](r)&&r!=e&&(t[r].sleep--,!t[r].sleep&&delete t[r])}),t[e]}function n(e,t,r,n){return null==e&&(e=t=r=n=0),null==t&&(t=e.y,r=e.width,n=e.height,e=e.x),{x:e,y:t,width:r,w:r,height:n,h:n,x2:e+r,y2:t+n,cx:e+r/2,cy:t+n/2,r1:M.min(r,n)/2,r2:M.max(r,n)/2,r0:M.sqrt(r*r+n*n)/2,path:y(e,t,r,n),vb:[e,t,r,n].join(" ")}}function i(){return this.join(",").replace(T,"$1")}function o(e){var t=B(e);return t.toString=i,t}function a(e,t,r,n,i,o,a,s,c){return null==c?f(e,t,r,n,i,o,a,s):l(e,t,r,n,i,o,a,s,function(e,t,r,n,i,o,a,s,l){if(!(0>l||f(e,t,r,n,i,o,a,s)<l)){var c,u=.5,h=1-u;for(c=f(e,t,r,n,i,o,a,s,h);P(c-l)>.01;)u/=2,c=f(e,t,r,n,i,o,a,s,h+=(l>c?1:-1)*u);return h}}(e,t,r,n,i,o,a,s,c))}function s(r,n){function i(e){return+(+e).toFixed(3)}return e._.cacher(function(e,o,s){e instanceof t&&(e=e.attr("d"));for(var c,u,h,d,f,p="",g={},m=0,v=0,y=(e=F(e)).length;y>v;v++){if("M"==(h=e[v])[0])c=+h[1],u=+h[2];else{if(m+(d=a(c,u,h[1],h[2],h[3],h[4],h[5],h[6]))>o){if(n&&!g.start){if(p+=["C"+i((f=a(c,u,h[1],h[2],h[3],h[4],h[5],h[6],o-m)).start.x),i(f.start.y),i(f.m.x),i(f.m.y),i(f.x),i(f.y)],s)return p;g.start=p,p=["M"+i(f.x),i(f.y)+"C"+i(f.n.x),i(f.n.y),i(f.end.x),i(f.end.y),i(h[5]),i(h[6])].join(),m+=d,c=+h[5],u=+h[6];continue}if(!r&&!n)return a(c,u,h[1],h[2],h[3],h[4],h[5],h[6],o-m)}m+=d,c=+h[5],u=+h[6]}p+=h.shift()+h}return g.end=p,r?m:n?g:l(c,u,h[0],h[1],h[2],h[3],h[4],h[5],1)},null,e._.clone)}function l(e,t,r,n,i,o,a,s,l){var c=1-l,u=I(c,3),h=I(c,2),d=l*l,f=d*l,p=e+2*l*(r-e)+d*(i-2*r+e),g=t+2*l*(n-t)+d*(o-2*n+t),m=r+2*l*(i-r)+d*(a-2*i+r),v=n+2*l*(o-n)+d*(s-2*o+n);return{x:u*e+3*h*l*r+3*c*l*l*i+f*a,y:u*t+3*h*l*n+3*c*l*l*o+f*s,m:{x:p,y:g},n:{x:m,y:v},start:{x:c*e+l*r,y:c*t+l*n},end:{x:c*i+l*a,y:c*o+l*s},alpha:90-180*M.atan2(p-m,g-v)/D}}function c(t,r,i,o,a,s,l,c){e.is(t,"array")||(t=[t,r,i,o,a,s,l,c]);var u=S.apply(null,t);return n(u.min.x,u.min.y,u.max.x-u.min.x,u.max.y-u.min.y)}function u(e,t,r){return t>=e.x&&t<=e.x+e.width&&r>=e.y&&r<=e.y+e.height}function h(e,t){return e=n(e),u(t=n(t),e.x,e.y)||u(t,e.x2,e.y)||u(t,e.x,e.y2)||u(t,e.x2,e.y2)||u(e,t.x,t.y)||u(e,t.x2,t.y)||u(e,t.x,t.y2)||u(e,t.x2,t.y2)||(e.x<t.x2&&e.x>t.x||t.x<e.x2&&t.x>e.x)&&(e.y<t.y2&&e.y>t.y||t.y<e.y2&&t.y>e.y)}function d(e,t,r,n,i){return e*(e*(-3*t+9*r-9*n+3*i)+6*t-12*r+6*n)-3*t+3*r}function f(e,t,r,n,i,o,a,s,l){null==l&&(l=1);for(var c=(l=l>1?1:0>l?0:l)/2,u=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],h=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],f=0,p=0;12>p;p++){var g=c*u[p]+c,m=d(g,e,r,i,a),v=d(g,t,n,o,s),y=m*m+v*v;f+=h[p]*M.sqrt(y)}return c*f}function p(e,t,r,n,i,o,a,s){if(!(U(e,r)<N(i,a)||N(e,r)>U(i,a)||U(t,n)<N(o,s)||N(t,n)>U(o,s))){var l=(e-r)*(o-s)-(t-n)*(i-a);if(l){var c=((e*n-t*r)*(i-a)-(e-r)*(i*s-o*a))/l,u=((e*n-t*r)*(o-s)-(t-n)*(i*s-o*a))/l,h=+c.toFixed(2),d=+u.toFixed(2);if(!(h<+N(e,r).toFixed(2)||h>+U(e,r).toFixed(2)||h<+N(i,a).toFixed(2)||h>+U(i,a).toFixed(2)||d<+N(t,n).toFixed(2)||d>+U(t,n).toFixed(2)||d<+N(o,s).toFixed(2)||d>+U(o,s).toFixed(2)))return{x:c,y:u}}}}function g(e,t,r){if(!h(c(e),c(t)))return r?0:[];for(var n=~~(f.apply(0,e)/5),i=~~(f.apply(0,t)/5),o=[],a=[],s={},u=r?0:[],d=0;n+1>d;d++){var g=l.apply(0,e.concat(d/n));o.push({x:g.x,y:g.y,t:d/n})}for(d=0;i+1>d;d++)g=l.apply(0,t.concat(d/i)),a.push({x:g.x,y:g.y,t:d/i});for(d=0;n>d;d++)for(var m=0;i>m;m++){var v=o[d],y=o[d+1],_=a[m],b=a[m+1],x=P(y.x-v.x)<.001?"y":"x",w=P(b.x-_.x)<.001?"y":"x",C=p(v.x,v.y,y.x,y.y,_.x,_.y,b.x,b.y);if(C){if(s[C.x.toFixed(4)]==C.y.toFixed(4))continue;s[C.x.toFixed(4)]=C.y.toFixed(4);var k=v.t+P((C[x]-v[x])/(y[x]-v[x]))*(y.t-v.t),S=_.t+P((C[w]-_[w])/(b[w]-_[w]))*(b.t-_.t);k>=0&&1>=k&&S>=0&&1>=S&&(r?u++:u.push({x:C.x,y:C.y,t1:k,t2:S}))}}return u}function m(e,t,r){e=F(e),t=F(t);for(var n,i,o,a,s,l,c,u,h,d,f=r?0:[],p=0,m=e.length;m>p;p++){var v=e[p];if("M"==v[0])n=s=v[1],i=l=v[2];else{"C"==v[0]?(n=(h=[n,i].concat(v.slice(1)))[6],i=h[7]):(h=[n,i,n,i,s,l,s,l],n=s,i=l);for(var y=0,_=t.length;_>y;y++){var b=t[y];if("M"==b[0])o=c=b[1],a=u=b[2];else{"C"==b[0]?(o=(d=[o,a].concat(b.slice(1)))[6],a=d[7]):(d=[o,a,o,a,c,u,c,u],o=c,a=u);var x=g(h,d,r);if(r)f+=x;else{for(var w=0,C=x.length;C>w;w++)x[w].segment1=p,x[w].segment2=y,x[w].bez1=h,x[w].bez2=d;f=f.concat(x)}}}}}return f}function v(e){var t=r(e);if(t.bbox)return B(t.bbox);if(!e)return n();for(var i,o=0,a=0,s=[],l=[],c=0,u=(e=F(e)).length;u>c;c++)if("M"==(i=e[c])[0])o=i[1],a=i[2],s.push(o),l.push(a);else{var h=S(o,a,i[1],i[2],i[3],i[4],i[5],i[6]);s=s.concat(h.min.x,h.max.x),l=l.concat(h.min.y,h.max.y),o=i[5],a=i[6]}var d=N.apply(0,s),f=N.apply(0,l),p=n(d,f,U.apply(0,s)-d,U.apply(0,l)-f);return t.bbox=B(p),p}function y(e,t,r,n,o){if(o)return[["M",e+o,t],["l",r-2*o,0],["a",o,o,0,0,1,o,o],["l",0,n-2*o],["a",o,o,0,0,1,-o,o],["l",2*o-r,0],["a",o,o,0,0,1,-o,-o],["l",0,2*o-n],["a",o,o,0,0,1,o,-o],["z"]];var a=[["M",e,t],["l",r,0],["l",0,n],["l",-r,0],["z"]];return a.toString=i,a}function _(e,t,r,n,o){if(null==o&&null==n&&(n=r),null!=o)var a=Math.PI/180,s=e+r*Math.cos(-n*a),l=e+r*Math.cos(-o*a),c=[["M",s,t+r*Math.sin(-n*a)],["A",r,r,0,+(o-n>180),0,l,t+r*Math.sin(-o*a)]];else c=[["M",e,t],["m",0,-n],["a",r,n,0,1,1,0,2*n],["a",r,n,0,1,1,0,-2*n],["z"]];return c.toString=i,c}function b(t){var n=r(t);if(n.abs)return o(n.abs);if(L(t,"array")&&L(t&&t[0],"array")||(t=e.parsePathString(t)),!t||!t.length)return[["M",0,0]];var a,s=[],l=0,c=0,u=0,h=0,d=0;"M"==t[0][0]&&(u=l=+t[0][1],h=c=+t[0][2],d++,s[0]=["M",l,c]);for(var f,p,g=3==t.length&&"M"==t[0][0]&&"R"==t[1][0].toUpperCase()&&"Z"==t[2][0].toUpperCase(),m=d,v=t.length;v>m;m++){if(s.push(f=[]),(a=(p=t[m])[0])!=a.toUpperCase())switch(f[0]=a.toUpperCase(),f[0]){case"A":f[1]=p[1],f[2]=p[2],f[3]=p[3],f[4]=p[4],f[5]=p[5],f[6]=+(p[6]+l),f[7]=+(p[7]+c);break;case"V":f[1]=+p[1]+c;break;case"H":f[1]=+p[1]+l;break;case"R":for(var y=[l,c].concat(p.slice(1)),b=2,x=y.length;x>b;b++)y[b]=+y[b]+l,y[++b]=+y[b]+c;s.pop(),s=s.concat(E(y,g));break;case"O":s.pop(),(y=_(l,c,p[1],p[2])).push(y[0]),s=s.concat(y);break;case"U":s.pop(),s=s.concat(_(l,c,p[1],p[2],p[3])),f=["U"].concat(s[s.length-1].slice(-2));break;case"M":u=+p[1]+l,h=+p[2]+c;default:for(b=1,x=p.length;x>b;b++)f[b]=+p[b]+(b%2?l:c)}else if("R"==a)y=[l,c].concat(p.slice(1)),s.pop(),s=s.concat(E(y,g)),f=["R"].concat(p.slice(-2));else if("O"==a)s.pop(),(y=_(l,c,p[1],p[2])).push(y[0]),s=s.concat(y);else if("U"==a)s.pop(),s=s.concat(_(l,c,p[1],p[2],p[3])),f=["U"].concat(s[s.length-1].slice(-2));else for(var w=0,C=p.length;C>w;w++)f[w]=p[w];if("O"!=(a=a.toUpperCase()))switch(f[0]){case"Z":l=u,c=h;break;case"H":l=f[1];break;case"V":c=f[1];break;case"M":u=f[f.length-2],h=f[f.length-1];default:l=f[f.length-2],c=f[f.length-1]}}return s.toString=i,n.abs=o(s),s}function x(e,t,r,n){return[e,t,r,n,r,n]}function w(e,t,r,n,i,o){var a=1/3,s=2/3;return[a*e+s*r,a*t+s*n,a*i+s*r,a*o+s*n,i,o]}function C(t,r,n,i,o,a,s,l,c,u){var h,d=120*D/180,f=D/180*(+o||0),p=[],g=e._.cacher(function(e,t,r){return{x:e*M.cos(r)-t*M.sin(r),y:e*M.sin(r)+t*M.cos(r)}});if(u)S=u[0],F=u[1],w=u[2],k=u[3];else{t=(h=g(t,r,-f)).x,r=h.y,l=(h=g(l,c,-f)).x,c=h.y;var m=(M.cos(D/180*o),M.sin(D/180*o),(t-l)/2),v=(r-c)/2,y=m*m/(n*n)+v*v/(i*i);y>1&&(n*=y=M.sqrt(y),i*=y);var _=n*n,b=i*i,x=(a==s?-1:1)*M.sqrt(P((_*b-_*v*v-b*m*m)/(_*v*v+b*m*m))),w=x*n*v/i+(t+l)/2,k=x*-i*m/n+(r+c)/2,S=M.asin(((r-k)/i).toFixed(9)),F=M.asin(((c-k)/i).toFixed(9));S=w>t?D-S:S,F=w>l?D-F:F,0>S&&(S=2*D+S),0>F&&(F=2*D+F),s&&S>F&&(S-=2*D),!s&&F>S&&(F-=2*D)}var E=F-S;if(P(E)>d){var A=F,L=l,B=c;F=S+d*(s&&F>S?1:-1),p=C(l=w+n*M.cos(F),c=k+i*M.sin(F),n,i,o,0,s,L,B,[F,A,w,k])}E=F-S;var q=M.cos(S),T=M.sin(S),j=M.cos(F),N=M.sin(F),U=M.tan(E/4),I=4/3*n*U,O=4/3*i*U,z=[t,r],R=[t+I*T,r-O*q],G=[l+I*N,c-O*j],H=[l,c];if(R[0]=2*z[0]-R[0],R[1]=2*z[1]-R[1],u)return[R,G,H].concat(p);for(var V=[],X=0,Y=(p=[R,G,H].concat(p).join().split(",")).length;Y>X;X++)V[X]=X%2?g(p[X-1],p[X],f).y:g(p[X],p[X+1],f).x;return V}function k(e,t,r,n,i,o,a,s,l){var c=1-l;return{x:I(c,3)*e+3*I(c,2)*l*r+3*c*l*l*i+I(l,3)*a,y:I(c,3)*t+3*I(c,2)*l*n+3*c*l*l*o+I(l,3)*s}}function S(e,t,r,n,i,o,a,s){var l,c=i-2*r+e-(a-2*i+r),u=2*(r-e)-2*(i-r),h=e-r,d=(-u+M.sqrt(u*u-4*c*h))/2/c,f=(-u-M.sqrt(u*u-4*c*h))/2/c,p=[t,s],g=[e,a];return P(d)>"1e12"&&(d=.5),P(f)>"1e12"&&(f=.5),d>0&&1>d&&(l=k(e,t,r,n,i,o,a,s,d),g.push(l.x),p.push(l.y)),f>0&&1>f&&(l=k(e,t,r,n,i,o,a,s,f),g.push(l.x),p.push(l.y)),c=o-2*n+t-(s-2*o+n),h=t-n,d=(-(u=2*(n-t)-2*(o-n))+M.sqrt(u*u-4*c*h))/2/c,f=(-u-M.sqrt(u*u-4*c*h))/2/c,P(d)>"1e12"&&(d=.5),P(f)>"1e12"&&(f=.5),d>0&&1>d&&(l=k(e,t,r,n,i,o,a,s,d),g.push(l.x),p.push(l.y)),f>0&&1>f&&(l=k(e,t,r,n,i,o,a,s,f),g.push(l.x),p.push(l.y)),{min:{x:N.apply(0,g),y:N.apply(0,p)},max:{x:U.apply(0,g),y:U.apply(0,p)}}}function F(e,t){var n=!t&&r(e);if(!t&&n.curve)return o(n.curve);for(var i=b(e),a=t&&b(t),s={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},l={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},c=function(e,t){if(!e)return["C",t.x,t.y,t.x,t.y,t.x,t.y];switch(!(e[0]in{T:1,Q:1})&&(t.qx=t.qy=null),e[0]){case"M":t.X=e[1],t.Y=e[2];break;case"A":e=["C"].concat(C.apply(0,[t.x,t.y].concat(e.slice(1))));break;case"S":e=["C",t.x+(t.x-(t.bx||t.x)),t.y+(t.y-(t.by||t.y))].concat(e.slice(1));break;case"T":t.qx=t.x+(t.x-(t.qx||t.x)),t.qy=t.y+(t.y-(t.qy||t.y)),e=["C"].concat(w(t.x,t.y,t.qx,t.qy,e[1],e[2]));break;case"Q":t.qx=e[1],t.qy=e[2],e=["C"].concat(w(t.x,t.y,e[1],e[2],e[3],e[4]));break;case"L":e=["C"].concat(x(t.x,t.y,e[1],e[2]));break;case"H":e=["C"].concat(x(t.x,t.y,e[1],t.y));break;case"V":e=["C"].concat(x(t.x,t.y,t.x,e[1]));break;case"Z":e=["C"].concat(x(t.x,t.y,t.X,t.Y))}return e},u=function(e,t){if(e[t].length>7){e[t].shift();for(var r=e[t];r.length;)e.splice(t++,0,["C"].concat(r.splice(0,6)));e.splice(t,1),f=U(i.length,a&&a.length||0)}},h=function(e,t,r,n,o){e&&t&&"M"==e[o][0]&&"M"!=t[o][0]&&(t.splice(o,0,["M",n.x,n.y]),r.bx=0,r.by=0,r.x=e[o][1],r.y=e[o][2],f=U(i.length,a&&a.length||0))},d=0,f=U(i.length,a&&a.length||0);f>d;d++){i[d]=c(i[d],s),u(i,d),a&&(a[d]=c(a[d],l)),a&&u(a,d),h(i,a,s,l,d),h(a,i,l,s,d);var p=i[d],g=a&&a[d],m=p.length,v=a&&g.length;s.x=p[m-2],s.y=p[m-1],s.bx=j(p[m-4])||s.x,s.by=j(p[m-3])||s.y,l.bx=a&&(j(g[v-4])||l.x),l.by=a&&(j(g[v-3])||l.y),l.x=a&&g[v-2],l.y=a&&g[v-1]}return a||(n.curve=o(i)),a?[i,a]:i}function E(e,t){for(var r=[],n=0,i=e.length;i-2*!t>n;n+=2){var o=[{x:+e[n-2],y:+e[n-1]},{x:+e[n],y:+e[n+1]},{x:+e[n+2],y:+e[n+3]},{x:+e[n+4],y:+e[n+5]}];t?n?i-4==n?o[3]={x:+e[0],y:+e[1]}:i-2==n&&(o[2]={x:+e[0],y:+e[1]},o[3]={x:+e[2],y:+e[3]}):o[0]={x:+e[i-2],y:+e[i-1]}:i-4==n?o[3]=o[2]:n||(o[0]={x:+e[n],y:+e[n+1]}),r.push(["C",(-o[0].x+6*o[1].x+o[2].x)/6,(-o[0].y+6*o[1].y+o[2].y)/6,(o[1].x+6*o[2].x-o[3].x)/6,(o[1].y+6*o[2].y-o[3].y)/6,o[2].x,o[2].y])}return r}var A=t.prototype,L=e.is,B=e._.clone,q="hasOwnProperty",T=/,?([a-z]),?/gi,j=parseFloat,M=Math,D=M.PI,N=M.min,U=M.max,I=M.pow,P=M.abs,O=s(1),z=s(),R=s(0,1),G=e._unit2px,H={path:function(e){return e.attr("path")},circle:function(e){var t=G(e);return _(t.cx,t.cy,t.r)},ellipse:function(e){var t=G(e);return _(t.cx,t.cy,t.rx,t.ry)},rect:function(e){var t=G(e);return y(t.x,t.y,t.width,t.height,t.rx,t.ry)},image:function(e){var t=G(e);return y(t.x,t.y,t.width,t.height)},text:function(e){var t=e.node.getBBox();return y(t.x,t.y,t.width,t.height)},g:function(e){var t=e.node.getBBox();return y(t.x,t.y,t.width,t.height)},symbol:function(e){var t=e.getBBox();return y(t.x,t.y,t.width,t.height)},line:function(e){return"M"+[e.attr("x1"),e.attr("y1"),e.attr("x2"),e.attr("y2")]},polyline:function(e){return"M"+e.attr("points")},polygon:function(e){return"M"+e.attr("points")+"z"},svg:function(e){var t=e.node.getBBox();return y(t.x,t.y,t.width,t.height)},deflt:function(e){var t=e.node.getBBox();return y(t.x,t.y,t.width,t.height)}};e.path=r,e.path.getTotalLength=O,e.path.getPointAtLength=z,e.path.getSubpath=function(e,t,r){if(this.getTotalLength(e)-r<1e-6)return R(e,t).end;var n=R(e,r,1);return t?R(n,t).end:n},A.getTotalLength=function(){return this.node.getTotalLength?this.node.getTotalLength():void 0},A.getPointAtLength=function(e){return z(this.attr("d"),e)},A.getSubpath=function(t,r){return e.path.getSubpath(this.attr("d"),t,r)},e._.box=n,e.path.findDotsAtSegment=l,e.path.bezierBBox=c,e.path.isPointInsideBBox=u,e.path.isBBoxIntersect=h,e.path.intersection=function(e,t){return m(e,t)},e.path.intersectionNumber=function(e,t){return m(e,t,1)},e.path.isPointInside=function(e,t,r){var n=v(e);return u(n,t,r)&&1==m(e,[["M",t,r],["H",n.x2+10]],1)%2},e.path.getBBox=v,e.path.get=H,e.path.toRelative=function(t){var n=r(t),a=String.prototype.toLowerCase;if(n.rel)return o(n.rel);e.is(t,"array")&&e.is(t&&t[0],"array")||(t=e.parsePathString(t));var s=[],l=0,c=0,u=0,h=0,d=0;"M"==t[0][0]&&(u=l=t[0][1],h=c=t[0][2],d++,s.push(["M",l,c]));for(var f=d,p=t.length;p>f;f++){var g=s[f]=[],m=t[f];if(m[0]!=a.call(m[0]))switch(g[0]=a.call(m[0]),g[0]){case"a":g[1]=m[1],g[2]=m[2],g[3]=m[3],g[4]=m[4],g[5]=m[5],g[6]=+(m[6]-l).toFixed(3),g[7]=+(m[7]-c).toFixed(3);break;case"v":g[1]=+(m[1]-c).toFixed(3);break;case"m":u=m[1],h=m[2];default:for(var v=1,y=m.length;y>v;v++)g[v]=+(m[v]-(v%2?l:c)).toFixed(3)}else{g=s[f]=[],"m"==m[0]&&(u=m[1]+l,h=m[2]+c);for(var _=0,b=m.length;b>_;_++)s[f][_]=m[_]}var x=s[f].length;switch(s[f][0]){case"z":l=u,c=h;break;case"h":l+=+s[f][x-1];break;case"v":c+=+s[f][x-1];break;default:l+=+s[f][x-2],c+=+s[f][x-1]}}return s.toString=i,n.rel=o(s),s},e.path.toAbsolute=b,e.path.toCubic=F,e.path.map=function(e,t){if(!t)return e;var r,n,i,o,a,s,l;for(i=0,a=(e=F(e)).length;a>i;i++)for(o=1,s=(l=e[i]).length;s>o;o+=2)r=t.x(l[o],l[o+1]),n=t.y(l[o],l[o+1]),l[o]=r,l[o+1]=n;return e},e.path.toString=i,e.path.clone=o}),n.plugin(function(e){var t=Math.max,r=Math.min,n=function(e){if(this.items=[],this.length=0,this.type="set",e)for(var t=0,r=e.length;r>t;t++)e[t]&&(this[this.items.length]=this.items[this.items.length]=e[t],this.length++)},i=n.prototype;i.push=function(){for(var e,t,r=0,n=arguments.length;n>r;r++)(e=arguments[r])&&(this[t=this.items.length]=this.items[t]=e,this.length++);return this},i.pop=function(){return this.length&&delete this[this.length--],this.items.pop()},i.forEach=function(e,t){for(var r=0,n=this.items.length;n>r;r++)if(!1===e.call(t,this.items[r],r))return this;return this},i.remove=function(){for(;this.length;)this.pop().remove();return this},i.attr=function(e){for(var t=0,r=this.items.length;r>t;t++)this.items[t].attr(e);return this},i.clear=function(){for(;this.length;)this.pop()},i.splice=function(e,i){e=0>e?t(this.length+e,0):e,i=t(0,r(this.length-e,i));var o,a=[],s=[],l=[];for(o=2;o<arguments.length;o++)l.push(arguments[o]);for(o=0;i>o;o++)s.push(this[e+o]);for(;o<this.length-e;o++)a.push(this[e+o]);var c=l.length;for(o=0;o<c+a.length;o++)this.items[e+o]=this[e+o]=c>o?l[o]:a[o-c];for(o=this.items.length=this.length-=i-c;this[o];)delete this[o++];return new n(s)},i.exclude=function(e){for(var t=0,r=this.length;r>t;t++)if(this[t]==e)return this.splice(t,1),!0;return!1},i.insertAfter=function(e){for(var t=this.items.length;t--;)this.items[t].insertAfter(e);return this},i.getBBox=function(){for(var e=[],n=[],i=[],o=[],a=this.items.length;a--;)if(!this.items[a].removed){var s=this.items[a].getBBox();e.push(s.x),n.push(s.y),i.push(s.x+s.width),o.push(s.y+s.height)}return{x:e=r.apply(0,e),y:n=r.apply(0,n),x2:i=t.apply(0,i),y2:o=t.apply(0,o),width:i-e,height:o-n,cx:e+(i-e)/2,cy:n+(o-n)/2}},i.clone=function(e){e=new n;for(var t=0,r=this.items.length;r>t;t++)e.push(this.items[t].clone());return e},i.toString=function(){return"Snap‘s set"},i.type="set",e.set=function(){var e=new n;return arguments.length&&e.push.apply(e,Array.prototype.slice.call(arguments,0)),e}}),n.plugin(function(e,t){function r(e){var t=e[0];switch(t.toLowerCase()){case"t":return[t,0,0];case"m":return[t,1,0,0,1,0,0];case"r":return 4==e.length?[t,0,e[2],e[3]]:[t,0];case"s":return 5==e.length?[t,1,1,e[3],e[4]]:3==e.length?[t,1,1]:[t,1]}}function n(t,n,i){n=u(n).replace(/\.{3}|\u2026/g,t),t=e.parseTransformString(t)||[],n=e.parseTransformString(n)||[];for(var o,l,c,h,d=Math.max(t.length,n.length),f=[],p=[],g=0;d>g;g++){if(c=t[g]||r(n[g]),h=n[g]||r(c),c[0]!=h[0]||"r"==c[0].toLowerCase()&&(c[2]!=h[2]||c[3]!=h[3])||"s"==c[0].toLowerCase()&&(c[3]!=h[3]||c[4]!=h[4])){t=e._.transform2matrix(t,i()),n=e._.transform2matrix(n,i()),f=[["m",t.a,t.b,t.c,t.d,t.e,t.f]],p=[["m",n.a,n.b,n.c,n.d,n.e,n.f]];break}for(f[g]=[],p[g]=[],o=0,l=Math.max(c.length,h.length);l>o;o++)o in c&&(f[g][o]=c[o]),o in h&&(p[g][o]=h[o])}return{from:s(f),to:s(p),f:a(f)}}function i(e){return e}function o(t){return e.rgb(t[0],t[1],t[2])}function a(e){var t,r,n,i,o,a,s=0,l=[];for(t=0,r=e.length;r>t;t++){for(o="[",a=['"'+e[t][0]+'"'],n=1,i=e[t].length;i>n;n++)a[n]="val["+s+++"]";o+=a+"]",l[t]=o}return Function("val","return Snap.path.toString.call(["+l+"])")}function s(e){for(var t=[],r=0,n=e.length;n>r;r++)for(var i=1,o=e[r].length;o>i;i++)t.push(e[r][i]);return t}var l={},c=/[a-z]+$/i,u=String;l.stroke=l.fill="colour",t.prototype.equal=function(t,r){var h,d,f=u(this.attr(t)||""),p=this;if(f==+f&&r==+r)return{from:+f,to:+r,f:i};if("colour"==l[t])return h=e.color(f),d=e.color(r),{from:[h.r,h.g,h.b,h.opacity],to:[d.r,d.g,d.b,d.opacity],f:o};if("transform"==t||"gradientTransform"==t||"patternTransform"==t)return r instanceof e.Matrix&&(r=r.toTransformString()),e._.rgTransform.test(r)||(r=e._.svgTransform2string(r)),n(f,r,function(){return p.getBBox(1)});if("d"==t||"path"==t)return{from:s((h=e.path.toCubic(f,r))[0]),to:s(h[1]),f:a(h[0])};if("points"==t)return{from:h=u(f).split(","),to:d=u(r).split(","),f:function(e){return e}};var g=f.match(c),m=u(r).match(c);return g&&g==m?{from:parseFloat(f),to:parseFloat(r),f:function(e){return function(t){return+t.toFixed(3)+e}}(g)}:{from:this.asPX(t),to:this.asPX(t,r),f:i}}}),n.plugin(function(e,r,n,i){for(var o=r.prototype,a=("createTouch"in i.doc),s=["click","dblclick","mousedown","mousemove","mouseout","mouseover","mouseup","touchstart","touchmove","touchend","touchcancel"],l={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},c=function(e){var t="y"==e?"scrollTop":"scrollLeft";return i.doc.documentElement[t]||i.doc.body[t]},u=function(){this.returnValue=!1},h=function(){return this.originalEvent.preventDefault()},d=function(){this.cancelBubble=!0},f=function(){return this.originalEvent.stopPropagation()},p=i.doc.addEventListener?function(e,t,r,n){var i=a&&l[t]?l[t]:t,o=function(i){var o=c("y"),s=c("x");if(a&&l.hasOwnProperty(t))for(var u=0,d=i.targetTouches&&i.targetTouches.length;d>u;u++)if(i.targetTouches[u].target==e||e.contains(i.targetTouches[u].target)){var p=i;(i=i.targetTouches[u]).originalEvent=p,i.preventDefault=h,i.stopPropagation=f;break}var g=i.clientX+s,m=i.clientY+o;return r.call(n,i,g,m)};return t!==i&&e.addEventListener(t,o,!1),e.addEventListener(i,o,!1),function(){return t!==i&&e.removeEventListener(t,o,!1),e.removeEventListener(i,o,!1),!0}}:i.doc.attachEvent?function(e,t,r,n){var o=function(e){e=e||i.win.event;var t=c("y"),o=c("x"),a=e.clientX+o,s=e.clientY+t;return e.preventDefault=e.preventDefault||u,e.stopPropagation=e.stopPropagation||d,r.call(n,e,a,s)};return e.attachEvent("on"+t,o),function(){return e.detachEvent("on"+t,o),!0}}:void 0,g=[],m=function(r){for(var n,i=r.clientX,o=r.clientY,s=c("y"),l=c("x"),u=g.length;u--;){if(n=g[u],a){for(var h,d=r.touches&&r.touches.length;d--;)if((h=r.touches[d]).identifier==n.el._drag.id||n.el.node.contains(h.target)){i=h.clientX,o=h.clientY,(r.originalEvent?r.originalEvent:r).preventDefault();break}}else r.preventDefault();var f=n.el.node;e._.glob,f.nextSibling,f.parentNode,f.style.display,i+=l,o+=s,t("snap.drag.move."+n.el.id,n.move_scope||n.el,i-n.el._drag.x,o-n.el._drag.y,i,o,r)}},v=function(r){e.unmousemove(m).unmouseup(v);for(var n,i=g.length;i--;)(n=g[i]).el._drag={},t("snap.drag.end."+n.el.id,n.end_scope||n.start_scope||n.move_scope||n.el,r);g=[]},y=s.length;y--;)!function(t){e[t]=o[t]=function(r,n){return e.is(r,"function")&&(this.events=this.events||[],this.events.push({name:t,f:r,unbind:p(this.shape||this.node||i.doc,t,r,n||this)})),this},e["un"+t]=o["un"+t]=function(e){for(var r=this.events||[],n=r.length;n--;)if(r[n].name==t&&(r[n].f==e||!e))return r[n].unbind(),r.splice(n,1),!r.length&&delete this.events,this;return this}}(s[y]);o.hover=function(e,t,r,n){return this.mouseover(e,r).mouseout(t,n||r)},o.unhover=function(e,t){return this.unmouseover(e).unmouseout(t)};var _=[];o.drag=function(r,n,i,o,a,s){function l(l,c,u){(l.originalEvent||l).preventDefault(),this._drag.x=c,this._drag.y=u,this._drag.id=l.identifier,!g.length&&e.mousemove(m).mouseup(v),g.push({el:this,move_scope:o,start_scope:a,end_scope:s}),n&&t.on("snap.drag.start."+this.id,n),r&&t.on("snap.drag.move."+this.id,r),i&&t.on("snap.drag.end."+this.id,i),t("snap.drag.start."+this.id,a||o||this,c,u,l)}var c;return arguments.length?(this._drag={},_.push({el:this,start:l}),this.mousedown(l),this):this.drag(function(e,t){this.attr({transform:c+(c?"T":"t")+[e,t]})},function(){c=this.transform().local})},o.undrag=function(){for(var r=_.length;r--;)_[r].el==this&&(this.unmousedown(_[r].start),_.splice(r,1),t.unbind("snap.drag.*."+this.id));return!_.length&&e.unmousemove(m).unmouseup(v),this}}),n.plugin(function(e,r,n){var i=(r.prototype,n.prototype),o=/^\s*url\((.+)\)/,a=String,s=e._.$;e.filter={},i.filter=function(t){var n=this;"svg"!=n.type&&(n=n.paper);var i=e.parse(a(t)),o=e._.id(),l=(n.node.offsetWidth,n.node.offsetHeight,s("filter"));return s(l,{id:o,filterUnits:"userSpaceOnUse"}),l.appendChild(i.node),n.defs.appendChild(l),new r(l)},t.on("snap.util.getattr.filter",function(){t.stop();var r=s(this.node,"filter");if(r){var n=a(r).match(o);return n&&e.select(n[1])}}),t.on("snap.util.attr.filter",function(n){if(n instanceof r&&"filter"==n.type){t.stop();var i=n.node.id;i||(s(n.node,{id:n.id}),i=n.id),s(this.node,{filter:e.url(i)})}n&&"none"!=n||(t.stop(),this.node.removeAttribute("filter"))}),e.filter.blur=function(t,r){null==t&&(t=2);var n=null==r?t:[t,r];return e.format('<feGaussianBlur stdDeviation="{def}"/>',{def:n})},e.filter.blur.toString=function(){return this()},e.filter.shadow=function(t,r,n,i){return i=i||"#000",null==n&&(n=4),"string"==typeof n&&(i=n,n=4),null==t&&(t=0,r=2),null==r&&(r=t),i=e.color(i),e.format('<feGaussianBlur in="SourceAlpha" stdDeviation="{blur}"/><feOffset dx="{dx}" dy="{dy}" result="offsetblur"/><feFlood flood-color="{color}"/><feComposite in2="offsetblur" operator="in"/><feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge>',{color:i,dx:t,dy:r,blur:n})},e.filter.shadow.toString=function(){return this()},e.filter.grayscale=function(t){return null==t&&(t=1),e.format('<feColorMatrix type="matrix" values="{a} {b} {c} 0 0 {d} {e} {f} 0 0 {g} {b} {h} 0 0 0 0 0 1 0"/>',{a:.2126+.7874*(1-t),b:.7152-.7152*(1-t),c:.0722-.0722*(1-t),d:.2126-.2126*(1-t),e:.7152+.2848*(1-t),f:.0722-.0722*(1-t),g:.2126-.2126*(1-t),h:.0722+.9278*(1-t)})},e.filter.grayscale.toString=function(){return this()},e.filter.sepia=function(t){return null==t&&(t=1),e.format('<feColorMatrix type="matrix" values="{a} {b} {c} 0 0 {d} {e} {f} 0 0 {g} {h} {i} 0 0 0 0 0 1 0"/>',{a:.393+.607*(1-t),b:.769-.769*(1-t),c:.189-.189*(1-t),d:.349-.349*(1-t),e:.686+.314*(1-t),f:.168-.168*(1-t),g:.272-.272*(1-t),h:.534-.534*(1-t),i:.131+.869*(1-t)})},e.filter.sepia.toString=function(){return this()},e.filter.saturate=function(t){return null==t&&(t=1),e.format('<feColorMatrix type="saturate" values="{amount}"/>',{amount:1-t})},e.filter.saturate.toString=function(){return this()},e.filter.hueRotate=function(t){return t=t||0,e.format('<feColorMatrix type="hueRotate" values="{angle}"/>',{angle:t})},e.filter.hueRotate.toString=function(){return this()},e.filter.invert=function(t){return null==t&&(t=1),e.format('<feComponentTransfer><feFuncR type="table" tableValues="{amount} {amount2}"/><feFuncG type="table" tableValues="{amount} {amount2}"/><feFuncB type="table" tableValues="{amount} {amount2}"/></feComponentTransfer>',{amount:t,amount2:1-t})},e.filter.invert.toString=function(){return this()},e.filter.brightness=function(t){return null==t&&(t=1),e.format('<feComponentTransfer><feFuncR type="linear" slope="{amount}"/><feFuncG type="linear" slope="{amount}"/><feFuncB type="linear" slope="{amount}"/></feComponentTransfer>',{amount:t})},e.filter.brightness.toString=function(){return this()},e.filter.contrast=function(t){return null==t&&(t=1),e.format('<feComponentTransfer><feFuncR type="linear" slope="{amount}" intercept="{amount2}"/><feFuncG type="linear" slope="{amount}" intercept="{amount2}"/><feFuncB type="linear" slope="{amount}" intercept="{amount2}"/></feComponentTransfer>',{amount:t,amount2:.5-t/2})},e.filter.contrast.toString=function(){return this()}}),n}),Snap.plugin(function(e,t,r,n){function i(e,t,r){for(var n=0;n<t.length;n++)myEl=e.append(t[n]);r()}r.prototype.loadFilesDisplayOrdered=function(t,r,n){for(var o=0,a=t.length,s=new Array,l=this,c=0;c<a;c++)!function(){var u=c,h=t[u]+".svg";e.load(h,function(e){o++,n(e,h),s[u]=e,o>=a&&i(l,s,r)})}()}}),Object.size=function(e){var t,r=0;for(t in e)e.hasOwnProperty(t)&&r++;return r};var myUsername=!1,currentUser=!1,personnages={},personnageActuel=!1,fetchDb=function(){var e={credentials:"same-origin",headers:{accept:"application/json","Content-Type":"application/json"}},t=function(t,r,n){var i="/api/"+t,o={};return n||"string"!=typeof r||(n=r,r=!1),console.log("fetchDb",t,n||"get"),r&&(o.body=JSON.stringify(r),o.method="post"),n&&(o.method=n),window.fetch(i,Object.assign(o,e))};return["get","delete","head"].forEach(function(e){t[e]=function(r){return t(r,e)}}),["post","put"].forEach(function(e){t[e]=function(r,n){return t(r,n,e)}}),t.reject=function(e,t){var r=new Error(t||e.statusText);return r.statusText=e.statusText,r.status=e.status,r.url=e.url,Promise.reject(r)},t}();function deleteDbSession(){return fetchDb.delete("session").then(function(e){return e.json()})}function getDbSession(){return fetchDb("session").then(function(e){return e.ok?e.json():fetchDb.reject(e)}).then(function(e){return e.userCtx.name?e.userCtx.name:fetchDb.reject("Not connected")})}function getDbUser(e){return fetchDb("users/"+e).then(function(e){return e.json()})}function updateDbUser(e){return fetchDb.post("users",e).then(function(e){return console.log("resp.status",e.status),e.ok?e.json():409===e.status?fetchDb.reject(e,"Not saving, _rev fields don't match"):404===e.status?(loginMenu(),fetchDb.reject(e,"Not logged in.")):fetchDb.reject(e)})}function loginDbUser(e,t){return fetchDb.post("session",{name:e,password:t}).then(function(t){return 200===t.status?t.json():401===t.status?(determineErrorMessage(e),fetchDb.reject(t)):fetchDb.reject(t)})}function determineErrorMessage(e){var t=document.querySelector(".overlay--show");t.classList.contains("js-login")&&showErrorUsernamePasswordMismatch(),t.classList.contains("js-register")&&showErrorUsernameTaken(e)}function showErrorUsernamePasswordMismatch(){var e=document.querySelector(".overlay--show");console.log("currentOverlay",e);var t=e.querySelector(".overlay__error");console.log("errorBox");var r=t.querySelector(".overlay__error__text");clearInputFields(),r.innerHTML="Sorry, username/password mismatch. Please try again.",t.classList.add("overlay__error--show"),console.log("Sorry, username/password mismatch")}function createDbUser(e,t,r){return console.log("Create DB User"),fetchDb.post("users",{_id:"org.couchdb.user:"+e,roles:[],type:"user",name:e,password:t,email:r,createdAt:(new Date).toISOString(),cc:{personnages:{},personnageActuel:!1}}).then(function(t){return console.log("resp.status"),201===t.status?t.json():409===t.status?(showErrorUsernameTaken(e),t.json()):fetchDb.reject(t)})}function showErrorUsernameTaken(e){var t=document.querySelector(".overlay--show").querySelector(".overlay__error"),r='Username "'+e+'" is already taken. Try another.';t.querySelector(".overlay__error__text").innerHTML=r,t.classList.add("overlay__error--show"),console.log("C'est pris!"),clearInputUsername()}function whoami(e){e.preventDefault();var t=document.querySelector(".js-character-list");t.classList.add("overlay--show"),t.addEventListener("click",closeOverlay,!0)}function logout(e){e.preventDefault(),deleteDbSession().then(function(e){return currentUser=!1,personnages={},personnageActuel=!1,myUsername=!1,e}).catch(function(e){console.error("err4",e)}),logoutUI()}function logoutUI(){var e=document.querySelector(".logged");e&&(e.classList.remove("logged"),resetCharacters())}function loginMenu(e){e&&e.preventDefault();var t=document.querySelector(".js-login"),r=document.querySelector("#login-form"),n=t.querySelector(".first-input");t.classList.add("overlay--show"),r.addEventListener("submit",login,!0),t.addEventListener("click",closeLogin,!0),n.focus()}function closeLogin(e){var t=document.querySelector(".js-login"),r=t.querySelector(".cancel-btn"),n=e.target;if(n===t||n===r){var i=document.querySelector(".overlay--show");i&&(clearInputFields(),i.classList.remove("overlay--show"))}}function closeOverlay(e){var t=document.querySelector(".overlay--show"),r=t.querySelector(".cancel-btn"),n=e.target;n!==t&&n!==r||t&&(hideNewCharacterInputField(),t.classList.remove("overlay--show"))}function hideNewCharacterInputField(){var e=document.querySelector(".overlay--show").querySelector(".overlay__char-new--create");e&&(clearInputFields(),e.classList.remove("overlay__char-new--create"))}function clearInputFields(){for(var e=document.querySelector(".overlay--show"),t=e.querySelectorAll("input"),r=t.length,n=e.querySelector(".overlay__error--show");r--;)t[r].value="";n&&n.classList.remove("overlay__error--show")}function clearInputUsername(){document.querySelector(".overlay--show").querySelectorAll(".overlay__input__username")[0].value=""}function login(e){e.preventDefault();var t=e,r=t.target.children[0].lastElementChild.value,n=t.target.children[1].lastElementChild.value,i=document.querySelector(".overlay--show");r&&n?loginDbUser(r,n).then(function(){return myUsername=r,getDbUser(r)}).then(function(e){var t,r=(currentUser=e).cc.personnages[currentUser.cc.personnageActuel],n=[];for(t in r)n.push(encodeURIComponent(t)+"="+encodeURIComponent(r[t]));clearInputFields(),i.classList.remove("overlay--show"),manageCharacters(e)}).catch(function(e){console.error("err3",e)}):console.log("missing username or password.")}function inheritNewCharacter(){var e=document.querySelector(".js-login-new-character"),t=hash.get("sex"),r=document.querySelector(".js-continue-character"),n=document.querySelector(".js-load-character");t&&(n.addEventListener("click",loadCharacter,!1),r.addEventListener("click",continueNewCharacter,!1),e.classList.add("overlay--show"),e.addEventListener("click",closeNewCharacterOverlay,!1))}function continueNewCharacter(e){e.preventDefault();var t=document.querySelector(".overlay--show"),r=document.querySelector(".js-name-character"),n=r.querySelector(".overlay__char-create-btn");t.classList.remove("overlay--show"),n.addEventListener("click",requestNewCharacterName),r.classList.add("overlay--show")}function requestNewCharacterName(e){e.preventDefault();var t=document.querySelector(".overlay--show");t&&t.classList.remove("overlay--show")}function loadCharacter(e){var t=document.querySelector("#svg1"),r=document.querySelector(".overlay--show");e.preventDefault(),hash.clear(),clearCharacter(),hashCharacter(),startup(),setHashTrigger(),setTimeout(function(){t.classList.remove("character--hide"),r&&r.classList.remove("overlay--show")},500)}function closeNewCharacterOverlay(e){var t=document.querySelector(".js-login-new-character");if(e.target===t){var r=document.querySelector(".overlay--show");r&&r.classList.remove("overlay--show")}}function hashCharacter(){var e,t=currentUser.cc.personnages[currentUser.cc.personnageActuel],r=[];for(e in t)r.push(encodeURIComponent(e)+"="+encodeURIComponent(t[e]));r.length&&personnageActuelToHash(currentUser)}function switchCharacter(e){var t;e.preventDefault();var r=document.querySelector(".js-character-list"),n=document.querySelector("#svg1"),i=this.parentNode.parentNode,o=i.querySelector(".overlay__char-name").innerHTML,a=document.querySelector(".overlay__char--current"),s=n.getAttribute("class"),l=s+" character--hide",u=currentUser.cc.personnages[o].sex;""===s&&("f"===u&&(s="select-female"),"m"===u&&(s="select-male"),l=s),a&&a.classList.remove("overlay__char--current"),i.classList.add("overlay__char--current"),currentUser.cc.personnageActuel=o,r.classList.remove("overlay--show"),n.setAttribute("class",l),updateDbUser(currentUser).then(function(e){return currentUser._rev=e.rev,e}).then(function(e){window.sex=currentUser.cc.personnages[o].sex,t=currentUser.cc.personnages[o],console.log("choices",t),c=new Character(t),hash.clear(),setTimeout(function(){clearCharacter(),hashCharacter(),setHashTrigger()},500)}).catch(function(e){console.log("err",e)})}function revealCharacter(){document.querySelector("#svg1").classList.remove("character--hide")}function manageCharacters(){var e,t,r,n,i,o=document.querySelector(".js-character-list"),a=o.querySelector(".overlay__title"),s=o.querySelector(".overlay__char-card--orig"),l=Object.keys(currentUser.cc.personnages),c=l.length,u=o.querySelector(".overlay__container--char-list"),h=currentUser.cc.personnageActuel,d=document.querySelector("#usernameButton").querySelector(".menu-text"),f=document.querySelector("#pagewrap"),p=document.querySelector(".save-btn"),g=o.querySelector(".overlay__char-new-btn"),m=o.querySelector(".overlay__char-create-btn");for(resetCharacters();c--;){i=l[c];var v=s.cloneNode(!0),y=v.querySelector(".overlay__char-name");v.classList.remove("overlay__char-card--orig"),i===h&&v.classList.add("overlay__char--current"),y.innerHTML=i,u.appendChild(v)}for(t=(e=o.querySelectorAll(".overlay__char-edit")).length;t--;)e[t].addEventListener("click",switchCharacter);for(n=(r=o.querySelectorAll(".overlay__char-delete")).length;n--;)r[n].addEventListener("click",deleteChar);a.innerHTML=currentUser.name,d.innerHTML=currentUser.name,f.classList.add("logged"),p.addEventListener("click",saveChar,!0),g.addEventListener("click",newChar,!0),m.addEventListener("click",createChar,!0)}function resetCharacters(){var e=document.querySelector(".js-character-list").querySelectorAll(".overlay__char-card:not(.overlay__char-card--orig):not(.overlay__char-new)");Array.prototype.forEach.call(e,function(e){e.parentNode.removeChild(e)})}function registerMenu(){var e=document.querySelector(".js-login"),t=document.querySelector(".js-register"),r=document.querySelector("#register-form"),n=t.querySelector(".first-input");e.classList.contains("overlay--show")&&e.classList.remove("overlay--show"),t.classList.add("overlay--show"),r.addEventListener("submit",register,!0),t.addEventListener("click",closeRegister,!0),n.focus()}function closeRegister(e){var t=document.querySelector(".js-register"),r=t.querySelector(".cancel-btn"),n=e.target;if(n===t||n===r){var i=document.querySelector(".overlay--show");i&&(clearInputFields(),i.classList.remove("overlay--show"))}}function register(e){e.preventDefault();var t=e,r=t.target.children[0].lastElementChild.value,n=t.target.children[1].lastElementChild.value,i=t.target.children[2].lastElementChild.value,o=document.querySelector(".overlay--show");n?i?r?(console.log("Calling createDbUSer"),createDbUser(n,i,r).then(function(){return loginDbUser(n,i)}).then(function(e){return console.log("fetched2",e),n}).then(getDbUser).then(function(e){manageCharacters(currentUser=e),o.classList.remove("overlay--show")}).catch(function(e){console.error("register err",e)})):console.log("missing email."):console.log("missing password."):console.log("missing username.")}function setHashTrigger(){window.addEventListener("hashchange",triggerSaveBtn,!1)}function triggerSaveBtn(){var e=document.querySelector(".save-btn");e&&e.classList.add("save--enabled")}function newChar(){var e=document.querySelector(".js-new-card"),t=e.querySelector(".first-input");e.classList.add("overlay__char-new--create"),t.focus()}function createChar(e){e&&e.preventDefault();var t=document.querySelector(".overlay__char-new--create"),r=this.parentNode.querySelector(".js-new-char-name").value;t.classList.remove("overlay__char-new--create");var n=r;n&&(currentUser.cc||(currentUser.cc={}),currentUser.cc.personnageActuel||(currentUser.cc.personnageActuel=n),currentUser.cc.personnages||(currentUser.cc.personnages={}),currentUser.cc.personnages[n]=window.hash.get(),Object.assign(currentUser.cc.personnages,personnages),updateDbUser(currentUser).then(function(e){return currentUser._rev=e.rev,e}).catch(function(e){console.log("err",e)}),manageCharacters())}function deleteChar(){var e=this.parentNode.parentNode.querySelector(".overlay__char-name").innerHTML;delete currentUser.cc.personnages[e],updateDbUser(currentUser).then(function(e){return currentUser._rev=e.rev,e}).catch(function(e){console.log("err",e)}),manageCharacters()}function saveChar(){document.querySelector(".save-btn").classList.remove("save--enabled");var e=currentUser.cc.personnageActuel;myUsername&&currentUser&&currentUser&&e&&(currentUser.cc||(currentUser.cc={}),currentUser.cc.personnageActuel||(currentUser.cc.personnageActuel=e),currentUser.cc.personnages||(currentUser.cc.personnages={}),currentUser.cc.personnages[e]=window.hash.get(),Object.assign(currentUser.cc.personnages,personnages),updateDbUser(currentUser).then(function(e){return currentUser._rev=e.rev,e}).catch(function(e){console.log("err",e)}))}function startup(){var e;currentUser&&currentUser.cc&&currentUser.cc.personnages&&currentUser.cc.personnageActuel&&(e=currentUser.cc.personnages[currentUser.cc.personnageActuel]),window.c=new Character(e),interpretHash()}function interpretHash(){var e=hash.get("sex");"m"===e?selectMale():"f"===e&&selectFemale()}function launch(){if(skinLayers=["age_lines","body_athletic","body_head_default","body_head_diamond","body_head_heart","body_head_oblong","body_head_oval","body_head_round","body_head_square","body_head_triangle","body_hand","ears_default","ears_pointed","nose_default","nose_roman","nose_syrid","mouth_shadow","age_lines","wings_devil","mouth_neutral","mouth_amusement","mouth_anger","mouth_alertness","mouth_anxiety","mouth_betrayal","mouth_caged","mouth_cruel","mouth_desperation","mouth_eeww","mouth_horror","mouth_melancholy","mouth_omg","mouth_outrage"],hairLayers=["facialhair_beard_boxed","facialhair_beard_ducktail","facialhair_beard_guru","facialhair_beard_intelectual","facialhair_beard_rap","facialhair_beard_raw","facialhair_chinpuff","facialhair_goatee","facialhair_goatee_raw","facialhair_moustache","facialhair_moustache_dali","facialhair_moustache_thick","facialhair_muttonchops","facialhair_muttonchops_friendly","facialhair_soulpatch","facialhair_winnfield","hair_balding","hair_balding_crazy","hair_balding_crown","hair_short","hair_gelled","hair_wavy","hair_manga_1_of_2","hair_manga_2_of_2","hair_mohawk","hair_pigtails_1_of_2","hair_pigtails_2_of_2","hair_down_1_of_3","hair_down_2_of_3","hair_down_3_of_3","hair_afro","hair_ponytail","hair_bangs","hair_odango","hair_emo","hair_spider","hair_wreckingball","hair_crewcut","eyelashes_neutral","brows_neutral","brows_alertness","brows_amusement","brows_anger","brows_anxiety","brows_aversion","brows_betrayal","brows_caged","brows_concern","brows_cruel","brows_dejection","brows_desperation","brows_disdain","brows_disgust","brows_eeww","brows_fear","brows_grief","brows_horror","brows_indignation","brows_joy","brows_laughing","brows_melancholy","brows_omg","brows_outrage","brows_pain","brows_rage","brows_revulsion","brows_sadness","brows_satisfaction","brows_shock","brows_sterness","brows_surprise","brows_terror","brows_wonder","brows_wtf"],c.sex=hash.get("sex"),"m"===c.sex){var e={Body_head:["default","diamond","heart","oblong","oval","round","square","triangle"],Ears:["default","pointed","outstretched","plugged","unplugged"],Iris:["neutral"],Pupils:["human","lizard"],Nose:["default","roman","syrid"],Facialhair:["","beard_boxed","beard_ducktail","beard_guru","beard_intelectual","beard_rap","beard_raw","chinpuff","goatee","goatee_raw","moustache","moustache_dali","moustache_thick","muttonchops","muttonchops_friendly","soulpatch","winnfield"],Hair:["","balding","balding_crazy","balding_crown","short","gelled","wavy","manga","mohawk","crewcut"],Freckles:["","medium"],Age:["","lines"],Emotion:["neutral","alertness","amusement","anger","anxiety","aversion","betrayal","caged","concern","cruel","dejection","desperation","disdain","disgust","eeww","fear","grief","horror","indignation","joy","laughing","melancholy","omg","outrage","pain","rage","revulsion","sadness","satisfaction","shock","sterness","surprise","terror","wonder","wtf"]},t={Pipe:["","subgenius"],Earings:["","gold_rings","gold_ring_right","gold_ring_left"],Hat:["","baseball","berret","cap","cowboy","fedora","jester","top","motorcycle","police","scumbag","helmet_vietnam","tuque","strainer","magritte"],Horns:["","devil","large"],Mask:["","guy_fawkes","robin","horse","stormtrooper","jason","cat"],Glasses:["","designer","fpv","goggles","google","hipster","oakley","rayban","round","wayrafer"],Eyepatch:["","left","right"],Headband:["","medium"],Jewelry:["","chain"],Warpaint:["","football"],Earpiece:["","microphone"]},r={Shirt:["","tanktop","colar","tshirt","turtleneck"],Tie:["","neck","bolo","bow"],Vest:["","vest","lined"],Holster:["","revolver_chest","revolver_hip"],Shoulderpads:["","general","artillery"],Scarf:["","parisian_knot","twice_around","four_in_hand","reverse_drape_cross","reverse_drape_tuck","fake_knot","reverse_drape","chest_warmer","overhand","once_around","drape"]},n={Body:["athletic"],Scar:["","horizontal_neck","horizontal_nose","vertical_heart","vertical_left","vertical_right"],Tatoo:["","aum_chest","aum_left","aum_right","chaos_chest","chaos_left","chaos_right"],Suit:["","wetsuit"],Jacket:["","suit"],Coat:["","fall_long","lab","trench","snowboard"],Cloak:["","default"],Watch:["","generic"],Gloves:["","lab","motorcycle"],Wings:["","angel","devil"],Pet:["","feline","raven","rat","canine","siamese_cat","gerbil","chicken","fox","vulture","parrot","doge"]},i={Underwear:["plain","boxers"],Pants:["","suit","jeans","leather","snowboard"],Belt:["","default","straps","utility","leather"]},o={Socks:["","socks"],Shoes:["","hightops","leather","flip-flops"]},a="layer/male/",s=["wings_angel","wings_devil","cloak_default_4_of_4","coat_trench_3_of_3","pet_doge","pet_vulture","pet_parrot","pet_feline","pet_raven","pet_rat","pet_canine","pet_siamese_cat","pet_gerbil","pet_chicken","pet_fox","hat_helmet_vietnam_2_of_2","hat_strainer_2_of_2","hat_fedora_2_of_2","headband_medium_2_of_2","hair_manga_2_of_2","coat_trench_2_of_3","shoes_flip-flops_2_of_2","body_athletic_2_of_2","tatoo_aum_chest","tatoo_chaos_chest","scar_vertical_heart","scar_horizontal_neck","underwear_plain","underwear_boxers","shirt_tanktop_2_of_2","body_athletic_1_of_2","tatoo_aum_left","tatoo_aum_right","tatoo_chaos_left","tatoo_chaos_right","shirt_tanktop_1_of_2","suit_wetsuit","socks_socks","shoes_hightops","shoes_leather","shoes_flip-flops_1_of_2","watch_generic","shirt_colar_2_of_2","shirt_turtleneck","tie_bolo","tie_bow_2_of_2","tie_neck","shirt_colar_1_of_2","vest_vest","vest_lined","pants_jeans_1_of_2","pants_leather","pants_suit_1_of_2","pants_snowboard","belt_leather","belt_default","pants_jeans_2_of_2","pants_suit_2_of_2","shirt_tshirt","tie_bow_1_of_2","jewelry_chain","belt_straps","holster_revolver_chest","holster_revolver_hip","jacket_suit","coat_fall_long_2_of_2","belt_utility","gloves_lab","gloves_motorcycle","coat_fall_long_1_of_2","coat_lab","coat_trench_1_of_3","coat_snowboard","cloak_default_3_of_4","cloak_default_2_of_4","shoulderpads_general","scarf_parisian_knot","scarf_twice_around","scarf_four_in_hand","scarf_reverse_drape_cross","scarf_reverse_drape_tuck","scarf_fake_knot","scarf_reverse_drape","scarf_chest_warmer","scarf_overhand","scarf_once_around","scarf_drape","shoulderpads_artillery","body_head_default","body_head_square","body_head_diamond","body_head_heart","body_head_oblong","body_head_oval","body_head_round","body_head_triangle","ears_default","ears_outstretched","ears_pointed","ears_plugged","ears_unplugged","age_lines","freckles_medium","earings_gold_rings","earings_gold_ring_left","earings_gold_ring_right","scar_horizontal_nose","scar_vertical_left","scar_vertical_right","eyes_neutral","eyes_alertness","eyes_amusement","eyes_anger","eyes_anxiety","eyes_aversion","eyes_betrayal","eyes_caged","eyes_concern","eyes_cruel","eyes_dejection","eyes_desperation","eyes_disdain","eyes_disgust","eyes_eeww","eyes_fear","eyes_grief","eyes_horror","eyes_indignation","eyes_joy","eyes_laughing","eyes_melancholy","eyes_omg","eyes_outrage","eyes_pain","eyes_rage","eyes_revulsion","eyes_sadness","eyes_satisfaction","eyes_shock","eyes_sterness","eyes_surprise","eyes_terror","eyes_wonder","eyes_wtf","iris_neutral","iris_sterness","iris_indignation","iris_anger","iris_rage","iris_disdain","iris_aversion","iris_disgust","iris_revulsion","iris_concern","iris_anxiety","iris_fear","iris_terror","iris_satisfaction","iris_amusement","iris_joy","iris_laughing","iris_dejection","iris_alertness","iris_betrayal","iris_caged","iris_cruel","iris_desperation","iris_eeww","iris_horror","iris_melancholy","iris_omg","iris_outrage","pupils_human_neutral","pupils_human_sterness","pupils_human_indignation","pupils_human_anger","pupils_human_rage","pupils_human_disdain","pupils_human_aversion","pupils_human_disgust","pupils_human_revulsion","pupils_human_concern","pupils_human_anxiety","pupils_human_fear","pupils_human_terror","pupils_human_satisfaction","pupils_human_amusement","pupils_human_joy","pupils_human_laughing","pupils_human_dejection","pupils_human_alertness","pupils_human_betrayal","pupils_human_caged","pupils_human_cruel","pupils_human_desperation","pupils_human_eeww","pupils_human_horror","pupils_human_melancholy","pupils_human_omg","pupils_human_outrage","brows_neutral","brows_alertness","brows_amusement","brows_anger","brows_anxiety","brows_aversion","brows_betrayal","brows_caged","brows_concern","brows_cruel","brows_dejection","brows_desperation","brows_disdain","brows_disgust","brows_eeww","brows_fear","brows_grief","brows_horror","brows_indignation","brows_joy","brows_laughing","brows_melancholy","brows_omg","brows_outrage","brows_pain","brows_rage","brows_revulsion","brows_sadness","brows_satisfaction","brows_shock","brows_sterness","brows_surprise","brows_terror","brows_wonder","brows_wtf","mouth_neutral","mouth_alertness","mouth_amusement","mouth_anger","mouth_anxiety","mouth_aversion","mouth_betrayal","mouth_caged","mouth_concern","mouth_cruel","mouth_dejection","mouth_desperation","mouth_disdain","mouth_disgust","mouth_eeww","mouth_fear","mouth_grief","mouth_horror","mouth_indignation","mouth_joy","mouth_laughing","mouth_melancholy","mouth_omg","mouth_outrage","mouth_pain","mouth_rage","mouth_revulsion","mouth_sadness","mouth_satisfaction","mouth_shock","mouth_sterness","mouth_surprise","mouth_terror","mouth_wonder","mouth_wtf","nose_default","nose_roman","nose_syrid","warpaint_football","facialhair_beard_boxed","facialhair_beard_ducktail","facialhair_beard_guru","facialhair_beard_intelectual","facialhair_beard_rap","facialhair_beard_raw","facialhair_chinpuff","facialhair_goatee","facialhair_goatee_raw","facialhair_moustache","facialhair_moustache_dali","facialhair_moustache_thick","facialhair_muttonchops","facialhair_muttonchops_friendly","facialhair_soulpatch","facialhair_winnfield","mask_robin","eyepatch_left","eyepatch_right","hair_balding","hair_balding_crazy","hair_balding_crown","hair_gelled","hair_manga_1_of_2","hair_mohawk","hair_short","hair_wavy","hair_crewcut","headband_medium_1_of_2","mask_guy_fawkes","glasses_designer","glasses_fpv","glasses_goggles","glasses_google","glasses_hipster","glasses_oakley","glasses_rayban","glasses_round","glasses_wayrafer","hat_baseball","hat_berret","hat_cap","hat_tuque","hat_cowboy","hat_fedora_1_of_2","hat_jester","hat_top","hat_magritte","hat_police","hat_scumbag","hat_strainer_1_of_2","hat_helmet_vietnam_1_of_2","hat_motorcycle","jewelry_earings","jewelry_nosering","jewelry_watch","mask_horse","mask_stormtrooper","mask_jason","mask_cat","horns_devil","cloak_default_1_of_4","horns_large","pipe_subgenius","earpiece_microphone"];multiLayer=[["body_athletic",2],["hair_manga",2],["cloak_default",4],["coat_fall_long",2],["coat_trench",3],["hat_fedora",2],["headband_medium",2],["shirt_colar",2],["shirt_tanktop",2],["hat_strainer",2],["hat_helmet_vietnam",2],["pants_jeans",2],["pants_suit",2],["tie_bow",2],["shoes_flip-flops",2]]}else{e={Body_head:["default","heart","oblong","oval","round","square","diamond","triangle"],Ears:["default","pointed"],Iris:["neutral"],Nose:["default"],Emotion:["neutral","alertness","amusement","anger","aversion","dejection","disdain","disgust","grief","indignation","joy","laughter","melancholy","rage","sadness","sterness","surprise","shock","wonder"],Hair:["","afro","down","manga","mohawk","pigtails","ponytail","short","bangs","odango","emo","spider","wreckingball"]},t={Pipe:["","subgenius"],Makeup:["","blush","gothic_eyeliner","warpaint"],Freckles:["","medium"],Earings:["","gold_rings","gold_ring_right","gold_ring_left","death_drop"],Eyepatch:["","left","right"],Glasses:["","designer","fpv","goggles","google","hipster","oakley","rayban","round","wayrafer"],Headband:["","medium"],Hat:["","top","waitress","cowboy","police","scumbag","helmet_vietnam","tiara","strainer","magritte","motorcycle","tuque","cap"],Mask:["","guy_fawkes","horse","stormtrooper","jason","cat"],Horns:["","devil"],Earpiece:["","microphone"],Veil:["","al-amira","hijab","khimar","niqab","shayla"]},r={Collar:["","metal"],Necklace:["","perl","princess"],Bra:["","bow"],Top:["","asymetric","loop","tank"],Shoulderpads:["","artillery","general"],Scarf:["","chest_warmer","parisian_knot","twice_around","four_in_hand","reverse_drape_cross","reverse_drape_tuck","fake_knot","reverse_drape","overhand","once_around","drape"]},n={Body:["athletic"],Tatoo:["","chaos_chest","chaos_left","chaos_right","tribal_face","archeopteryx_left"],Nails:["short","long","claws"],Holster:["","revolver_chest","revolver_hip","revolver_thigh"],Suit:["","wetsuit"],Dress:["","accolade","bobafett","casual","corset","suit","waitress","short","cheerleader","japanese_pleat","parisian_fall","german_expression"],Coat:["","winter_furcollar","winter_tubecollar"],Bracelet:["","rings"],Pet:["","feline","raven","rat","canine","siamese_cat","gerbil","chicken","fox","vulture","parrot","doge"],Wings:["","devil","angel"]},i={Underwear:["","plain","string"],Shorts:["","bikini","short"],Leggings:["","regular","torn"],Pants:["","yoga","yoga_torn","jeans","jeans_torn","jeans_bellbottoms"],Belt:["","utility","satchel"]},o={Shoes:["","hightops","highheels","sandals_roman","plateforms","flip-flops"]},a="layer/female/",s=["wings_devil","wings_angel","pet_doge","pet_vulture","pet_parrot","pet_feline","pet_raven","pet_rat","pet_canine","pet_siamese_cat","pet_gerbil","pet_chicken","pet_fox","coat_winter_tubecollar_3_of_3","hat_helmet_vietnam_2_of_2","hat_strainer_2_of_2","headband_medium_2_of_2","coat_winter_furcollar_3_of_3","veil_shayla_2_of_2","hair_down_3_of_3","hair_manga_2_of_2","hair_pigtails_2_of_2","shoes_flip-flops_2_of_2","holster_revolver_thigh_2_of_2","body_athletic","tatoo_chaos_chest","tatoo_chaos_left","tatoo_chaos_right","tatoo_archeopteryx_left","underwear_plain","underwear_string","leggings_regular","leggings_torn","bra_bow","suit_wetsuit","necklace_perl","necklace_princess","shoes_hightops","shoes_highheels","shoes_plateforms","shoes_sandals_roman","shoes_flip-flops_1_of_2","pants_yoga","pants_yoga_torn","pants_jeans","pants_jeans_torn","pants_jeans_bellbottoms","shorts_bikini","shorts_short","holster_revolver_hip","holster_revolver_thigh_1_of_2","top_asymetric","top_loop","top_tank","dress_accolade","dress_bobafett","dress_casual","dress_corset","dress_suit","dress_short","dress_waitress","dress_cheerleader","dress_japanese_pleat","dress_german_expression","dress_parisian_fall","holster_revolver_chest","belt_satchel","collar_metal","veil_al-amira_2_of_2","veil_khimar_2_of_2","bracelet_rings","coat_winter_furcollar_2_of_3","coat_winter_tubecollar_1_of_3","coat_winter_tubecollar_2_of_3","shoulderpads_general","scarf_chest_warmer","scarf_parisian_knot","scarf_twice_around","scarf_four_in_hand","scarf_reverse_drape_cross","scarf_reverse_drape_tuck","scarf_fake_knot","scarf_reverse_drape","scarf_overhand","scarf_once_around","scarf_drape","hair_down_2_of_3","body_head_default","body_head_square","body_head_diamond","body_head_heart","body_head_oblong","body_head_oval","body_head_round","body_head_triangle","ears_default","ears_pointed","nose_default","tatoo_tribal_face","earings_perl","earings_gold_rings","earings_gold_ring_left","earings_gold_ring_right","earings_death_drop","freckles_medium","makeup_blush","makeup_warpaint","makeup_gothic_eyeliner","eyes_neutral","eyes_sterness","eyes_indignation","eyes_anger","eyes_rage","eyes_disdain","eyes_aversion","eyes_disgust","eyes_amusement","eyes_joy","eyes_laughter","eyes_dejection","eyes_melancholy","eyes_sadness","eyes_grief","eyes_alertness","eyes_wonder","eyes_surprise","eyes_shock","iris_neutral","iris_sterness","iris_indignation","iris_anger","iris_rage","iris_disdain","iris_aversion","iris_disgust","iris_amusement","iris_joy","iris_laughter","iris_dejection","iris_melancholy","iris_alertness","iris_wonder","iris_surprise","iris_shock","pupils_human_neutral","pupils_human_sterness","pupils_human_indignation","pupils_human_anger","pupils_human_rage","pupils_human_disdain","pupils_human_aversion","pupils_human_disgust","pupils_human_amusement","pupils_human_joy","pupils_human_laughter","pupils_human_dejection","pupils_human_melancholy","pupils_human_alertness","pupils_human_wonder","pupils_human_surprise","pupils_human_shock","lashes_neutral","lashes_sterness","lashes_indignation","lashes_anger","lashes_rage","lashes_disdain","lashes_aversion","lashes_disgust","lashes_amusement","lashes_joy","lashes_laughter","lashes_dejection","lashes_melancholy","lashes_sadness","lashes_grief","lashes_alertness","lashes_wonder","lashes_surprise","lashes_shock","mouth_neutral","mouth_sterness","mouth_indignation","mouth_anger","mouth_rage","mouth_disdain","mouth_aversion","mouth_disgust","mouth_amusement","mouth_joy","mouth_laughter","mouth_dejection","mouth_melancholy","mouth_sadness","mouth_grief","mouth_alertness","mouth_wonder","mouth_surprise","mouth_shock","brows_neutral","brows_sterness","brows_indignation","brows_anger","brows_rage","brows_disdain","brows_aversion","brows_disgust","brows_amusement","brows_joy","brows_laughter","brows_dejection","brows_melancholy","brows_sadness","brows_grief","brows_alertness","brows_wonder","brows_surprise","brows_shock","eyepatch_left","eyepatch_right","mask_guy_fawkes","tie_bow","hair_short","hair_afro","hair_mohawk","hair_bangs","hair_ponytail","hair_odango","hair_emo","hair_spider","hair_wreckingball","hair_down_1_of_3","hair_manga_1_of_2","hair_pigtails_1_of_2","glasses_hipster","glasses_fpv","glasses_google","glasses_oakley","glasses_rayban","glasses_round","glasses_wayrafer","glasses_designer","glasses_goggles","veil_al-amira_1_of_2","veil_hijab","veil_khimar_1_of_2","veil_niqab","veil_shayla_1_of_2","headband_medium_1_of_2","hat_waitress","hat_police","hat_cowboy","hat_top","hat_scumbag","hat_tiara","hat_magritte","hat_strainer_1_of_2","hat_helmet_vietnam_1_of_2","hat_tuque","hat_cap","hat_motorcycle","body_hand","nails_short","nails_long","nails_claws","mask_horse","mask_stormtrooper","mask_jason","mask_cat","horns_devil","coat_winter_furcollar_1_of_3","shoulderpads_artillery","belt_utility","pipe_subgenius","earpiece_microphone"];multiLayer=[["hair_pigtails",2],["hair_manga",2],["hair_down",3],["hat_strainer",2],["hat_helmet_vietnam",2],["headband_medium",2],["coat_winter_furcollar",3],["coat_winter_tubecollar",3],["holster_revolver_thigh",2],["veil_al-amira",2],["veil_khimar",2],["veil_shayla",2],["shoes_flip-flops",2]]}forms=[e,t,r,n,i,o],parseHash(c,forms,skinLayers,hairLayers),toBeShown=choicesToLayers(c,multiLayer),viewport=Snap("#svg1");var l=s.map(function(e){return a+e});viewport.loadFilesDisplayOrdered(l,onAllLoaded,onEachLoaded)}function displayPallette(){void 0!=hash.get("skinColor")?launch():chooseSkinColor()}function chooseSkinColor(){var e=["#FFDFC4","#F0D5BE","#EECEB3","#E1B899","#E5C298","#FFDCB2","#E5B887","#E5A073","#E79E6D","#DB9065","#CE967C","#C67856","#BA6C49","#A57257","#F0C8C9","#DDA8A0","#B97C6D","#A8756C","#AD6452","#5C3836","#CB8442","#BD723C","#704139","#A3866A"],t=document.querySelector(".skin-color__container");for(color in t.classList.add("skin-color__container--show"),e){var r=e[color],n=document.createElement("LI");n.className="skin-tone",n.style.cssText="background-color:"+r+";",t.appendChild(n),n.onclick=colorCutout,n.onmouseover=colorOnHover}}function defaultEyeColor(e){var t={"#ffdfc4":"#6F918A","#f0d5be":"#FF6600","#eeceb3":"#A0892C","#e1b899":"#784421","#e5c298":"#784421","#ffdcb2":"#784421","#e5b887":"#784421","#e5a073":"#784421","#e79e6d":"#784421","#db9065":"#784421","#ce967c":"#784421","#c67856":"#784421","#ba6c49":"#784421","#a57257":"#784421","#f0c8c9":"#37ABC8","#dda8a0":"#AAD400","#b97c6d":"#552200","#a8756c":"#552200","#ad6452":"#552200","#5c3836":"#552200","#cb8442":"#552200","#bd723c":"#552200","#704139":"#552200","#a3866a":"#552200"}[e];hash.add({irisColor:t})}function defaultHairColor(e){var t={"#ffdfc4":"#803300","#f0d5be":"#803300","#eeceb3":"#803300","#e1b899":"#1a1a1a","#e5c298":"#1a1a1a","#ffdcb2":"#1a1a1a","#e5b887":"#1a1a1a","#e5a073":"#1a1a1a","#e79e6d":"#1a1a1a","#db9065":"#1a1a1a","#ce967c":"#1a1a1a","#c67856":"#1a1a1a","#ba6c49":"#1a1a1a","#a57257":"#1a1a1a","#f0c8c9":"#ffcc00","#dda8a0":"#ff6600","#b97c6d":"#1a1a1a","#a8756c":"#1a1a1a","#ad6452":"#1a1a1a","#5c3836":"#1a1a1a","#cb8442":"#1a1a1a","#bd723c":"#1a1a1a","#704139":"#1a1a1a","#a3866a":"#1a1a1a"}[e];hash.add({hairColor:t})}function rgb2hex(e){return(e=e.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i))&&4===e.length?"#"+("0"+parseInt(e[1],10).toString(16)).slice(-2)+("0"+parseInt(e[2],10).toString(16)).slice(-2)+("0"+parseInt(e[3],10).toString(16)).slice(-2):""}function colorOnHover(){var e=document.getElementById("path_male"),t=document.getElementById("path_female"),r=this.style.backgroundColor;t.style.fill=r,e.style.fill=r}function colorCutout(e){e=rgb2hex(this.style.backgroundColor),document.getElementsByClassName(".skin-tone"),document.getElementById("male_silhouette"),document.getElementById("female_silhouette"),document.getElementsByClassName("lg");var t=new Array;t.skinColor=e,document.querySelector(".skin-color__container").classList.remove("skin-color__container--show"),hash.add(t),defaultEyeColor(e),defaultHairColor(e),setTimeout(function(){launch()},300)}function selectMale(e){window.sex="m";var t=document.querySelector("#mButton"),r=document.querySelector("#svg1"),n=document.querySelector("#male_silhouette");document.querySelector("#female_silhouette");t&&(t.checked=!0),n&&n.removeEventListener("click",selectMale,!1),hash.add({sex:"m"});document.getElementById("path_male");r.classList.add("select-male"),setTimeout(function(){displayPallette()},350)}function selectFemale(e){window.sex="f";var t=document.querySelector("#fButton"),r=document.querySelector("#svg1"),n=(document.querySelector("#male_silhouette"),document.querySelector("#female_silhouette"));t&&(t.checked=!0),n&&n.removeEventListener("click",selectFemale,!1),hash.add({sex:"f"});n=document.getElementById("female_silhouette"),document.getElementById("path_female");r.classList.add("select-female"),setTimeout(function(){displayPallette()},350)}function parseHash(e,t,r,n){for(var i=t.length,o=i;o--;){var a=i-o-1;for(var s in t[a]){var l=s.toLowerCase();if("brows"===l||"eyes"===l||"iris"===l||"pupils"===l||"mouth"===l||"lashes"===l){if("pupils"===l){var c=hash.get("pupils");void 0==c&&(c="human"),l+="_"+c}void 0===(u=hash.get("emotion"))&&(u="neutral")}else var u=hash.get(l);var h=l+"_"+u;void 0!=u?(modCharacter(l,u),ga("send","event","hash","select",h)):"brows"!==l&&"eyes"!==l&&"iris"!==l&&"pupils_human"!==l&&"mouth"!==l||modCharacter(l,"neutral"),h in r||"body"===l?l="skin":(h in n||"hair"===l)&&(l="hair");var d=hash.get(l+"Color");void 0!=d&&""!=d&&(modCharacter(l+"Color",d),ga("send","event","hash","color",l+"_"+d))}}}function random(){var e=window.forms,t=e.length,r=Math.floor(Math.random()*t),n=e[r];for(k in n)n.hasOwnProperty(k)&&0;var i=[];for(var o in e[r])e[r].hasOwnProperty(o)&&i.push(o);var a=i.length,s=o=i[Math.floor(Math.random()*a)],l=e[r][s].length,c=Math.floor(Math.random()*l),u=e[r][s][c].toLowerCase();showRandom(o.toLowerCase(),u)}function showRandom(e,t){hideCompetition(e);var r=t,n=[];n[0]=e;var i=new Array,o="#"+n[0]+"_"+r;if(i[n[0]]=r,hash.add(i),"pupils"===n[0]&&(n[0]+="_"+r,void 0==(r=hash.get("emotion"))&&(r="neutral")),"emotion"===n[0]){modCharacter(n[0],r),n=[];var a=GetEmotionGetLayers(r);for(emo in a){var s=a[emo]+"_"+t;n.push(s)}}for(e in n){sectionOptions=getOptions(n[e]);o="#"+n[e]+"_"+t;for(option in sectionOptions)optionId="#"+n[e]+"_"+sectionOptions[option],hideId(optionId);if(showId(o),"brows"===n[e]||"eyes"===n[e]||"iris"===n[e]||"mouth"===n[e]||"pupils_human"===n[e]||"lashes"===n[e])modCharacter(n[e],r);else(i=new Array)[n[e]]=r,hash.add(i),modCharacter(n[e],r)}}function hideCompetition(e){var t=["hair","mask","hat","veil"],r=["shorts","pants"],n=["jacket","coat"];-1!=t.indexOf(e)?hideArray(t):-1!=r.indexOf(e)?hideArray(r):-1!=n.indexOf(e)&&hideArray(n)}function hideArray(e){for(section in e)for(option in sectionOptions=getOptions(e[section]),sectionOptions){optionId="#"+e[section]+"_"+sectionOptions[option],hideId(optionId);var t=new Array;t[e[section]]="",hash.add(t),modCharacter(e[section],"")}}function showId(e){for(lyr in ga("send","event","menu","select",e),multiLayer)if(e.slice(1)==multiLayer[lyr][0])for(var t=1;t<=multiLayer[lyr][1];t++)idOf=e+"_"+t+"_of_"+multiLayer[lyr][1],viewport.selectAll(idOf).attr({opacity:1});else viewport.selectAll(e).attr({opacity:1})}function hideId(e){for(lyr in multiLayer)if(e.slice(1)==multiLayer[lyr][0])for(var t=1;t<=multiLayer[lyr][1];t++)idOf=e+"_"+t+"_of_"+multiLayer[lyr][1],viewport.selectAll(idOf).attr({opacity:0});else viewport.selectAll(e).attr({opacity:0})}function getOptions(e){for(form in window.forms)if(capitalizeFirstLetter(e)in window.forms[form])return window.forms[form][capitalizeFirstLetter(e)]}function capitalizeFirstLetter(e){return e.charAt(0).toUpperCase()+e.slice(1)}function scrollZoom(e){document.querySelector("#svg1");var t=window.event||e,r=t.detail?-120*t.detail:t.wheelDelta,n=document.querySelector("#zoomLevel").value;document.querySelector("#zoomLevel");r>0?((n+=1)>3&&(n=3),document.querySelector("#zoomLevel").value=n,document.querySelector("#zoomLevel").onchange()):((n-=1)<0&&(n=0),document.querySelector("#zoomLevel").value=n,document.querySelector("#zoomLevel").onchange())}function zoomIn(){var e=c.sex;shape=document.getElementById("svg1"),"m"==e?shape.setAttribute("viewBox","140 73 290 290"):shape.setAttribute("viewBox","225 86 110 110")}function zoomOut(){c.sex;shape=document.getElementById("svg1"),shape.setAttribute("viewBox","10 50 540 540")}function zoomFace(){var e=c.sex;shape=document.getElementById("svg1"),"m"==e?shape.setAttribute("viewBox","240 90 80 80"):shape.setAttribute("viewBox","243 102 80 80")}function zoomTorso(){var e=c.sex;shape=document.getElementById("svg1"),"m"==e?shape.setAttribute("viewBox","204 85 150 150"):shape.setAttribute("viewBox","207 97 150 150")}function zoomBody(){var e=c.sex;shape=document.getElementById("svg1"),"m"==e?shape.setAttribute("viewBox","136 73 290 290"):shape.setAttribute("viewBox","140 84 290 290")}function zoomFull(){c.sex;shape=document.getElementById("svg1"),shape.setAttribute("viewBox","10 50 540 540")}function viewBoxZoom(){var e=document.querySelector("#zoomLevel").value;3==e?zoomFace():2==e?zoomTorso():1==e?zoomBody():0==e&&zoomFull()}getDbSession().then(getDbUser).then(function(e){var t,r=[];if(myUsername=e.name,currentUser=e,e.cc&&e.cc.personnages&&e.cc.personnageActuel&&e.cc.personnages[e.cc.personnageActuel])for(t in personnages=e.cc.personnages,personnageActuel=e.cc.personnageActuel,e.cc.personnages[e.cc.personnageActuel])r.push(encodeURIComponent(t)+"="+encodeURIComponent(e.cc.personnages[e.cc.personnageActuel][t]));manageCharacters(currentUser)}).catch(function(e){console.log("getDbUser error",e)}),window.onload=function(){var e=document.querySelector("#whoButton"),t=document.querySelector("#logoutButton"),r=document.querySelector("#loginButton"),n=document.querySelector("#registerButton"),i=document.querySelector(".js-register-link"),o=document.getElementById("male_silhouette"),a=document.getElementById("female_silhouette"),s=/Firefox/i.test(navigator.userAgent)?"DOMMouseScroll":"mousewheel",l=document.querySelector("#sidebar");rightSidebarClone=l.cloneNode(!0),e&&"function"==typeof whoami&&e.addEventListener("click",whoami,!1),t&&"function"==typeof logout&&t.addEventListener("click",logout,!1),r&&"function"==typeof loginMenu&&r.addEventListener("click",loginMenu,!1),n&&"function"==typeof registerMenu&&n.addEventListener("click",registerMenu,!1),i&&"function"==typeof registerMenu&&i.addEventListener("click",registerMenu,!1),document.attachEvent?document.attachEvent("on"+s,scrollZoom):document.addEventListener&&document.addEventListener(s,scrollZoom,!1),o&&"function"==typeof selectMale&&o.addEventListener("click",selectMale,!1),a&&"function"==typeof selectFemale&&a.addEventListener("click",selectFemale,!1),startup()};